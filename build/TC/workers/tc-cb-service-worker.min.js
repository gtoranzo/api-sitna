!function(){self.addEventListener("install",function(n){const e="TC.offline.map.common";n.waitUntil(caches.has(e).then(function(n){n&&caches.open(e).then(function(n){n.keys().then(function(n){console.log("Revisando cache...");return n.length?fetch(n[0]).then(function(){caches.delete(e).then(function(){console.log("Cache con bug ("+e+") borrada")})},function(n){console.log(n)}):self.skipWaiting()})})}))});self.addEventListener("activate",function(n){n.waitUntil(self.clients.claim())});self.addEventListener("fetch",function(n){n.respondWith(caches.match(n.request).then(function(e){return e||fetch(n.request).catch(function(e){console.log("[fetch] Could not fetch "+n.request.url+": "+e)})}))});const n={},e=function(n){self.clients.matchAll({includeUncontrolled:!0}).then(function(e){e.forEach(function(e){e.postMessage(n)})})};self.addEventListener("message",function(t){const c=t.data.action,o=t.data.name,a=t.data.silent,i=t.data.list;switch(c){case"create":n[o]=c;caches.delete(o).finally(function(){caches.open(o).then(function(t){const s=function(l){if(!n[o])return;if(l===i.length){a||e({action:c,name:o,event:"cached"});return}const f=l+1,u=i[l];t.add(u).then(function(){a||e({action:c,name:o,event:"progress",count:f,total:i.length})},function(){e({action:c,name:o,event:"error",url:u})}).finally(function(){s(f)})};s(0)})});break;case"delete":delete n[o];caches.delete(o).then(function(){a||e({action:c,name:o,event:"deleted"})},function(){e({action:c,name:o,event:"error"})})}})}();
//# sourceMappingURL=../maps/workers/tc-cb-service-worker.min.js.map