{"version":3,"sources":["control/ControlContainer.js"],"names":["TC","control","Container","syncLoadJS","apiLocation","ControlContainer","self","this","apply","arguments","_classSelector","CLASS","Array","isArray","controlOptions","console","log","Object","keys","forEach","key","ctl","newCtl","position","side","options","push","inherit","ctlProto","prototype","POSITION","LEFT","RIGHT","SIDE","template","dust","register","body_0","chk","ctx","w","s","get","block","body_1","body_3","__dustBody","h","body_2","value","f","body_4","onRenderPromise","bufferPromises","ctlCount","i","len","length","ctlName","filter","indexOf","map","addControl","Util","extend","id","uids","div","querySelector","Promise","all","then","containerControl","render","callback","_set1stRenderPromise","renderData","controls","index","resolve","reject","getRenderedHtml","html","document","createElement","innerHTML","trim","appendChild","content","firstChild","getUID","ctrl","addElement","li","setAttribute","addedElement","htmlElement","getAttribute"],"mappings":"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","sourcesContent":["TC.control = TC.control || {};\r\n\r\nif (!TC.control.Container) {\r\n    TC.syncLoadJS(TC.apiLocation + 'TC/Control/Container');\r\n}\r\n\r\nTC.control.ControlContainer = function () {\r\n    var self = this;\r\n\r\n    TC.control.Container.apply(self, arguments);\r\n\r\n    var cs = self._classSelector = '.' + self.CLASS;\r\n\r\n    // GLS: 20/01/2020 c칩digo compatibilidad hacia atr치s\r\n    if (!Array.isArray(self.controlOptions)) {\r\n        console.log('Gestionamos config de controlContainer antiguo');\r\n\r\n        var controlOptions = [];\r\n\r\n        Object.keys(self.controlOptions).forEach((key) => {\r\n            const ctl = self.controlOptions[key];\r\n            var newCtl = {\r\n                position: ctl.side\r\n            };\r\n\r\n            newCtl[key] = ctl.options;\r\n\r\n            controlOptions.push(newCtl);\r\n        });\r\n\r\n        self.controlOptions = controlOptions;\r\n    }\r\n};\r\n\r\nTC.inherit(TC.control.ControlContainer, TC.control.Container);\r\n\r\n(function () {\r\n    var ctlProto = TC.control.ControlContainer.prototype;\r\n\r\n    ctlProto.CLASS = 'tc-ctl-cctr';\r\n    ctlProto.POSITION = {\r\n        LEFT: \"left\",\r\n        RIGHT: \"right\"\r\n    };\r\n\r\n    // GLS: 20/01/2020 c칩digo compatibilidad hacia atr치s\r\n    ctlProto.SIDE = ctlProto.POSITION;\r\n\r\n    ctlProto.template = {};\r\n    ctlProto.template[ctlProto.CLASS] = TC.apiLocation + \"TC/templates/ControlContainer.html\";\r\n    ctlProto.template[ctlProto.CLASS + '-node'] = TC.apiLocation + \"TC/templates/ControlContainerNode.html\";\r\n\r\n    ctlProto.onRenderPromise = function () {\r\n        const self = this;\r\n\r\n        var bufferPromises = new Array(self.ctlCount);\r\n\r\n        for (var i = 0, len = self.controlOptions.length; i < len; i++) {\r\n            var ctl = self.controlOptions[i];\r\n\r\n            var ctlName = Object.keys(ctl).filter((key) => {\r\n                return [\"position\", \"index\"].indexOf(key) < 0;\r\n            })[0];\r\n            bufferPromises[i] = self.map.addControl(ctlName, TC.Util.extend({\r\n                id: self.uids[i],\r\n                div: self.div.querySelector('.' + self.CLASS + '-elm-' + i).querySelector('div')\r\n            }, ctl[ctlName]));\r\n        }\r\n\r\n        Promise.all(bufferPromises).then(function () {\r\n            for (var i = 0, len = arguments.length; i < len; i++) {\r\n                var ctl = arguments[i];\r\n                ctl.containerControl = self;\r\n            }\r\n        });\r\n    };\r\n\r\n    ctlProto.render = function (callback) {\r\n        const self = this;\r\n        return self._set1stRenderPromise(self.renderData({\r\n            controls: Object.keys(self.controlOptions).map(function (key, i) {\r\n                return TC.Util.extend(self.controlOptions[key], { index: i });\r\n            })\r\n        }));\r\n    };\r\n\r\n    ctlProto.addControl = function (control, options) {\r\n        const self = this;\r\n        options.position = options.position || options.side || self.POSITION.LEFT;\r\n\r\n        return new Promise(function (resolve, reject) {\r\n            self.getRenderedHtml(self.CLASS + '-node', { index: ++self.ctlCount }, function (html) {\r\n                var template = document.createElement('template');\r\n                template.innerHTML = html.trim();\r\n\r\n                self.div.querySelector('ul.' + self.CLASS + '-' + options.position).appendChild(template.content ? template.content.firstChild : template.firstChild);\r\n                self.map.addControl(control, TC.Util.extend({\r\n                    id: self.getUID(),\r\n                    div: self.div.querySelector('.' + self.CLASS + '-elm-' + self.ctlCount).querySelector('div')\r\n                }, options)).then(function (ctrl) {\r\n                    resolve(ctrl);\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    ctlProto.addElement = function (options) {\r\n        const self = this;\r\n\r\n        options.position = options.position || options.side || self.POSITION.LEFT;\r\n\r\n        var li = document.createElement('li');\r\n        li.setAttribute('class', (self.CLASS + '-elm ') + (self.CLASS + '-elm-' + self.ctlCount++ + ' '));\r\n\r\n        self.div.querySelector('ul.' + self.CLASS + '-' + options.position).appendChild(li);\r\n\r\n        var addedElement = li.appendChild(options.htmlElement);\r\n        addedElement.setAttribute('class', addedElement.getAttribute('class') + ' tc-ctl');\r\n        return addedElement;\r\n    };\r\n})();\r\n"]}