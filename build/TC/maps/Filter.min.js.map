{"version":3,"sources":["Filter.js"],"names":["TC","filter","Filter","tagName","this","tagName_","_defaultNSURL","_defaultPrefixNS","_wfsPrefixNS","_fieldTitle","_wfsNSURL","_wfs2prefixNS","_wfs2NSURL","_wfs2FieldTitle","prototype","getTagName","writeFilterCondition_","format","prefix","NSURL","tag","inner","writeInnerCondition_","LogicalNary","write","ComparisonBinary","Comparison","Spatial","Function","writeInnerArrayCondition_","filters","reduce","vi","va","index","getText","wfsVersion","parseFloat","and","conditions","params","concat","Array","slice","call","arguments","bind","apply","And","or","Or","not","condition","Not","bbox","Object","toString","Bbox","intersects","Intersects","within","Within","equalTo","propertyName","expression","opt_matchCase","EqualTo","notEqualTo","NotEqualTo","lessThan","LessThan","lessThanOrEqualTo","LessThanOrEqualTo","greaterThan","GreaterThan","greaterThanOrEqualTo","GreaterThanOrEqualTo","isNull","IsNull","between","lowerBoundary","upperBoundary","IsBetween","functionName","like","pattern","opt_wildCard","opt_singleChar","opt_escapeChar","IsLike","inherit","geometryName","extent","opt_srsName","srsName","values","LowerBoundary","UpperBoundary","Pattern","$","isArray","a","b","i","fmt","text","value","matchCase","escape","escapeChar","singleChar","wildCard","name","fieldTitle","undefined","_paramsToText","param","_text","attr","key","geometry","wrap","toGML","lowerCorner","upperCorner","BBOX"],"mappings":"AAACA,GAAGC,UAEJD,GAAGC,OAAOC,OAAS,SAAUC,GACzBC,KAAKC,SAAWF,EAEhBC,KAAKE,cAAgB,6BACrBF,KAAKG,iBAAmBH,KAAKI,aAAe,MAC5CJ,KAAKK,YAAc,eAEnBL,KAAKE,cAAgBF,KAAKM,UAAY,6BACtCN,KAAKO,cAAgB,MACrBP,KAAKQ,WAAa,iCAClBR,KAAKS,gBAAkB,kBAG3Bb,GAAGC,OAAOC,OAAOY,UAAUC,WAAa,WACpC,OAAOX,KAAKC,UAGhBL,GAAGC,OAAOC,OAAOY,UAAUE,sBAAwB,WAI/C,MAAO,sEAAuEC,QAC1EC,OAAQd,KAAKG,iBACbY,MAAOf,KAAKE,cACZc,IAJShB,KAIGW,aACZM,MAAOjB,KAAKkB,qBALHlB,SAajBJ,GAAGC,OAAOC,OAAOY,UAAUQ,qBAAuB,SAAUrB,GACxD,GAAIA,GAAUG,KAAM,CAChBH,EAAOK,cAAgBF,KAAKE,cAC5BL,EAAOM,iBAAmBH,KAAKG,iBAGnC,OAAIN,aAAkBD,GAAGC,OAAOsB,YACrBtB,EAAOuB,QAETvB,aAAkBD,GAAGC,OAAOwB,iBAC1BxB,EAAOuB,QAETvB,aAAkBD,GAAGC,OAAOyB,WAC1BzB,EAAOuB,QAETvB,aAAkBD,GAAGC,OAAO0B,QAC1B1B,EAAOuB,SAESxB,GAAGC,OAAO2B,SAC1B3B,EAAOuB,UAKtBxB,GAAGC,OAAOC,OAAOY,UAAUe,0BAA4B,SAAUC,GAC7D,OAAOA,EAAQC,OAAO,SAAUC,EAAIC,EAAIC,GACpC,OAAQF,aAAchC,GAAGC,OAAOC,OAAS8B,EAAGV,qBAAqBU,GAAMA,GAAMC,EAAGX,qBAAqBW,MAI7GjC,GAAGC,OAAOC,OAAOY,UAAUqB,QAAU,SAAUC,GAC3C,GAAIA,GAAcC,WAAWD,EAAW,KAAO,EAAG,CAC9ChC,KAAKG,iBAAmBH,KAAKO,cAC7BP,KAAKE,cAAgBF,KAAKQ,WAC1BR,KAAKK,YAAcL,KAAKS,gBAE5B,OAAOT,KAAKY,yBAGhBhB,GAAGC,OAAOqC,IAAM,SAAUC,GACtB,IAAIC,GAAU,MAAMC,OAAOC,MAAM5B,UAAU6B,MAAMC,KAAKC,YACtD,OAAO,IAAKjB,SAASd,UAAUgC,KAAKC,MAAM/C,GAAGC,OAAO+C,IAAKR,KAG7DxC,GAAGC,OAAOgD,GAAK,SAAUV,GACrB,IAAIC,GAAU,MAAMC,OAAOC,MAAM5B,UAAU6B,MAAMC,KAAKC,YACtD,OAAO,IAAKjB,SAASd,UAAUgC,KAAKC,MAAM/C,GAAGC,OAAOiD,GAAIV,KAG5DxC,GAAGC,OAAOkD,IAAM,SAAUC,GACtB,OAAO,IAAIpD,GAAGC,OAAOoD,IAAID,IAG7BpD,GAAGC,OAAOqD,KAAO,WACb,MAAqD,oBAAjDC,OAAOzC,UAAU0C,SAASZ,KAAKC,UAAU,IAClC,IAAI7C,GAAGC,OAAOwD,KAAK,KAAMZ,UAAU,GAAIA,UAAU,IAEjD,IAAI7C,GAAGC,OAAOwD,KAAKZ,UAAU,GAAIA,UAAU,GAAIA,UAAU,KAGxE7C,GAAGC,OAAOyD,WAAa,WACnB,MAAqD,oBAAjDH,OAAOzC,UAAU0C,SAASZ,KAAKC,UAAU,IAClC,IAAI7C,GAAGC,OAAO0D,WAAW,KAAMd,UAAU,GAAIA,UAAU,IAEvD,IAAI7C,GAAGC,OAAO0D,WAAWd,UAAU,GAAIA,UAAU,GAAIA,UAAU,KAI9E7C,GAAGC,OAAO2D,OAAS,WACf,MAAqD,oBAAjDL,OAAOzC,UAAU0C,SAASZ,KAAKC,UAAU,IAClC,IAAI7C,GAAGC,OAAO4D,OAAO,KAAMhB,UAAU,GAAIA,UAAU,IAEnD,IAAI7C,GAAGC,OAAO4D,OAAOhB,UAAU,GAAIA,UAAU,GAAIA,UAAU,KAI1E7C,GAAGC,OAAO6D,QAAU,SAAUC,EAAcC,EAAYC,GACpD,OAAO,IAAIjE,GAAGC,OAAOiE,QAAQH,EAAcC,EAAYC,IAG3DjE,GAAGC,OAAOkE,WAAa,SAAUJ,EAAcC,EAAYC,GACvD,OAAO,IAAIjE,GAAGC,OAAOmE,WAAWL,EAAcC,EAAYC,IAG9DjE,GAAGC,OAAOoE,SAAW,SAAUN,EAAcC,GACzC,OAAO,IAAIhE,GAAGC,OAAOqE,SAASP,EAAcC,IAGhDhE,GAAGC,OAAOsE,kBAAoB,SAAUR,EAAcC,GAClD,OAAO,IAAIhE,GAAGC,OAAOuE,kBAAkBT,EAAcC,IAGzDhE,GAAGC,OAAOwE,YAAc,SAAUV,EAAcC,GAC5C,OAAO,IAAIhE,GAAGC,OAAOyE,YAAYX,EAAcC,IAGnDhE,GAAGC,OAAO0E,qBAAuB,SAAUZ,EAAcC,GACrD,OAAO,IAAIhE,GAAGC,OAAO2E,qBAAqBb,EAAcC,IAG5DhE,GAAGC,OAAO4E,OAAS,SAAUd,GACzB,OAAO,IAAI/D,GAAGC,OAAO6E,OAAOf,IAGhC/D,GAAGC,OAAO8E,QAAU,SAAUhB,EAAciB,EAAeC,GACvD,OAAO,IAAIjF,GAAGC,OAAOiF,UAAUnB,EAAciB,EAAeC,IAGhEjF,GAAGC,OAAiB,SAAI,SAAUkF,EAAc3C,GAC5C,OAAO,IAAIxC,GAAGC,OAAO2B,SAASuD,EAAc3C,IAGhDxC,GAAGC,OAAOmF,KAAO,SAAUrB,EAAcsB,EACrCC,EAAcC,EAAgBC,EAAgBvB,GAC9C,OAAO,IAAIjE,GAAGC,OAAOwF,OAAO1B,EAAcsB,EACtCC,EAAcC,EAAgBC,EAAgBvB,IAGtDjE,GAAGC,OAAOsB,YAAc,SAAUpB,EAASoC,GAEvCvC,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAMD,GAE5BC,KAAKmC,WAAaG,MAAM5B,UAAU6B,MAAMC,KAAKC,UAAW,IAE5D7C,GAAG0F,QAAQ1F,GAAGC,OAAOsB,YAAavB,GAAGC,OAAOC,QAE5CF,GAAGC,OAAO+C,IAAM,SAAUT,GACtB,IAAIC,GAAU,OAAOC,OAAOC,MAAM5B,UAAU6B,MAAMC,KAAKC,YACvD7C,GAAGC,OAAOsB,YAAYwB,MAAM3C,KAAMoC,IAEtCxC,GAAG0F,QAAQ1F,GAAGC,OAAO+C,IAAKhD,GAAGC,OAAOsB,aAEpCvB,GAAGC,OAAOiD,GAAK,SAAUX,GACrB,IAAIC,GAAU,MAAMC,OAAOC,MAAM5B,UAAU6B,MAAMC,KAAKC,YACtD7C,GAAGC,OAAOsB,YAAYwB,MAAM3C,KAAMoC,IAEtCxC,GAAG0F,QAAQ1F,GAAGC,OAAOiD,GAAIlD,GAAGC,OAAOsB,aAEnCvB,GAAGC,OAAOsB,YAAYT,UAAUU,MAAQ,WACpC,MAAO,2CAA2CP,QAC9CC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACVM,MAAOjB,KAAKyB,0BAA0BzB,KAAKmC,eAInDvC,GAAGC,OAAOoD,IAAM,SAAUD,GACtBhD,KAAKgD,UAAYA,EACjBpD,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAM,QAGhCJ,GAAG0F,QAAQ1F,GAAGC,OAAOoD,IAAKrD,GAAGC,OAAOC,QAEpCF,GAAGC,OAAOC,OAAOY,UAAUU,MAAM,WAC7B,MAAO,2CAA2CP,QAC9CC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACVM,MAAOjB,KAAKkB,qBAAqBlB,KAAKgD,cAK9CpD,GAAGC,OAAOwD,KAAO,SAAUkC,EAAcC,EAAQC,GAE7C7F,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAM,QAE5BA,KAAKuF,aAAeA,EAEpBvF,KAAKwF,OAASA,EAEdxF,KAAK0F,QAAUD,GAEnB7F,GAAG0F,QAAQ1F,GAAGC,OAAOwD,KAAMzD,GAAGC,OAAOC,QAErCF,GAAGC,OAAOyB,WAAa,SAAUvB,EAAS4D,GAEtC/D,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAMD,GAE5BC,KAAK2D,aAAeA,GAExB/D,GAAG0F,QAAQ1F,GAAGC,OAAOyB,WAAY1B,GAAGC,OAAOC,QAE3CF,GAAGC,OAAOyB,WAAWZ,UAAUU,MAAQ,WACnC,IAAIuE,EAAS,GAET3F,KAAK4E,eAAiB5E,KAAK6E,gBAC3Bc,EAAS,6MAA6M9E,QAClNC,OAAOd,KAAKG,iBACZyF,cAAe5F,KAAK4E,cACpBiB,cAAe7F,KAAK6E,iBAExB7E,KAAKiF,UACLU,EAAS,iDAAiD9E,QACtDC,OAAQd,KAAKG,iBACb2F,QAAS9F,KAAKiF,WAElBjF,KAAKoC,SAEDuD,EADAI,EAAEC,QAAQhG,KAAKoC,QACNpC,KAAKoC,OAAOT,OAAO,SAAUsE,EAAGC,EAAGC,GACxC,IAAIC,EAAM,SAAUC,GAChB,MAAO,+CAA+CxF,QAASC,OAAQd,KAAKG,iBAAkBmG,MAAOD,KAEzG,OAAQF,EAAI,EAAIF,EAAIG,EAAIH,IAAMG,EAAIF,KAG7B,+CAA+CrF,QAASC,OAAQd,KAAKG,iBAAkBmG,MAAOtG,KAAKoC,UAEpH,MAAO,0IAA0IvB,QAC7IC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACV4F,eAAwC,IAApBvG,KAAc,UAAoB,eAAkBA,KAAKuG,UAAY,IAAO,GAChGC,YAAsC,IAArBxG,KAAe,WAAoB,YAAeA,KAAKyG,WAAa,IAAO,GAC5FC,gBAA0C,IAArB1G,KAAe,WAAoB,gBAAmBA,KAAK0G,WAAa,IAAO,GACpGC,cAAsC,IAAnB3G,KAAa,SAAoB,cAAiBA,KAAK2G,SAAW,IAAO,GAC5FC,KAAM5G,KAAK2D,aACXgC,OAAQA,EACRkB,WAAY7G,KAAKK,eAIzBT,GAAGC,OAAOwB,iBAAmB,SACzBtB,EAAS4D,EAAcC,EAAYC,GAEnCjE,GAAGC,OAAOyB,WAAWkB,KAAKxC,KAAMD,EAAS4D,GAEzC3D,KAAK4D,WAAaA,EAElB5D,KAAKuG,UAAY1C,GAErBjE,GAAG0F,QAAQ1F,GAAGC,OAAOwB,iBAAkBzB,GAAGC,OAAOyB,YAEjD1B,GAAGC,OAAOwB,iBAAiBX,UAAUU,MAAQ,WAEzC,OADW,+BAAiCpB,KAAK2D,wBAAwB/D,GAAGC,OAAOC,OAAS,SAAW,yDAA2D,iEACtJe,QACRC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACV4F,eAAwC,IAApBvG,KAAc,UAAoB,eAAkBA,KAAKuG,UAAY,IAAO,GAIhGK,KAAM5G,KAAK2D,wBAAwB/D,GAAGC,OAAOC,OAASE,KAAK2D,aAAavC,QAAUpB,KAAK2D,aACvF2C,MAAOtG,KAAK4D,WACZiD,WAAY7G,KAAKK,eAGzBT,GAAGC,OAAOiE,QAAU,SAAUH,EAAcC,EAAYC,GACpDjE,GAAGC,OAAOwB,iBAAiBmB,KAAKxC,KAAM,oBAAqB2D,EAAcC,EAAYC,IAEzFjE,GAAG0F,QAAQ1F,GAAGC,OAAOiE,QAASlE,GAAGC,OAAOwB,kBAExCzB,GAAGC,OAAOyE,YAAc,SAAUX,EAAcC,GAC5ChE,GAAGC,OAAOwB,iBAAiBmB,KAAKxC,KAAM,wBAAyB2D,EAAcC,IAEjFhE,GAAG0F,QAAQ1F,GAAGC,OAAOyE,YAAa1E,GAAGC,OAAOwB,kBAE5CzB,GAAGC,OAAO2E,qBAAuB,SAAUb,EAAcC,GACrDhE,GAAGC,OAAOwB,iBAAiBmB,KAAKxC,KAAM,iCAAkC2D,EAAcC,IAE1FhE,GAAG0F,QAAQ1F,GAAGC,OAAO2E,qBAAsB5E,GAAGC,OAAOwB,kBAErDzB,GAAGC,OAAOqE,SAAW,SAAUP,EAAcC,GACzChE,GAAGC,OAAOwB,iBAAiBmB,KAAKxC,KAAM,qBAAsB2D,EAAcC,IAE9EhE,GAAG0F,QAAQ1F,GAAGC,OAAOqE,SAAUtE,GAAGC,OAAOwB,kBAEzCzB,GAAGC,OAAOuE,kBAAoB,SAAUT,EAAcC,GAClDhE,GAAGC,OAAOwB,iBAAiBmB,KAAKxC,KAAM,8BAA+B2D,EAAcC,IAEvFhE,GAAG0F,QAAQ1F,GAAGC,OAAOuE,kBAAmBxE,GAAGC,OAAOwB,kBAElDzB,GAAGC,OAAOmE,WAAa,SAAUL,EAAcC,EAAYC,GACvDjE,GAAGC,OAAOwB,iBAAiBmB,KAAKxC,KAAM,uBAAwB2D,EAAcC,EAAYC,IAE5FjE,GAAG0F,QAAQ1F,GAAGC,OAAOmE,WAAYpE,GAAGC,OAAOwB,kBAE3CzB,GAAGC,OAAOwF,OAAS,SAAU1B,EAAcsB,EACvCC,EAAcC,EAAgBC,EAAgBvB,GAC9CjE,GAAGC,OAAOyB,WAAWkB,KAAKxC,KAAM,iBAAkB2D,GAElD3D,KAAKiF,QAAUA,EAEfjF,KAAK2G,cAA6BG,IAAjB5B,EAA8BA,EAAe,IAE9DlF,KAAK0G,gBAAiCI,IAAnB3B,EAAgCA,EAAiB,IAEpEnF,KAAKyG,gBAAiCK,IAAnB1B,EAAgCA,EAAiB,IAEpEpF,KAAKuG,UAAY1C,GAErBjE,GAAG0F,QAAQ1F,GAAGC,OAAOwF,OAAQzF,GAAGC,OAAOyB,YAEvC1B,GAAGC,OAAO6E,OAAS,SAAUf,GACzB/D,GAAGC,OAAOyB,WAAWkB,KAAKxC,KAAM,iBAAkB2D,IAEtD/D,GAAG0F,QAAQ1F,GAAGC,OAAO6E,OAAQ9E,GAAGC,OAAOyB,YAEvC1B,GAAGC,OAAOiF,UAAY,SAAUnB,EAAciB,EAAeC,GACzDjF,GAAGC,OAAOyB,WAAWkB,KAAKxC,KAAM,oBAAqB2D,GACrD3D,KAAK4E,cAAgBA,EACrB5E,KAAK6E,cAAgBA,GAEzBjF,GAAG0F,QAAQ1F,GAAGC,OAAOiF,UAAWlF,GAAGC,OAAOyB,YAE1C1B,GAAGC,OAAO2B,SAAW,SAAUuD,EAAc3C,GACzCxC,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAM+E,GAC5B/E,KAAKoC,OAASA,GAElBxC,GAAG0F,QAAQ1F,GAAGC,OAAO2B,SAAU5B,GAAGC,OAAOC,QAEzCF,GAAGC,OAAO2B,SAASd,UAAUU,MAAQ,WACjC,IAAIuE,EAAS,GACb,GAAI3F,KAAKoC,OAAQ,CACb,IAAI2E,EAAgB,SAAUC,EAAOlG,GACjC,GAAuB,iBAAZ,EACP,MAAO,+CAA+CD,QAASC,OAAQA,EAAQwF,MAAOU,IAE1F,GAAuB,iBAAZ,EAAsB,CAC7B,IAAIC,EAAQ,GACZ,IAAK,IAAIC,KAAQF,EACbC,GAAgB,2CAA2CpG,QAASC,OAAQA,EAAQwF,MAAOU,EAAME,GAAOC,IAAKD,IAEjH,OAAOD,IAGf,GAAIlB,EAAEC,QAAQhG,KAAKoC,QAAS,CACxB,IAAItB,EAASd,KAAKG,iBAClBwF,EAAS3F,KAAKoC,OAAOT,OAAO,SAAUsE,EAAGC,EAAGC,GACxC,IAAIC,EAAM,SAAUY,GAChB,OAAOD,EAAcC,EAAOlG,IAEhC,OAAQqF,EAAI,EAAIF,EAAIG,EAAIH,IAAMG,EAAIF,UAItCP,EAASoB,EAAc/G,KAAKoC,OAAQpC,KAAKG,kBAEjD,MAAO,8DAA8DU,QACjEC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACVM,MAAO0E,KAIf/F,GAAGC,OAAO0B,QAAU,SAAUxB,EAASwF,EAAc6B,EAAU3B,GAC3D7F,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAMD,GAC5BC,KAAKuF,aAAeA,EACpBvF,KAAKoH,SAAWA,EAChBpH,KAAK0F,QAAUD,GAEnB7F,GAAG0F,QAAQ1F,GAAGC,OAAO0B,QAAS3B,GAAGC,OAAOC,QAExCF,GAAGC,OAAO0B,QAAQb,UAAUU,MAAQ,WAMhC,OAJIpB,KAAKuF,aACK,mGAEA,uEACC1E,QACXC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACViG,KAAM5G,KAAKuF,aACX6B,SAAWpH,KAAKoH,oBAAoBxH,GAAGC,OAAO2B,SAAWxB,KAAKkB,qBAAqBlB,KAAKoH,UAAYpH,KAAKoH,SAASC,KAAKC,WAAMR,EAAW9G,KAAK0F,SAC7ImB,WAAY7G,KAAKK,eAIzBT,GAAGC,OAAOwD,KAAO,SAAUkC,EAAcC,EAAQC,GAC7C7F,GAAGC,OAAOC,OAAO0C,KAAKxC,KAAM,QAC5BA,KAAKuF,aAAeA,EACpBvF,KAAKwF,OAASA,EACdxF,KAAK0F,QAAUD,GAEnB7F,GAAG0F,QAAQ1F,GAAGC,OAAOwD,KAAMzD,GAAGC,OAAOC,QAErCF,GAAGC,OAAOwD,KAAK3C,UAAUU,MAAQ,WAC7B,IAAI8B,EAAO,yIACbrC,QACG6E,aAAoC,IAAlB1F,KAAY,QAAoB,aAAgBA,KAAK0F,QAAU,IAAO,GACxF6B,YAAcvH,KAAKwF,OAAO,GAAK,IAAMxF,KAAKwF,OAAO,GACjDgC,YAAcxH,KAAKwF,OAAO,GAAK,IAAMxF,KAAKwF,OAAO,KAOlD,OAJIxF,KAAKuF,aACG,+FAEA,mEACG1E,QACXC,OAAQd,KAAKG,iBACba,IAAKhB,KAAKW,aACVkG,WAAa7G,KAAKK,YAClBuG,KAAM5G,KAAKuF,aACXkC,KAAMvE,KAIdtD,GAAGC,OAAO0D,WAAa,SAAUgC,EAAc6B,EAAU3B,GACrD7F,GAAGC,OAAO0B,QAAQiB,KAAKxC,KAAM,aAAcuF,EAAc6B,EAAU3B,IAEvE7F,GAAG0F,QAAQ1F,GAAGC,OAAO0D,WAAY3D,GAAGC,OAAO0B,SAE3C3B,GAAGC,OAAO4D,OAAS,SAAU8B,EAAc6B,EAAU3B,GACjD7F,GAAGC,OAAO0B,QAAQiB,KAAKxC,KAAM,SAAUuF,EAAc6B,EAAU3B,IAEnE7F,GAAG0F,QAAQ1F,GAAGC,OAAO4D,OAAQ7D,GAAGC,OAAO0B","sourcesContent":["TC.filter = {};\r\n\r\nTC.filter.Filter = function (tagName) {\r\n    this.tagName_ = tagName;\r\n    \r\n    this._defaultNSURL = \"http://www.opengis.net/ogc\";\r\n    this._defaultPrefixNS = this._wfsPrefixNS = \"ogc\";\r\n    this._fieldTitle = \"PropertyName\";\r\n\r\n    this._defaultNSURL = this._wfsNSURL = \"http://www.opengis.net/ogc\";\r\n    this._wfs2prefixNS = \"fes\";\r\n    this._wfs2NSURL = \"http://www.opengis.net/fes/2.0\";\r\n    this._wfs2FieldTitle = \"ValueReference\";\r\n};\r\n\r\nTC.filter.Filter.prototype.getTagName = function () {\r\n    return this.tagName_;\r\n};\r\n\r\nTC.filter.Filter.prototype.writeFilterCondition_ = function () {\r\n\r\n    //return '<{prefix}:{tag}>{childs}</{prefix}:{tag}>'.format({prefix:\"ogc\",tag:filter.getTagName(),childs:\"\"});\r\n    var filter = this;\r\n    return '<{prefix}:Filter xmlns:{prefix}=\\\"{NSURL}\">{inner}</{prefix}:Filter>'.format({\r\n        prefix: this._defaultPrefixNS,\r\n        NSURL: this._defaultNSURL,\r\n        tag: filter.getTagName(),\r\n        inner: this.writeInnerCondition_(filter)\r\n    });\r\n\r\n    /*ol.xml.pushSerializeAndPop(item,\r\n        ol.format.WFS.GETFEATURE_SERIALIZERS_,\r\n        ol.xml.makeSimpleNodeFactory(filter.getTagName()),\r\n        [filter], objectStack);*/\r\n}\r\nTC.filter.Filter.prototype.writeInnerCondition_ = function (filter) {\r\n    if (filter != this) {\r\n        filter._defaultNSURL = this._defaultNSURL;\r\n        filter._defaultPrefixNS = this._defaultPrefixNS\r\n    }\r\n\r\n    if (filter instanceof TC.filter.LogicalNary) {\r\n        return filter.write()\r\n    }\r\n    else if (filter instanceof TC.filter.ComparisonBinary) {\r\n        return filter.write();\r\n    }\r\n    else if (filter instanceof TC.filter.Comparison) {\r\n        return filter.write();\r\n    }\r\n    else if (filter instanceof TC.filter.Spatial) {\r\n        return filter.write();\r\n    }\r\n    else if (filter instanceof TC.filter.Function) {\r\n        return filter.write();\r\n    }\r\n    else\r\n        return filter.write();\r\n};\r\nTC.filter.Filter.prototype.writeInnerArrayCondition_ = function (filters) {\r\n    return filters.reduce(function (vi, va, index) {\r\n        return (vi instanceof TC.filter.Filter ? vi.writeInnerCondition_(vi) : vi) + va.writeInnerCondition_(va);\r\n    });\r\n}\r\n\r\nTC.filter.Filter.prototype.getText = function (wfsVersion) {\r\n    if (wfsVersion && parseFloat(wfsVersion,10) >= 2) {\r\n        this._defaultPrefixNS = this._wfs2prefixNS;\r\n        this._defaultNSURL = this._wfs2NSURL;\r\n        this._fieldTitle = this._wfs2FieldTitle;\r\n    }\r\n    return this.writeFilterCondition_();\r\n};\r\n\r\nTC.filter.and = function (conditions) {\r\n    var params = [null].concat(Array.prototype.slice.call(arguments));\r\n    return new (Function.prototype.bind.apply(TC.filter.And, params));\r\n};\r\n\r\nTC.filter.or = function (conditions) {\r\n    var params = [null].concat(Array.prototype.slice.call(arguments));\r\n    return new (Function.prototype.bind.apply(TC.filter.Or, params));\r\n};\r\n\r\nTC.filter.not = function (condition) {\r\n    return new TC.filter.Not(condition);\r\n};\r\n\r\nTC.filter.bbox = function () {\r\n    if (Object.prototype.toString.call(arguments[0]) !== \"[object String]\")\r\n        return new TC.filter.Bbox(null, arguments[0], arguments[1]);\r\n    else        \r\n        return new TC.filter.Bbox(arguments[0], arguments[1], arguments[2]);\r\n};\r\n\r\nTC.filter.intersects = function () {\r\n    if (Object.prototype.toString.call(arguments[0]) !== \"[object String]\")\r\n        return new TC.filter.Intersects(null, arguments[0], arguments[1]);\r\n    else\r\n        return new TC.filter.Intersects(arguments[0], arguments[1], arguments[2]);\r\n};\r\n\r\n\r\nTC.filter.within = function () {\r\n    if (Object.prototype.toString.call(arguments[0]) !== \"[object String]\")\r\n        return new TC.filter.Within(null, arguments[0], arguments[1]);\r\n    else\r\n        return new TC.filter.Within(arguments[0], arguments[1], arguments[2]);\r\n};\r\n\r\n\r\nTC.filter.equalTo = function (propertyName, expression, opt_matchCase) {\r\n    return new TC.filter.EqualTo(propertyName, expression, opt_matchCase);\r\n};\r\n\r\nTC.filter.notEqualTo = function (propertyName, expression, opt_matchCase) {\r\n    return new TC.filter.NotEqualTo(propertyName, expression, opt_matchCase);\r\n};\r\n\r\nTC.filter.lessThan = function (propertyName, expression) {\r\n    return new TC.filter.LessThan(propertyName, expression);\r\n};\r\n\r\nTC.filter.lessThanOrEqualTo = function (propertyName, expression) {\r\n    return new TC.filter.LessThanOrEqualTo(propertyName, expression);\r\n};\r\n\r\nTC.filter.greaterThan = function (propertyName, expression) {\r\n    return new TC.filter.GreaterThan(propertyName, expression);\r\n};\r\n\r\nTC.filter.greaterThanOrEqualTo = function (propertyName, expression) {\r\n    return new TC.filter.GreaterThanOrEqualTo(propertyName, expression);\r\n};\r\n\r\nTC.filter.isNull = function (propertyName) {\r\n    return new TC.filter.IsNull(propertyName);\r\n};\r\n\r\nTC.filter.between = function (propertyName, lowerBoundary, upperBoundary) {\r\n    return new TC.filter.IsBetween(propertyName, lowerBoundary, upperBoundary);\r\n};\r\n\r\nTC.filter[\"function\"] = function (functionName, params) {\r\n    return new TC.filter.Function(functionName, params);\r\n};\r\n\r\nTC.filter.like = function (propertyName, pattern,\r\n    opt_wildCard, opt_singleChar, opt_escapeChar, opt_matchCase) {\r\n    return new TC.filter.IsLike(propertyName, pattern,\r\n        opt_wildCard, opt_singleChar, opt_escapeChar, opt_matchCase);\r\n};\r\n\r\nTC.filter.LogicalNary = function (tagName, conditions) {\r\n\r\n    TC.filter.Filter.call(this, tagName);\r\n\r\n    this.conditions = Array.prototype.slice.call(arguments, 1);\r\n};\r\nTC.inherit(TC.filter.LogicalNary, TC.filter.Filter);\r\n\r\nTC.filter.And = function (conditions) {\r\n    var params = ['And'].concat(Array.prototype.slice.call(arguments));\r\n    TC.filter.LogicalNary.apply(this, params);\r\n};\r\nTC.inherit(TC.filter.And, TC.filter.LogicalNary);\r\n\r\nTC.filter.Or = function (conditions) {\r\n    var params = ['Or'].concat(Array.prototype.slice.call(arguments));\r\n    TC.filter.LogicalNary.apply(this, params);\r\n};\r\nTC.inherit(TC.filter.Or, TC.filter.LogicalNary);\r\n\r\nTC.filter.LogicalNary.prototype.write = function () {\r\n    return '<{prefix}:{tag}>{inner}</{prefix}:{tag}>'.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        inner: this.writeInnerArrayCondition_(this.conditions)\r\n    });\r\n}\r\n\r\nTC.filter.Not = function (condition) {\r\n    this.condition = condition;\r\n    TC.filter.Filter.call(this, 'Not');\r\n    \r\n};\r\nTC.inherit(TC.filter.Not, TC.filter.Filter);\r\n\r\nTC.filter.Filter.prototype.write=function () {\r\n    return '<{prefix}:{tag}>{inner}</{prefix}:{tag}>'.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        inner: this.writeInnerCondition_(this.condition)\r\n    });\r\n}\r\n\r\n\r\nTC.filter.Bbox = function (geometryName, extent, opt_srsName) {\r\n\r\n    TC.filter.Filter.call(this, 'BBOX');\r\n\r\n    this.geometryName = geometryName;\r\n\r\n    this.extent = extent;\r\n\r\n    this.srsName = opt_srsName;\r\n};\r\nTC.inherit(TC.filter.Bbox, TC.filter.Filter);\r\n\r\nTC.filter.Comparison = function (tagName, propertyName) {\r\n\r\n    TC.filter.Filter.call(this, tagName);\r\n\r\n    this.propertyName = propertyName;\r\n};\r\nTC.inherit(TC.filter.Comparison, TC.filter.Filter);\r\n\r\nTC.filter.Comparison.prototype.write = function () {\r\n    var values = '';\r\n    //isbetween\r\n    if (this.lowerBoundary && this.upperBoundary)\r\n        values = '<{prefix}:LowerBoundary><{prefix}:Literal>{LowerBoundary}</{prefix}:Literal></{prefix}:LowerBoundary><{prefix}:UpperBoundary><{prefix}:Literal>{UpperBoundary}</{prefix}:Literal></{prefix}:UpperBoundary>'.format({\r\n            prefix:this._defaultPrefixNS,\r\n            LowerBoundary: this.lowerBoundary,\r\n            UpperBoundary: this.upperBoundary\r\n        });\r\n    if (this.pattern)\r\n        values = '<{prefix}:Literal>{Pattern}</{prefix}:Literal>'.format({\r\n            prefix: this._defaultPrefixNS,\r\n            Pattern: this.pattern\r\n        });\r\n    if (this.params)\r\n        if ($.isArray(this.params))\r\n            values = this.params.reduce(function (a, b, i) {\r\n                var fmt = function (text) {\r\n                    return '<{prefix}:Literal>{value}</{prefix}:Literal>'.format({ prefix: this._defaultPrefixNS, value: text });\r\n                }\r\n                return (i > 0 ? a : fmt(a)) + fmt(b);\r\n            });\r\n        else\r\n            values = '<{prefix}:Literal>{value}</{prefix}:Literal>'.format({ prefix: this._defaultPrefixNS, value: this.params });\r\n\r\n    return '<{prefix}:{tag}{matchCase}{escape}{singleChar}{wildCard}><{prefix}:{fieldTitle}>{name}</{prefix}:{fieldTitle}>{values}</{prefix}:{tag}>'.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        matchCase: (typeof (this.matchCase) !== \"undefined\" ? \" matchCase=\\\"\" + this.matchCase + \"\\\"\" : \"\"),\r\n        escape: (typeof (this.escapeChar) !== \"undefined\" ? \" escape=\\\"\" + this.escapeChar + \"\\\"\" : \"\"),\r\n        singleChar: (typeof (this.singleChar) !== \"undefined\" ? \" singleChar=\\\"\" + this.singleChar + \"\\\"\" : \"\"),\r\n        wildCard: (typeof (this.wildCard) !== \"undefined\" ? \" wildCard=\\\"\" + this.wildCard + \"\\\"\" : \"\"),\r\n        name: this.propertyName,\r\n        values: values,\r\n        fieldTitle: this._fieldTitle\r\n    });\r\n}\r\n\r\nTC.filter.ComparisonBinary = function (\r\n    tagName, propertyName, expression, opt_matchCase) {\r\n\r\n    TC.filter.Comparison.call(this, tagName, propertyName);\r\n\r\n    this.expression = expression;\r\n\r\n    this.matchCase = opt_matchCase;\r\n};\r\nTC.inherit(TC.filter.ComparisonBinary, TC.filter.Comparison);\r\n\r\nTC.filter.ComparisonBinary.prototype.write = function () {\r\n    var _str = '<{prefix}:{tag}{matchCase}>' + (this.propertyName instanceof TC.filter.Filter ? '{name}' : '<{prefix}:{fieldTitle}>{name}</{prefix}:{fieldTitle}>') + '<{prefix}:Literal>{value}</{prefix}:Literal></{prefix}:{tag}>';\r\n    return _str.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        matchCase: (typeof (this.matchCase) !== \"undefined\" ? \" matchCase=\\\"\" + this.matchCase + \"\\\"\" : \"\"),\r\n        //escape:(typeof(this.escapeChar)!==\"undefined\"? \" escape=\\\"\" + this.escapeChar+ \"\\\"\":\"\"),\r\n        //singleChar:(typeof(this.singleChar)!==\"undefined\"? \" singleChar=\\\"\" + this.singleChar+ \"\\\"\":\"\"),\r\n        //wildCard:(typeof(this.wildCard)!==\"undefined\"? \" wildCard=\\\"\" + this.wildCard+ \"\\\"\":\"\"),\r\n        name: this.propertyName instanceof TC.filter.Filter ? this.propertyName.write() : this.propertyName,\r\n        value: this.expression,\r\n        fieldTitle: this._fieldTitle\r\n    });\r\n}\r\nTC.filter.EqualTo = function (propertyName, expression, opt_matchCase) {\r\n    TC.filter.ComparisonBinary.call(this, 'PropertyIsEqualTo', propertyName, expression, opt_matchCase);\r\n};\r\nTC.inherit(TC.filter.EqualTo, TC.filter.ComparisonBinary);\r\n\r\nTC.filter.GreaterThan = function (propertyName, expression) {\r\n    TC.filter.ComparisonBinary.call(this, 'PropertyIsGreaterThan', propertyName, expression);\r\n};\r\nTC.inherit(TC.filter.GreaterThan, TC.filter.ComparisonBinary);\r\n\r\nTC.filter.GreaterThanOrEqualTo = function (propertyName, expression) {\r\n    TC.filter.ComparisonBinary.call(this, 'PropertyIsGreaterThanOrEqualTo', propertyName, expression);\r\n};\r\nTC.inherit(TC.filter.GreaterThanOrEqualTo, TC.filter.ComparisonBinary);\r\n\r\nTC.filter.LessThan = function (propertyName, expression) {\r\n    TC.filter.ComparisonBinary.call(this, 'PropertyIsLessThan', propertyName, expression);\r\n};\r\nTC.inherit(TC.filter.LessThan, TC.filter.ComparisonBinary);\r\n\r\nTC.filter.LessThanOrEqualTo = function (propertyName, expression) {\r\n    TC.filter.ComparisonBinary.call(this, 'PropertyIsLessThanOrEqualTo', propertyName, expression);\r\n};\r\nTC.inherit(TC.filter.LessThanOrEqualTo, TC.filter.ComparisonBinary);\r\n\r\nTC.filter.NotEqualTo = function (propertyName, expression, opt_matchCase) {\r\n    TC.filter.ComparisonBinary.call(this, 'PropertyIsNotEqualTo', propertyName, expression, opt_matchCase);\r\n};\r\nTC.inherit(TC.filter.NotEqualTo, TC.filter.ComparisonBinary);\r\n\r\nTC.filter.IsLike = function (propertyName, pattern,\r\n    opt_wildCard, opt_singleChar, opt_escapeChar, opt_matchCase) {\r\n    TC.filter.Comparison.call(this, 'PropertyIsLike', propertyName);\r\n\r\n    this.pattern = pattern;\r\n\r\n    this.wildCard = (opt_wildCard !== undefined) ? opt_wildCard : '*';\r\n\r\n    this.singleChar = (opt_singleChar !== undefined) ? opt_singleChar : '.';\r\n\r\n    this.escapeChar = (opt_escapeChar !== undefined) ? opt_escapeChar : '!';\r\n\r\n    this.matchCase = opt_matchCase;\r\n};\r\nTC.inherit(TC.filter.IsLike, TC.filter.Comparison);\r\n\r\nTC.filter.IsNull = function (propertyName) {\r\n    TC.filter.Comparison.call(this, 'PropertyIsNull', propertyName);\r\n};\r\nTC.inherit(TC.filter.IsNull, TC.filter.Comparison);\r\n\r\nTC.filter.IsBetween = function (propertyName, lowerBoundary, upperBoundary) {\r\n    TC.filter.Comparison.call(this, 'PropertyIsBetween', propertyName);\r\n    this.lowerBoundary = lowerBoundary;\r\n    this.upperBoundary = upperBoundary;\r\n};\r\nTC.inherit(TC.filter.IsBetween, TC.filter.Comparison);\r\n\r\nTC.filter.Function = function (functionName, params) {\r\n    TC.filter.Filter.call(this, functionName);\r\n    this.params = params\r\n};\r\nTC.inherit(TC.filter.Function, TC.filter.Filter);\r\n\r\nTC.filter.Function.prototype.write = function () {\r\n    var values = '';\r\n    if (this.params) {\r\n        var _paramsToText = function (param, prefix) {\r\n            if (typeof (param) === \"string\") {\r\n                return '<{prefix}:Literal>{value}</{prefix}:Literal>'.format({ prefix: prefix, value: param });\r\n            }\r\n            if (typeof (param) === \"object\") {\r\n                var _text = '';\r\n                for (var attr in param) {\r\n                    _text = _text + '<{prefix}:{key}>{value}</{prefix}:{key}>'.format({ prefix: prefix, value: param[attr], key: attr })\r\n                }\r\n                return _text;\r\n            }\r\n        }\r\n        if ($.isArray(this.params)) {\r\n            var prefix = this._defaultPrefixNS;\r\n            values = this.params.reduce(function (a, b, i) {\r\n                var fmt = function (param) {\r\n                    return _paramsToText(param, prefix);\r\n                }\r\n                return (i > 1 ? a : fmt(a)) + fmt(b);\r\n            });\r\n        }\r\n        else\r\n            values = _paramsToText(this.params, this._defaultPrefixNS);\r\n    }\r\n    return '<{prefix}:Function name=\"{tag}\">{inner}</{prefix}:Function>'.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        inner: values\r\n    });\r\n};\r\n\r\nTC.filter.Spatial = function (tagName, geometryName, geometry, opt_srsName) {\r\n    TC.filter.Filter.call(this, tagName);\r\n    this.geometryName = geometryName;\r\n    this.geometry = geometry;\r\n    this.srsName = opt_srsName;\r\n};\r\nTC.inherit(TC.filter.Spatial, TC.filter.Filter);\r\n\r\nTC.filter.Spatial.prototype.write = function () {\r\n    var pattern = null;\r\n    if (this.geometryName)\r\n        pattern = '<{prefix}:{tag}><{prefix}:{fieldTitle}>{name}</{prefix}:{fieldTitle}>{geometry}</{prefix}:{tag}>';\r\n    else\r\n        pattern = '<{prefix}:{tag}><{prefix}:{fieldTitle}/>{geometry}</{prefix}:{tag}>';\r\n    return pattern.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        name: this.geometryName,\r\n        geometry: (this.geometry instanceof TC.filter.Function ? this.writeInnerCondition_(this.geometry) : this.geometry.wrap.toGML(undefined, this.srsName)),\r\n        fieldTitle: this._fieldTitle\r\n    });\r\n};\r\n\r\nTC.filter.Bbox = function (geometryName, extent, opt_srsName) {\r\n    TC.filter.Filter.call(this, 'BBOX');\r\n    this.geometryName = geometryName;\r\n    this.extent = extent;\r\n    this.srsName = opt_srsName;\r\n};\r\nTC.inherit(TC.filter.Bbox, TC.filter.Filter);\r\n\r\nTC.filter.Bbox.prototype.write = function () {\r\n    var bbox = '<gml:Envelope{srsName}><gml:lowerCorner>{lowerCorner}</gml:lowerCorner><gml:upperCorner>{upperCorner}</gml:upperCorner></gml:Envelope>'\r\n\t.format({\r\n\t    srsName: (typeof (this.srsName) !== \"undefined\" ? \" srsName=\\\"\" + this.srsName + \"\\\"\" : \"\"),\r\n\t    lowerCorner: (this.extent[0] + ' ' + this.extent[1]),\r\n\t    upperCorner: (this.extent[2] + ' ' + this.extent[3])\r\n\t});\r\n    var pattern = null;\r\n    if (this.geometryName)\r\n        pattern='<{prefix}:{tag}><{prefix}:{fieldTitle}>{name}</{prefix}:{fieldTitle}>{BBOX}</{prefix}:{tag}>';\r\n    else\r\n        pattern='<{prefix}:{tag}><{prefix}:{fieldTitle}/>{BBOX}</{prefix}:{tag}>';\r\n    return pattern.format({\r\n        prefix: this._defaultPrefixNS,\r\n        tag: this.getTagName(),\r\n        fieldTitle:  this._fieldTitle,\r\n        name: this.geometryName,\r\n        BBOX: bbox\r\n    });\r\n};\r\n\r\nTC.filter.Intersects = function (geometryName, geometry, opt_srsName) {\r\n    TC.filter.Spatial.call(this, 'Intersects', geometryName, geometry, opt_srsName);\r\n};\r\nTC.inherit(TC.filter.Intersects, TC.filter.Spatial);\r\n\r\nTC.filter.Within = function (geometryName, geometry, opt_srsName) {\r\n    TC.filter.Spatial.call(this, 'Within', geometryName, geometry, opt_srsName);\r\n};\r\nTC.inherit(TC.filter.Within, TC.filter.Spatial);"],"file":"../Filter.min.js"}