{"version":3,"sources":["feature/MultiPolygon.js"],"names":["TC","feature","Feature","syncLoadJS","apiLocation","MultiPolygon","coords","options","self","this","apply","arguments","wrap","isNative","Util","extend","Cfg","styles","polygon","createMultiPolygon","inherit","prototype","STYLETYPE","Consts","geom","POLYGON","CLASSNAME","getCoords","call","pointArray","concat","setCoords","Array","isArray","Error","forEach","ring","startPoint","endPoint","length","getLength"],"mappings":"AAAAA,GAAGC,QAAUD,GAAGC,SAAW,GAEtBD,GAAGE,SACJF,GAAGG,WAAWH,GAAGI,YAAc,cAOnCJ,GAAGC,QAAQI,aAAe,SAAUC,EAAQC,GACxC,MAAMC,EAAOC,KAEbT,GAAGE,QAAQQ,MAAMF,EAAMG,WAEvB,IAAKH,EAAKI,KAAKC,SAASP,GAAS,CAC7BC,EAAUC,EAAKD,QAAUP,GAAGc,KAAKC,QAAO,EAAMP,EAAKD,QAASP,GAAGgB,IAAIC,OAAOC,QAASX,GACnFC,EAAKI,KAAKO,mBAAmBb,EAAQC,KAI7CP,GAAGoB,QAAQpB,GAAGC,QAAQI,aAAcL,GAAGE,SAEvCF,GAAGC,QAAQI,aAAagB,UAAUC,UAAYtB,GAAGuB,OAAOC,KAAKC,QAE7DzB,GAAGC,QAAQI,aAAagB,UAAUK,UAAY,0BAE9C1B,GAAGC,QAAQI,aAAagB,UAAUM,UAAY,SAAUpB,GACpDA,EAAUA,GAAW,GACrB,MAAMD,EAASN,GAAGE,QAAQmB,UAAUM,UAAUC,KAAKnB,KAAMF,GACzD,OAAIA,EAAQsB,WACD,GAAGC,OAAOpB,MAAM,GAAI,GAAGoB,OAAOpB,MAAM,GAAIJ,IAE5CA,GAGXN,GAAGC,QAAQI,aAAagB,UAAUU,UAAY,SAAUzB,GAEpD,IAAI0B,MAAMC,QAAQ3B,KAAW0B,MAAMC,QAAQ3B,EAAO,IAS9C,MAAM,IAAI4B,MAAM,0CARXF,MAAMC,QAAQ3B,EAAO,GAAG,IAGnB0B,MAAMC,QAAQ3B,EAAO,GAAG,GAAG,MACjCA,EAAS,CAACA,IAHVA,EAAS,CAAC,CAACA,IASnBA,EAAO6B,QAAQ,SAAUjB,GACrBA,EAAQiB,QAAQ,SAAUC,GACtB,MAAMC,EAAaD,EAAK,GAClBE,EAAWF,EAAKA,EAAKG,OAAS,GAChCF,EAAW,KAAOC,EAAS,IAAMD,EAAW,KAAOC,EAAS,KAC5DF,EAAKA,EAAKG,QAAUF,OAIhC,OAAOrC,GAAGE,QAAQmB,UAAUU,UAAUH,KArBzBnB,KAqBoCH,IAGrDN,GAAGC,QAAQI,aAAagB,UAAUmB,UAAY,SAAUjC,GACpD,OAAOE,KAAKG,KAAK4B,UAAUjC","sourcesContent":["TC.feature = TC.feature || {};\r\n\r\nif (!TC.Feature) {\r\n    TC.syncLoadJS(TC.apiLocation + 'TC/Feature');\r\n}\r\n\r\n/*\r\n * MultiPolygon\r\n * Parameters: coords, array of array of array of 2 element arrays of numbers; options, object\r\n */\r\nTC.feature.MultiPolygon = function (coords, options) {\r\n    const self = this;\r\n\r\n    TC.Feature.apply(self, arguments);\r\n\r\n    if (!self.wrap.isNative(coords)) {\r\n        options = self.options = TC.Util.extend(true, self.options, TC.Cfg.styles.polygon, options);\r\n        self.wrap.createMultiPolygon(coords, options);\r\n    }\r\n};\r\n\r\nTC.inherit(TC.feature.MultiPolygon, TC.Feature);\r\n\r\nTC.feature.MultiPolygon.prototype.STYLETYPE = TC.Consts.geom.POLYGON;\r\n\r\nTC.feature.MultiPolygon.prototype.CLASSNAME = 'TC.feature.MultiPolygon';\r\n\r\nTC.feature.MultiPolygon.prototype.getCoords = function (options) {\r\n    options = options || {};\r\n    const coords = TC.Feature.prototype.getCoords.call(this, options);\r\n    if (options.pointArray) {\r\n        return [].concat.apply([], [].concat.apply([], coords));\r\n    }\r\n    return coords;\r\n};\r\n\r\nTC.feature.MultiPolygon.prototype.setCoords = function (coords) {\r\n    const self = this;\r\n    if (Array.isArray(coords) && Array.isArray(coords[0])) {\r\n        if (!Array.isArray(coords[0][0])) {\r\n            coords = [[coords]];\r\n        }\r\n        else if (!Array.isArray(coords[0][0][0])) {\r\n            coords = [coords];\r\n        }\r\n    }\r\n    else {\r\n        throw new Error('Coordinates not valid for multipolygon');\r\n    }\r\n    coords.forEach(function (polygon) {\r\n        polygon.forEach(function (ring) {\r\n            const startPoint = ring[0];\r\n            const endPoint = ring[ring.length - 1];\r\n            if (startPoint[0] !== endPoint[0] || startPoint[1] !== endPoint[1]) {\r\n                ring[ring.length] = startPoint;\r\n            }\r\n        });\r\n    });\r\n    return TC.Feature.prototype.setCoords.call(self, coords);\r\n};\r\n\r\nTC.feature.MultiPolygon.prototype.getLength = function (options) {\r\n    return this.wrap.getLength(options);\r\n};"]}