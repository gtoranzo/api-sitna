TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.Consts.event.RESULTTOOLTIP="resulttooltip.tc";TC.Consts.event.RESULTTOOLTIPEND="resulttooltipend.tc";TC.Consts.event.DRAWCHART="drawchart.tc";TC.Consts.event.DRAWTABLE="drawtable.tc";TC.Consts.event.RESULTSPANELMIN="resultspanelmin.tc";TC.Consts.event.RESULTSPANELMAX="resultspanelmax.tc";TC.Consts.event.RESULTSPANELCLOSE="resultspanelclose.tc";TC.control.ResultsPanel=function(){TC.Control.apply(this,arguments);this.wrap=new TC.wrap.control.ResultsPanel(this);this.data={};this.classes={FA:"fa",SHOW_IN:"showIn",SHOW_OUT:"showOut"};this.contentType={TABLE:{fnOpen:TC.control.ResultsPanel.prototype.openTable,collapsedClass:".fa-list-alt"},CHART:{fnOpen:TC.control.ResultsPanel.prototype.openChart,collapsedClass:".fa-area-chart"}};this.content=this.contentType.TABLE;TC.Util.isEmptyObject(this.options)&&(this.options={content:"table"});this.options;this.options.content&&(this.content=this.contentType[this.options.content.toUpperCase()]);this.options.chart&&(this.chart=this.options.chart);this.options.table&&(this.table=this.options.table);this.options.save&&(this.save=this.options.save)};TC.inherit(TC.control.ResultsPanel,TC.Control);!function(){const ctlProto=TC.control.ResultsPanel.prototype;ctlProto.CLASS="tc-ctl-p-results";ctlProto.template={};ctlProto.CHART_SIZE={MIN_HEIGHT:75,MAX_HEIGHT:128,MIN_WIDTH:215,MEDIUM_WIDTH:310,MAX_WIDTH:445};if(TC.isDebug){ctlProto.template[ctlProto.CLASS]=TC.apiLocation+"TC/templates/ResultsPanel.html";ctlProto.template[ctlProto.CLASS+"-table"]=TC.apiLocation+"TC/templates/ResultsPanelTable.html";ctlProto.template[ctlProto.CLASS+"-chart"]=TC.apiLocation+"TC/templates/ResultsPanelChart.html"}else{ctlProto.template[ctlProto.CLASS]=function(){dust.register(ctlProto.CLASS,t);function t(t,e){return t.w('<div class="prpanel-group prsidebar-body " style="display: none" data-no-cb><div class="prpanel prpanel-default"><div class="prpanel-heading"><h4 class="prpanel-title"><span class="prpanel-title-text"></span><span class="prcollapsed-pull-right prcollapsed-slide-submenu prcollapsed-slide-submenu-close" title="').h("i18n",e,{},{$key:"close"}).w('"><i class="fa fa-times"></i></span><span class="prcollapsed-pull-right prcollapsed-slide-submenu prcollapsed-slide-submenu-min" title="').h("i18n",e,{},{$key:"hide"}).w('"><i class="fa fa-chevron-left"></i></span><span class="prcollapsed-pull-right prcollapsed-slide-submenu prcollapsed-slide-submenu-csv" hidden title="').h("i18n",e,{},{$key:"export.excel"}).w('"><i class="fa fa-file-excel-o"></i></span></h4></div><div id="results" class="prpanel-collapse collapse in"><div class="tc-ctl-p-results-menu"></div><div class="prpanel-body list-group tc-ctl-p-results-info"></div><div class="prpanel-body list-group tc-ctl-p-results-table"></div><div class="prpanel-body list-group tc-ctl-p-results-chart"></div></div></div></div><div class="prcollapsed prcollapsed-max prcollapsed-pull-left" style="display: none;" title="').h("i18n",e,{},{$key:"expand"}).w('" data-no-cb><i class="fa-list-alt" hidden></i><i class="fa-area-chart" hidden></i></div>')}t.__dustBody=!0;return t};ctlProto.template[ctlProto.CLASS+"-table"]=function(){dust.register(ctlProto.CLASS+"-table",t);function t(t,i){return t.w('<table class="table" style="display:none;"><thead>').s(i.get(["columns"],!1),i,{block:e},{}).w("</thead><tbody>").s(i.get(["results"],!1),i,{block:n},{}).w("</tbody></table>")}t.__dustBody=!0;function e(t,e){return t.w("<th>").f(e.getPath(!0,[]),e,"h").w("</th>")}e.__dustBody=!0;function n(t,e){return t.w("<tr>").h("iterate",e,{block:i},{on:e.getPath(!0,[])}).w("</tr>")}n.__dustBody=!0;function i(t,e){return t.w("<td>").f(e.get(["value"],!1),e,"h").w("</td>")}i.__dustBody=!0;return t};ctlProto.template[ctlProto.CLASS+"-chart"]=function(){dust.register(ctlProto.CLASS+"-chart",t);function t(t,i){return t.w('<div class="tc-track-chart">').x(i.get(["msg"],!1),i,{else:e,block:n},{}).w("</div>")}t.__dustBody=!0;function e(t,e){return t.w('<span id="elevationGain" >').h("i18n",e,{},{$key:"geo.trk.chart.elevationGain"}).w(": +").f(e.get(["upHill"],!1),e,"h").w("m, -").f(e.get(["downHill"],!1),e,"h").w('m</span><div class="tc-chart"></div>')}e.__dustBody=!0;function n(t,e){return t.f(e.get(["msg"],!1),e,"h")}n.__dustBody=!0;return t}}const isElementVisible=function(t){const e=getComputedStyle(t);return t&&!t.hidden&&"none"!==e.display&&"hidden"!==e.visibility};ctlProto.isVisible=function(){const t=this.div.querySelector(".prsidebar-body"),e=this.div.querySelector(".prcollapsed-max");return isElementVisible(t)||isElementVisible(e)};ctlProto.isMinimized=function(){const t=this.div.querySelector(".prsidebar-body"),e=this.div.querySelector(".prcollapsed-max");return isElementVisible(e)&&!isElementVisible(t)};const manageClassList=function(t,e,n){const i=this.div.querySelector("."+t);if(i){i.classList.add(e);i.classList.remove(n)}};ctlProto.show=function(t){const e=this.div.querySelector("."+t);e&&"none"===e.style.display&&(e.style.display="");manageClassList.call(this,t,this.classes.SHOW_IN,this.classes.SHOW_OUT)};ctlProto.hide=function(t){manageClassList.call(this,t,this.classes.SHOW_OUT,this.classes.SHOW_IN);const e=this.div.querySelector("."+t);e&&(e.style.display="none")};ctlProto.doVisible=function(){this.div.classList.remove(TC.Consts.classes.HIDDEN);this.show("prsidebar-body")};ctlProto.render=function(t){const e=this;e.div.classList.add(TC.Consts.classes.HIDDEN);return TC.Control.prototype.render.call(e,function(){e.mainTitleElm=e.div.querySelector(".prpanel-title-text");e.minimizeButton=e.div.querySelector(".prcollapsed-slide-submenu-min");e.minimizeButton.addEventListener("click",function(){e.minimize()});e.closeButton=e.div.querySelector(".prcollapsed-slide-submenu-close");e.closeButton.addEventListener("click",function(){e.close()});e.maximizeButton=e.div.querySelector(".prcollapsed-max");e.maximizeButton.addEventListener("click",function(){e.maximize()});if(e.save){e.saveButton=e.div.querySelector(".prcollapsed-slide-submenu-csv");e.saveButton.addEventListener("click",function(){e.exportToExcel()});e.saveButton.removeAttribute("hidden")}if(e.content){e.content=e.content;if(e.options.titles){if(e.options.titles.main){e.mainTitleElm.setAttribute("title",e.options.titles.main);e.mainTitleElm.innerHTML=e.options.titles.main}e.options.titles.max&&e.maximizeButton.setAttribute("title",e.options.titles.max)}else{e.mainTitleElm.setAttribute("title",e.getLocaleString("rsp.title"));e.mainTitleElm.innerHTML=e.getLocaleString("rsp.title")}}e.div.querySelector(e.content.collapsedClass).classList.add(e.classes.FA);e.infoDiv=e.div.querySelector("."+e.CLASS+"-info");e.tableDiv=e.div.querySelector("."+e.CLASS+"-table");e.menuDiv=e.div.querySelector("."+e.CLASS+"-menu");TC.browserFeatures.touch()&&TC.Util.swipe(e.div,{left:function(){e.minimize()}});t&&"function"==typeof t&&t.call()})};ctlProto.minimize=function(){const t=this,e=t.div.querySelector(t.content.collapsedClass);if(!isElementVisible(e)){e.classList.add(t.classes.FA);e.hidden=!1;t.hide("prsidebar-body");t.show("prcollapsed-max");t.map.trigger(TC.Consts.event.RESULTSPANELMIN,{control:t})}};ctlProto.maximize=function(){const t=this,e=t.div.querySelector(t.content.collapsedClass);if(isElementVisible(e)){e.hidden=!0;t.show("prsidebar-body");t.hide("prcollapsed-max");t.map.trigger(TC.Consts.event.RESULTSPANELMAX,{control:t})}};ctlProto.close=function(){const t=this;t.div.classList.add(TC.Consts.classes.HIDDEN);t.chart&&t.chart.chart&&(t.chart.chart=t.chart.chart.destroy());const e=t.div.querySelector(".prsidebar-body");if(e){e.style.display="none";t.div.querySelector(".prcollapsed-max").style.display="none";const n=t.div.querySelector(t.content.collapsedClass);n.hidden=!0;n.classList.remove(t.classes.FA);t.map.trigger(TC.Consts.event.RESULTSPANELCLOSE,{control:t})}};ctlProto.openChart=function(t){const e=this;e.div.classList.remove(TC.Consts.classes.HIDDEN);e.map.getControlsByClass(TC.control.ResultsPanel).filter(function(t){return t!==e}).filter(function(t){return"chart"===t.options.content}).forEach(function(t){t.close()});if(t)if(t.msg)e.map.toast(t.msg);else{e.elevationProfileCoordinates=t.coords;e.renderElevationProfileChart({data:t,div:e.div.querySelector("."+ctlProto.CLASS+"-chart")})}else e.map.toast(options.msg);e.map.getLoadingIndicator().hide()};ctlProto.renderElevationProfileChart=function(options){const self=this;options=options||{};TC.loadJS(!window.c3,TC.Consts.url.D3C3||TC.apiLocation+"lib/d3c3/d3c3.min.js",function(){const data=options.data;data.ele=data.ele.map(t=>null===t?0:t);const div=options.div;var locale=TC.Util.getMapLocale(self.map);self.getRenderedHtml(ctlProto.CLASS+"-chart",{upHill:data.upHill?data.upHill.toLocaleString(locale):"0",downHill:data.downHill?data.downHill.toLocaleString(locale):"0"},function(out){div.innerHTML=out;div.style.display="";if(self.options.titles){if(self.options.titles.main){const t=self.div.querySelector(".prpanel-title-text");t.setAttribute("title",self.options.titles.main);t.innerHTML=self.options.titles.main}self.options.titles.max&&self.div.querySelector(".prcollapsed-max").setAttribute("title",self.options.titles.max)}var chartOptions=TC.Util.extend({bindto:div.querySelector(".tc-chart"),padding:{top:0,right:15,bottom:0,left:45},legend:{show:!1}},self.createChartOptions(data));self.chart.tooltip&&(chartOptions.tooltip={contents:function(d){var fn=self.chart.tooltip;"function"!=typeof fn&&(fn=TC.Util.getFNFromString(self.chart.tooltip));return fn.call(eval(self.chart.ctx),d)}});self.chart&&self.chart.onmouseout&&(chartOptions.onmouseout=function(){var fn=self.chart.onmouseout;"function"!=typeof fn&&(fn=TC.Util.getFNFromString(self.chart.onmouseout));fn.call(eval(self.chart.ctx))});chartOptions.onrendered=function(){TC.Util.isFunction(chartOptions._onrendered)&&chartOptions._onrendered.call(this);self.map.trigger(TC.Consts.event.DRAWCHART,{control:self,svg:this.svg[0][0],chart:this})};if(window.c3){if(!c3._isOverriden){window.c3.chart.internal.fn.generateDrawLine=function(t,e){var n=this,i=n.config,o=n.d3.svg.line(),s=n.generateGetLinePoints(t,e),l=e?n.getSubYScale:n.getYScale,a=function(t){return(e?n.subxx:n.xx).call(n,t)},r=function(t,e){return i.data_groups.length>0?s(t,e)[0][1]:l.call(n,t.id)(t.value)};o=i.axis_rotated?o.x(r).y(a):o.x(a).y(r);i.line_connectNull||(o=o.defined(function(t){return null!=t.value}));return function(t){var s,a=i.line_connectNull?n.filterRemoveNull(t.values):t.values,r=e?n.x:n.subX,c=l.call(n,t.id),d=0,u=0;if(n.isLineType(t))if(i.data_regions[t.id])s=n.lineWithRegions(a,r,c,i.data_regions[t.id]);else{n.isStepType(t)&&(a=n.convertValuesToStep(a));s=o.interpolate("linear")(a)}else{if(a[0]){d=r(a[0].x);u=c(a[0].value)}s=i.axis_rotated?"M "+u+" "+d:"M "+d+" "+u}return s||"M 0 0"}};window.c3.chart.internal.fn.generateDrawArea=function(t,e){var n=this,i=n.config,o=n.d3.svg.area(),s=n.generateGetAreaPoints(t,e),l=e?n.getSubYScale:n.getYScale,a=function(t){return(e?n.subxx:n.xx).call(n,t)},r=function(t,e){return i.data_groups.length>0?s(t,e)[0][1]:l.call(n,t.id)(0)},c=function(t,e){return i.data_groups.length>0?s(t,e)[1][1]:l.call(n,t.id)(t.value)};o=i.axis_rotated?o.x0(r).x1(c).y(a):o.x(a).y0(r).y1(c);i.line_connectNull||(o=o.defined(function(t){return null!==t.value}));return function(t){var e,s=i.line_connectNull?n.filterRemoveNull(t.values):t.values,l=0,a=0;if(n.isAreaType(t)){n.isStepType(t)&&(s=n.convertValuesToStep(s));e=o.interpolate("linear")(s)}else{if(s[0]){l=n.x(s[0].x);a=n.getYScale(t.id)(s[0].value)}e=i.axis_rotated?"M "+a+" "+l:"M "+l+" "+a}return e||"M 0 0"}};c3._isOverriden=!0}self.chart.chart=c3.generate(chartOptions)}})})};const closeOpenedTableResultsPanel=function(){const t=this;t.map.getControlsByClass(TC.control.ResultsPanel).filter(function(e){return e!==t&&e.isVisible()}).filter(function(e){return e.options.content!==t.contentType.CHART}).forEach(function(t){t.close()})};ctlProto.openTable=function(){var t=this;t.div.classList.remove(TC.Consts.classes.HIDDEN);if(n=arguments[0]){var e;n.css&&(e=n.css);var n,i=n.callback,o=n.columns;if((n=n.data)&&n.length>0){if(!o){o=[];for(var s in n[0])o.push(s)}t.tableData={columns:o,results:n,css:e,callback:i};t.getRenderedHtml(t.CLASS+"-table",t.tableData).then(function(e){const n=t.div.querySelector("."+t.CLASS+"-table"),i=n.parentElement;i.removeChild(n);n.innerHTML=e;i.appendChild(n);t.tableData.callback&&t.tableData.callback(n);closeOpenedTableResultsPanel.call(t);t.map.trigger(TC.Consts.event.DRAWTABLE,{control:t})});t.div.querySelector("."+t.CLASS+"-chart").style.display="none";t.div.querySelector("."+t.CLASS+"-info").style.display="none";t.show("prsidebar-body")}}t.map.getLoadingIndicator().hide()};ctlProto.open=function(t,e){const n=this;n.div.classList.remove(TC.Consts.classes.HIDDEN);const i=e||n.div.querySelector("."+n.CLASS+"-table");n.requestIsRendered=window.requestAnimationFrame(function(){var t=i.getBoundingClientRect();if(t&&t.width>100){window.cancelAnimationFrame(this.requestIsRendered);this.map.trigger(TC.Consts.event.DRAWTABLE,{control:n})}}.bind(n));n.div.querySelector("."+n.CLASS+"-chart").style.display="none";const o=n.div.querySelector("."+n.CLASS+"-table");o.style.display="none";n.div.querySelector("."+n.CLASS+"-info").style.display="none";if(t)if(e){n.getTableContainer=function(){return e};e.innerHTML=t;e.style.display=""}else{o.innerHTML=t;o.style.display=""}const s=n.div.querySelector(".prcollapsed-max");if(n.options.titles){if(n.options.titles.main){const t=n.div.querySelector(".prpanel-title-text");t.setAttribute("title",n.options.titles.main);t.innerHTML=n.options.titles.main}n.options.titles.max&&s.setAttribute("title",n.options.titles.max)}n.options.classes&&n.options.classes.collapsed&&s.querySelector("i.fa-list-alt").classList.add(n.options.classes.collapsed);const l=n.div.querySelector(n.content.collapsedClass);isElementVisible(l)&&n.maximize();n.show("prsidebar-body");n.hide("prcollapsed-max");n.map.getLoadingIndicator().hide()};ctlProto.createChartOptions=function(t){const e=this;var n={};const i=(t=t||{}).locale||TC.Util.getMapLocale(e.map);t.chartType;if(null!=t.ele){const l=function(){const n=document.documentElement.clientWidth/100*40;return{height:n>445?t.maxHeight||e.CHART_SIZE.MAX_HEIGHT:t.minHeight||e.CHART_SIZE.MIN_HEIGHT,width:n>445?t.maxWidth||e.CHART_SIZE.MAX_WIDTH:n>310?t.mediumWidth||e.CHART_SIZE.MEDIUM_WIDTH:t.minWidth||e.CHART_SIZE.MIN_WIDTH}};var o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;t.ele.forEach(function(t){if("number"==typeof t){o=Math.max(t,o);s=Math.min(t,s)}});const a="grad"+TC.getUID();n={data:{x:"x",columns:[["x"].concat(t.x),["ele"].concat(t.ele)],types:{ele:"area-spline"},colors:{ele:"url(#"+a+")"}},size:l(),point:{show:!1},axis:{x:{tick:{outer:!1,count:5,format:function(t){var e,n;if((t/=1e3)<1){e=Math.round(1e3*t);n=" m"}else{e=Math.round(100*t)/100;n=" km"}return(e=e.toLocaleString(i))+n}}},y:{padding:{top:0,bottom:0},max:o,min:s,tick:{count:2,format:function(t){return(parseInt(t.toFixed(0))||0).toLocaleString(i)+"m"}}}},onresize:function(){this.api.resize(l())}};t.time&&(n.time=("00000"+t.time.h).slice(-2)+":"+("00000"+t.time.m).slice(-2)+":"+("00000"+t.time.s).slice(-2));n._onrendered=function(){const t=this.svg[0][0];var n=t.getElementsByTagName("defs")[0],i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"linearGradient");o.setAttributeNS(null,"id",a);o.setAttributeNS(null,"x1","0%");o.setAttributeNS(null,"x2","0%");o.setAttributeNS(null,"y1","0%");o.setAttributeNS(null,"y2","100%");o.setAttributeNS(null,"gradientUnits","userSpaceOnUse");const s=document.createElementNS(i,"stop");s.setAttributeNS(null,"offset","0%");s.setAttributeNS(null,"stop-color","red");s.setAttributeNS(null,"stop-opacity","0.7");o.appendChild(s);const l=document.createElementNS(i,"stop");l.setAttributeNS(null,"offset","50%");l.setAttributeNS(null,"stop-color","orange");l.setAttributeNS(null,"stop-opacity","0.9");o.appendChild(l);const r=document.createElementNS(i,"stop");r.setAttributeNS(null,"offset","100%");r.setAttributeNS(null,"stop-color","green");r.setAttributeNS(null,"stop-opacity","1");o.appendChild(r);n.appendChild(o);const c=d3.select(".c3-brush").node();c&&c.parentNode.removeChild(c);d3.select(".c3-event-rects,.c3-event-rects-single").selectAll("rect").style("cursor","pointer").on("click",function(t){d3.event.stopPropagation();const n=e.elevationProfileCoordinates[t.index].slice(0,2);n&&TC.loadJS(!TC.feature||TC.feature&&!TC.feature.Point,[TC.apiLocation+"TC/feature/Point"],function(){e.map.zoomToFeatures([new TC.feature.Point(n)])})});var d=d3.select(".c3-axis.c3-axis-x").select("path").attr("d");if(/^M\d\,(\d)V\dH\d{3}V(\d)$/i.exec(d)){d=d.replace(/(M\d\,)\d/i,"$10").replace(/(H\d{3}V)(\d)/i,"$10");d3.select(".c3-axis.c3-axis-x").select("path").attr("d",d)}else{if(/^M\s\d\s(\d)\sV\s\d\sH\s\d{3}\sV\s(\d)$/i.exec(d)){d=d.replace(/(M\s\d\s)\d/i,"$10").replace(/(H\s\d{3}\sV\s)(\d)/i,"$10");d3.select(".c3-axis.c3-axis-x").select("path").attr("d",d)}}const u=t.getBoundingClientRect(),p={width:u.width,height:u.height};var h=function(){var t=d3.scale.ordinal().rangeRoundBands([0,p.width],.1,.3);d3.select(".c3-axis-x").selectAll("text:not(.c3-axis-x-label)").call(function(t,e){t.each(function(){t.each(function(t,e){if(0!=e){d3text=d3.select(this);if(1===d3text.node().childNodes.length){var n=d3text.select("tspan").node().cloneNode(),i=d3text.text().split(" ");d3text.select("tspan").text(i[0]);n.textContent=i[1];var o=n.getAttribute("dy");o=(o=o?parseFloat(n.getAttribute("dy")):.71)+.18+"em";n.setAttribute("dy",o);d3text.node().appendChild(n)}}})})},t.rangeBand())};if(d3.select(".c3-axis-x").node().getBoundingClientRect().width)(d3.select(".c3-axis-x").node().getBoundingClientRect().width>=p.width-d3.select(".c3-axis-y").node().getBoundingClientRect().width||100*d3.select(".c3-axis-x").node().getBoundingClientRect().width/(p.width-d3.select(".c3-axis-y").node().getBoundingClientRect().width)>90)&&h();else{if(e.elevationChartLabelsRAF){window.cancelAnimationFrame(e.elevationChartLabelsRAF);e.elevationChartLabelsRAF=void 0}e.elevationChartLabelsRAF=requestAnimationFrame(function t(){if(d3.select(".c3-axis-x").length&&!d3.select(".c3-axis-x").node())e.elevationChartLabelsRAF=requestAnimationFrame(t);else if(d3.select(".c3-axis-x").length&&d3.select(".c3-axis-x").node()&&!d3.select(".c3-axis-x").node().getBoundingClientRect().width)e.elevationChartLabelsRAF=requestAnimationFrame(t);else{window.cancelAnimationFrame(e.elevationChartLabelsRAF);e.elevationChartLabelsRAF=void 0;(d3.select(".c3-axis-x").node().getBoundingClientRect().width>=p.width-d3.select(".c3-axis-y").node().getBoundingClientRect().width||100*d3.select(".c3-axis-x").node().getBoundingClientRect().width/(p.width-d3.select(".c3-axis-y").node().getBoundingClientRect().width)>90)&&h()}})}if(!e.isMinimized()){e.show("prsidebar-body");e.hide("prcollapsed-max")}e.div.querySelector("."+e.CLASS+"-table").style.display="";e.div.querySelector("."+e.CLASS+"-info").style.display=""}}else n={msg:e.getLocaleString("geo.trk.chart.chpe.empty")};return n};const getTime=function(t,e){var n=e-t,i={},o=Math.floor(n/1e3/60/60/24);n-=1e3*o*60*60*24;var s=Math.floor(n/1e3/60/60);n-=1e3*s*60*60;i.h=s+24*o;var l=Math.floor(n/1e3/60);n-=1e3*l*60;i.m=l;i.s=Math.floor(n/1e3);return TC.Util.extend({},i,{toString:("00000"+i.h).slice(-2)+":"+("00000"+i.m).slice(-2)+":"+("00000"+i.s).slice(-2)})};ctlProto.getElevationChartTooltip=function(t){const e=this.elevationProfileCoordinates;var n=t[0].x;n/=1e3;const i=e[t[0].index];var o;4==e[0].length&&e[0][3]>0&&(o=getTime(e[0][3],i[3]));const s=this.map.options.locale&&this.map.options.locale.replace("_","-")||void 0,l=parseInt(t[0].value.toFixed(0)).toLocaleString(s);var a,r;if(n<1){a=Math.round(1e3*n);r=" m"}else{a=Math.round(100*n)/100;r=" km"}return'<div class="track-elevation-tooltip"><div><span>'+l+" m </span><br><span>"+(a=a.toLocaleString(s))+r+" </span></div>"+(o?"<span>"+o.toString+"</span><div/>":"")};ctlProto.getTableContainer=function(){return this.tableDiv};ctlProto.getInfoContainer=function(){return this.infoDiv};ctlProto.getMenuElement=function(){return this.menuDiv};ctlProto.getContainerElement=function(){return this.div||null};ctlProto.register=function(t){const e=this,n=TC.Control.prototype.register.call(e,t);e.wrap.register(t);e.openOn&&e.map.one(e.openOn,function(t,n){e.content.fnOpen.call(e,t.data)});e.closeOn&&e.map.one(e.closeOn,function(t,n){e.close()});e.options.openOn&&e.map.on(e.options.openOn,function(t,n){e.content.fnOpen.call(e,t.data)});e.options.closeOn&&e.map.on(e.options.closeOn,function(t,n){e.close()});return n};ctlProto.exportToExcel=function(){var t=this,e=[t.tableData.columns];t.tableData.results.forEach(function(t){var n=[];for(var i in t)t.hasOwnProperty(i)&&"Id"!==i&&"Geom"!==i&&n.push(t[i]);e.push(n)});var n=function(n){var i=t.save.fileName?t.save.fileName:"resultados.xls",o=t.options.titles&&t.options.titles.main?t.options.titles.main:null;n.Save(i,e,o)};TC.Util.ExcelExport?n(new TC.Util.ExcelExport):TC.loadJS(!0,TC.apiLocation+"TC/Util.ExcelExport",function(){n(new TC.Util.ExcelExport)})}}();
//# sourceMappingURL=../maps/control/ResultsPanel.min.js.map