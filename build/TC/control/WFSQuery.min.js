TC.control=TC.control||{};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),l=1;l<arguments.length;l++){var s=arguments[l];if(null!=s)for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}return n},writable:!0,configurable:!0});TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");TC.filter||TC.syncLoadJS(TC.apiLocation+"TC/filter");TC.Feature||TC.syncLoadJS(TC.apiLocation+"TC/Feature");TC.feature.Point||TC.syncLoadJS(TC.apiLocation+"TC/feature/Point");TC.feature.Polyline||TC.syncLoadJS(TC.apiLocation+"TC/feature/Polyline");TC.feature.Polygon||TC.syncLoadJS(TC.apiLocation+"TC/feature/Polygon");TC.feature.MultiPolyline||TC.syncLoadJS(TC.apiLocation+"TC/feature/MultiPolyline");TC.feature.MultiPolygon||TC.syncLoadJS(TC.apiLocation+"TC/feature/MultiPolygon");TC.control.WFSQuery=function(e){TC.Control.apply(this,arguments);this.styles=this.options.styles;this.highlightStyles=this.options.highlightStyles||this.options.highLightStyles;this.download=this.options.download;const t="."+this.CLASS;this._selectors={ELEVATION_CHECKBOX:t+"-dialog-elev input[type=checkbox]",INTERPOLATION_RADIO:"input[type=radio][name=finfo-ip-coords]",INTERPOLATION_DISTANCE:t+"-dialog-ip-m"}};TC.inherit(TC.control.WFSQuery,TC.Control);!function(){var e=TC.control.WFSQuery.prototype,t=null,n=null,l=null,s=null,i=(TC.Consts.logicalOperator.AND,null),o=null,a=null,r=null;const c=function(e){if(e)for(;e.children.length;)e.removeChild(e.children[0])};var u={eq:TC.filter.equalTo,not:TC.filter.notEqualTo,gt:TC.filter.greaterThan,lt:TC.filter.lessThan,ge:TC.filter.greaterThanOrEqualTo,le:TC.filter.lessThanOrEqualTo,like:TC.filter.like,contains:TC.filter.like,start:TC.filter.like,end:TC.filter.like,bw:TC.filter.between},d=null,y=null,f=null,h=null,p=null,g=null,m=function(){return null},b=function(){return null},C=null,w=null,v=null;e.CLASS="tc-ctl-wfsquery";e.template={};e.template[e.CLASS+"-dialog"]=function(){dust.register(e.CLASS+"-dialog",t);function t(e,t){return e.w('<div class="tc-ctl-wfsquery-dialog tc-modal"><div class="tc-modal-background tc-modal-close"></div><div class="tc-modal-window tc-ctl-wfsquery-modal-window" ><div class="tc-modal-header"><h3>').f(t.get(["layerName"],!1),t,"h").w('</h3><div title="').h("i18n",t,{},{$key:"query.tooltipCloseDialogBtn"}).w('" class="tc-modal-close"></div></div><div class="tc-modal-body">').h("gt",t,{block:n},{key:t.getPath(!1,["layers","length"]),value:1}).w('<div class="tc-modal-form"></div><div class="tc-ctl-wfsquery-message tc-hidden"></div>                 </div><div class="tc-modal-footer"><button type="button" title="').h("i18n",t,{},{$key:"query.tooltipSendQueryBtn"}).w('" class="tc-button tc-ctl-wlm-btn-launch">').h("i18n",t,{},{$key:"query.sendQueryBtnText"}).w('</button><button type="button" title="').h("i18n",t,{},{$key:"query.cancelQueryTooltip"}).w('" class="tc-button tc-modal-close">').h("i18n",t,{},{$key:"query.cancelQueryButton"}).w("</button></div></div></div>")}t.__dustBody=!0;function n(e,t){return e.w('                      <div><select class="tc-combo" name="availableLayers"><option value="">').h("i18n",t,{},{$key:"query.chooseALayerCombo"}).w("</option>").s(t.get(["layers"],!1),t,{block:l},{}).w("</select></div>            ")}n.__dustBody=!0;function l(e,t){return e.w('<option value="').f(t.get(["name"],!1),t,"h").w('">').f(t.get(["title"],!1),t,"h").w("</option>")}l.__dustBody=!0;return t};e.template[e.CLASS+"-form"]=function(){dust.register(e.CLASS+"-form",t);function t(e,t){return e.w("<div>").h("countif",t,{else:n,block:l},{key:t.get(["attributes"],!1),excludedKeys:"the_geom,FEATURE"}).w('</div><div class="tc-ctl-wfsquery-operacion tc-hidden"><div class="tc-ctl-wfsquery tc-ctl-wfsquery-numeric tc-hidden"><input type="radio" id="cond_1" name="codicion" value="eq" /><label for="cond_1" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.equalToBtn"}).w('</label><input type="radio" id="cond_2" name="codicion" value="not" /><label for="cond_2" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.notEqualToBtn"}).w('</label><input type="radio" id="cond_3" name="codicion" value="gt" /><label for="cond_3" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.greatherThanBtn"}).w('</label><input type="radio" id="cond_4" name="codicion" value="lt" /><label for="cond_4" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.lowerThanBtn"}).w('</label><input type="radio" id="cond_5" name="codicion" value="ge" /><label for="cond_5" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.greatherOrEqualThanBtn"}).w('</label><input type="radio" id="cond_6" name="codicion" value="le" /><label for="cond_6" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.lowerOrEqualThanBtn"}).w('</label>\x3c!--<input type="radio" id="cond_7" name="codicion" value="like" /><label for="cond_7" class="tc-ctl-wfsquery-cond">es como</label>--\x3e</div><div class="tc-ctl-wfsquery tc-ctl-wfsquery-text tc-hidden"><input type="radio" id="cond_8" name="codicion" value="eq" /><label for="cond_8" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.equalToBtn"}).w('</label><input type="radio" id="cond_9" name="codicion" value="contains" /><label for="cond_9" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.containsBtn"}).w('</label><input type="radio" id="cond_10" name="codicion" value="start" /><label for="cond_10" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.startsByBtn"}).w('</label><input type="radio" id="cond_11" name="codicion" value="end" /><label for="cond_11" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.endsByBtn"}).w('</label></div><div class="tc-ctl-wfsquery tc-ctl-wfsquery-date tc-hidden"><input type="radio" id="cond_12" name="codicion" value="bw" /><label for="cond_12" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.equalToBtn"}).w('</label><input type="radio" id="cond_13" name="codicion" value="nbw" /><label for="cond_13" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.notEqualToBtn"}).w('</label><input type="radio" id="cond_14" name="codicion" value="gt" /><label for="cond_14" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.greatherThanBtn"}).w('</label><input type="radio" id="cond_15" name="codicion" value="lt" /><label for="cond_15" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.lowerThanBtn"}).w('</label><input type="radio" id="cond_16" name="codicion" value="ge" /><label for="cond_16" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.greatherOrEqualThanBtn"}).w('</label><input type="radio" id="cond_17" name="codicion" value="le" /><label for="cond_17" class="tc-ctl-btn tc-ctl-wfsquery-cond">').h("i18n",t,{},{$key:"query.lowerOrEqualThanBtn"}).w('</label>\x3c!--<input type="radio" id="cond_7" name="codicion" value="like" /><label for="cond_7" class="tc-ctl-wfsquery-cond">es como</label>--\x3e</div><div class="tc-ctl-wfsquery-where tc-hidden"><input type="search" placeholder="').h("i18n",t,{},{$key:"query.searchFieldPhd"}).w('" class="tc-textbox" /><button type="button" title="').h("i18n",t,{},{$key:"query.tooltipAddCondBtn"}).w('" class="tc-button">').h("i18n",t,{},{$key:"query.textAddCondBtn"}).w('</button><ul class="tc-ctl-wfsquery-list tc-ctl-search-list tc-hidden"></ul><div class="tc-ctl-wfsquery-key"><label>').h("i18n",t,{},{$key:"query.logicalOpLbl"}).w('</label></div><div class="tc-ctl-wfsquery-value"><input type="radio" id="log_op_1" class="tc-ctl-wfsquery-logOpRadio" checked name="log_op" value="AND" /><label for="log_op_1" class="tc-ctl-btn tc-ctl-wfsquery-logOp">').h("i18n",t,{},{$key:"query.logicalOpAndLbl"}).w('</label><input type="radio" id="log_op_2" class="tc-ctl-wfsquery-logOpRadio" name="log_op" value="OR" /><label for="log_op_2" class="tc-ctl-btn tc-ctl-wfsquery-logOp">').h("i18n",t,{},{$key:"query.logicalOpOrLbl"}).w('</label></div><div class="tc-ctl-wfsquery-whereList"></div></div></div>')}t.__dustBody=!0;function n(e,t){return e.w('<div class="tc-ctl-wfsquery-message tc-msg-warning">').h("i18n",t,{},{$key:"query.noAttributes"}).w("</div>")}n.__dustBody=!0;function l(e,t){return e.w('<select class="tc-combo" id="attributes" name="attributes"><option value="">').h("i18n",t,{},{$key:"query.chooseAttrCombo"}).w("</option>").h("iterate",t,{block:s},{on:t.get(["attributes"],!1),excludedKeys:"the_geom,FEATURE"}).w("</select>")}l.__dustBody=!0;function s(e,t){return e.w('<option value="').f(t.get(["key"],!1),t,"h").w('">').f(t.get(["key"],!1),t,"h").w("</option>")}s.__dustBody=!0;return t};e.template[e.CLASS+"-filter"]=function(){dust.register(e.CLASS+"-filter",t);function t(e,t){return e.s(t.get(["conditions"],!1),t,{block:n},{})}t.__dustBody=!0;function n(e,t){return e.w('<div class="tc-ctl-wfsquery-where-cond">').f(t.get(["field"],!1),t,"h").w("&nbsp;").f(t.get(["opText"],!1),t,"h").w("&nbsp;").x(t.get(["isString"],!1),t,{block:l},{}).f(t.get(["valueToShow"],!1),t,"h",["numberSeparator"]).x(t.get(["isString"],!1),t,{block:s},{}).w('</div><div class="tc-ctl-wfsquery-del-cond" title="').h("i18n",t,{},{$key:"query.tooltipRemoveCond"}).w('"></div>\t')}n.__dustBody=!0;function l(e,t){return e.w("&quot;")}l.__dustBody=!0;function s(e,t){return e.w("&quot;")}s.__dustBody=!0;return t};e.template[e.CLASS+"-table-object"]=function(){dust.register(e.CLASS+"-table-object",t);function t(e,t){return e.h("isObject",t,{array:n,else:s,block:a},{object:t.getPath(!0,[])})}t.__dustBody=!0;function n(e,t){return e.w('<div class="complexAttr"><input type="checkbox" id="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('"><div><label for="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('" title="" class="plus"></label><label for="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('" title="" class="title">').h("size",t,{},{key:t.getPath(!0,[])}).w("  ").h("i18n",t,{},{$key:"featureInfo.complexData.array"}).w('</label><table class="complexAttr"><tbody>').h("iterate",t,{block:l},{on:t.getPath(!0,[])}).w("</tbody></table></div></div>")}n.__dustBody=!0;function l(e,t){return e.w('<tr><td class="arrayNode">').p("tc-ctl-wfsquery-table-object",t,t.rebase(t.get(["value"],!1)),{}).w("</td></tr>")}l.__dustBody=!0;function s(e,t){return e.h("startsWith",t,{else:i,block:o},{key:t.getPath(!0,[]),value:"http"})}s.__dustBody=!0;function i(e,t){return e.w("<div>").f(t.getPath(!0,[]),t,"h",["numberSeparator"]).w("</div>")}i.__dustBody=!0;function o(e,t){return e.w('<a href="').f(t.getPath(!0,[]),t,"h").w('" target="_blank" title="').h("i18n",t,{},{$key:"linkInNewWindow"}).w('">').h("i18n",t,{},{$key:"open"}).w("</a>")}o.__dustBody=!0;function a(e,t){return e.w('<table class="complexAttr"><tbody>').h("iterate",t,{block:r},{on:t.getPath(!0,[])}).w("</tbody></table>")}a.__dustBody=!0;function r(e,t){return e.h("isKeyKalue",t,{else:c,block:f},{on:t.getPath(!0,[])})}r.__dustBody=!0;function c(e,t){return e.w('<tr><th style="display:none">').f(t.get(["key"],!1),t,"h").w("</th><td>").h("isObject",t,{array:u,else:d,block:y},{object:t.get(["value"],!1)}).p("tc-ctl-wfsquery-table-object",t,t.rebase(t.get(["value"],!1)),{}).w("</div></td></tr>")}c.__dustBody=!0;function u(e,t){return e.w('\x3c!--array--\x3e<div><label for="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('" class="title">').f(t.get(["key"],!1),t,"h").w("</label><br />")}u.__dustBody=!0;function d(e,t){return e.w("<div>\x3c!--native--\x3e")}d.__dustBody=!0;function y(e,t){return e.w('\x3c!--object--\x3e<input type="checkbox" id="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('"><div><label for="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('" title="" class="plus"></label><label for="complexAttr_').f(t.getPath(!0,[]),t,"h",["objectId"]).w('" title="" class="title">').f(t.get(["key"],!1),t,"h").w("</label><br />")}y.__dustBody=!0;function f(e,t){return e.w('<tr class="keyValue"><th class="key">').f(t.get(["key"],!1),t,"h").w('</th><td class="value">').p("tc-ctl-wfsquery-table-object",t,t.rebase(t.get(["value"],!1)),{}).w("</td></tr>")}f.__dustBody=!0;return t};var T=function(e){var t=document.createElement("input");t.setAttribute("type",e);return t.type==e},q=function(e){var n=e[0],l=e[1],s=e[2];y=n;h=s;g=(g=s.Operations.DescribeFeatureType.DCP.HTTP.Get.href).substring(g.indexOf(":")+1);s.Operations.GetFeature.CountDefault?_maxRecordCount=s.Operations.GetFeature.CountDefault.DefaultValue:_maxRecordCount=null;var i=n.getDisgregatedLayerNames?n.getDisgregatedLayerNames():n.featureType;if((i=i.filter(function(e){return s.FeatureTypes.hasOwnProperty(e.substring(e.indexOf(":")+1))})).length>1){t.classList.remove("tc-loading");l.getElementsByClassName("tc-combo")[0].addEventListener("change",function(){if(this.value){l.querySelector(".tc-modal-body .tc-ctl-wfsquery-message",l).classList.add(TC.Consts.classes.HIDDEN);p=this.options[this.selectedIndex].text;t.classList.add("tc-loading");f=this.value;y.describeFeatureType(this.value).then(function(e){var t=Object.entries(e);E(t.length>1?e:t[0][1],l)},function(){var e=l.getElementsByClassName("tc-modal-body")[0];e.classList.remove("tc-loading");e.insertAdjacentHTML("beforeend",'<div class="tc-ctl-wfsquery-message tc-msg-warning">'+C("query.LayerNotAvailable")+"</div>");c(e)})}else{var e=l.getElementsByClassName("tc-modal-form")[0];c(e);for(var n=0;n<e.children.length;n++)e.removeChild(e.children[n]);N()}})}else if(1===i.length){if(s.FeatureTypes[i[0].substring(i[0].indexOf(":")+1)]){p=s.FeatureTypes[i[0].substring(i[0].indexOf(":")+1)].Title;f=i[0];y.describeFeatureType(i[0]).then(function(e){var t=Object.entries(e);E(t.length>1?e:t[0][1],l)},function(){var e=l.getElementsByClassName("tc-modal-body")[0];e.classList.remove("tc-loading");e.insertAdjacentHTML("beforeend",'<div class="tc-ctl-wfsquery-message tc-msg-warning">'+C("query.LayerNotAvailable")+"</div>");c(e)})}else{var o=l.getElementsByClassName("tc-modal-body")[0];o.classList.remove("tc-loading");o.insertAdjacentHTML("beforeend",'<div class="tc-ctl-wfsquery-message tc-msg-warning">'+C("query.LayerNotAvailable")+"</div>")}}else{TC.Util.closeModal();n.map.toast(TC.Util.getLocaleString(n.map.options.locale,"query.LayerNotAvailable"),{type:TC.Consts.msgType.ERROR})}},L=null,k=null,S=function(e){if(T("date"))e.type="date";else{e.type="search";new Promise(function(e,t){"undefined"!=typeof IMask?setTimeout(function(){e()},10):TC.loadJS(!0,[TC.apiLocation+"/lib/polyfill/IMask"+(TC.isDebug?"":".min")+".js"],function(){console.log("Imask loaded");e()})}).then(function(){L=new IMask(e,{mask:Date,pattern:r&&"es-ES"!==r?"eu-ES"===r?"Y/`m/`d":"m/`d/`Y":"d/`m/`Y",lazy:!1,format:function(e){var t=e.getDate(),n=e.getMonth()+1,l=e.getFullYear();t<10&&(t="0"+t);n<10&&(n="0"+n);switch(r){case"eu-ES":return[l,n,t].join("/");case"en-US":return[n,t,l].join("/");case"es-ES":default:return[t,n,l].join("/")}},parse:function(e){switch(r){case"eu-ES":return new Date(e.split("/")[1]+"/"+e.split("/")[2]+"/"+e.split("/")[0]);case"en-US":return new Date(e);case"es-ES":default:return new Date(e.split("/")[1]+"/"+e.split("/")[0]+"/"+e.split("/")[2])}},blocks:{d:{mask:IMask.MaskedRange,from:1,to:31,maxLength:2},m:{mask:IMask.MaskedRange,from:1,to:12,maxLength:2},Y:{mask:IMask.MaskedRange,from:1900,to:9999}}})})}},x=function(){if(L){var e=L.el.input;L.destroy();L=null;e.value="";e.type="search"}},E=function(n,l){N();_internalGetDataTypes=function(){return n};let s={};for(var i in n)TC.Util.isGeometry(n[i].type)||(s[i]=n[i]);n=s;e.getRenderedHtml(e.CLASS+"-form",{attributes:n},function(e){var s=l.getElementsByClassName("tc-modal-form")[0];c(s);s.insertAdjacentHTML("beforeend",e);t.classList.remove("tc-loading");TC.loadJS(!0,[TC.apiLocation+"TC/ui/autocomplete.js"],function(){console.log("autocomplete loaded")});var i=s.getElementsByClassName("tc-combo");if(0==i.length)l.getElementsByClassName("tc-button tc-ctl-wlm-btn-launch")[0].setAttribute("disabled","");else{l.getElementsByClassName("tc-button tc-ctl-wlm-btn-launch")[0].removeAttribute("disabled");i[0].addEventListener("change",function(){_.apply(this,[s,n])});s.querySelector(".tc-ctl-wfsquery-where  input[type='radio']").addEventListener("change",function(){"OR"===this.value?TC.Consts.logicalOperator.OR:TC.Consts.logicalOperator.AND;s.getElementsByClassName("tc-ctl-wfsquery-whereList-op")[0].innerHTML=this.nextElementSibling.innerHTML});s.querySelector(".tc-button").addEventListener("click",function(){var e=s.querySelector("input.tc-textbox");TC.UI.autocomplete.call(e,"clear");k&&k.masked.remove();if(A(s)){var t,n,l=[].reduce.call(s.querySelectorAll(".tc-combo"),function(e,t){return e+(e?"/":"")+t.value},""),i=s.querySelector('.tc-ctl-wfsquery input[type="radio"]:checked'),o=i.value,a=i.nextElementSibling.innerText,c=(t=e,k?k.unmaskedValue:L?L.unmaskedValue.substring(4)+"-"+L.unmaskedValue.substring(2,4)+"-"+L.unmaskedValue.substring(0,2):t.value),d=function(e){if(k)return k.value;if(L)return L.value;if("date"===e.type)return new Date(e.value).toLocaleDateString(r);if("number"===e.type){var t=1.1.toLocaleString(r).substring(1,2);return e.value.replace(".",t)}return e.value}(e);s.querySelector('.tc-ctl-wfsquery-where  input[type="radio"]:checked').nextElementSibling.innerText;c=c.replace("<","&lt;").replace(">","&gt;");(n=v.indexOf("dateTime")>=0?"nbw"!==o?new u[o](l,c+"T00:00:00Z",c+"T23:59:59Z"):new TC.filter.not(TC.filter.between(l,c+"T00:00:00Z",c+"T23:59:59Z")):new u[o](l,("end"===o||"contains"===o?"*":"")+c+("start"===o||"contains"===o?"*":""))).matchCase=!1;whereObjList.push(n);switch(!0){case v.indexOf("int")>=0:d=parseInt(c,10);break;case v.indexOf("float")>=0:case v.indexOf("double")>=0:case v.indexOf("long")>=0:case v.indexOf("decimal")>=0:d=parseFloat(c,10)}whereFilterList.push({field:l,opText:a,isString:v.indexOf("string")>=0,valueToShow:d});O(s);e.value=""}})}})},_=function(t,n){var l=this;l.parentElement.parentElement.querySelectorAll("select").forEach(function(e){l.offsetTop<e.offsetTop&&e.parentElement.parentElement.removeChild(e.parentElement)});var s=t.querySelector(".tc-ctl-wfsquery-where .tc-textbox");s.dataset.autocomplete&&TC.UI.autocomplete.call(s,"clear");if(n[this.selectedOptions[0].text]){v=n[this.selectedOptions[0].text].type;t.getElementsByClassName("tc-ctl-wfsquery-operacion")[0].classList.remove("tc-hidden");TC.UI.autocomplete.call(s,"clear");!function(){if(k){var e=k.el.input;k.destroy();k=null;e.value="";e.type="search"}}();s.type="search";t.querySelector(".tc-ctl-wfsquery-numeric").classList.add("tc-hidden");t.querySelector(".tc-ctl-wfsquery-text").classList.add("tc-hidden");t.querySelector(".tc-ctl-wfsquery-date").classList.add("tc-hidden");t.querySelector(".tc-ctl-wfsquery-where").classList.add("tc-hidden");switch(!0){case!v:console.log("type es nulo");break;case v instanceof Object:(function(e,t){var n="";n+='<option value="">'+C("query.chooseAttrCombo")+"</option>";for(var l in e)e[l].type&&!TC.Util.isGeometry(e[l].type)&&(n+='<option value="'+(e[l].name||l)+'">'+l+"</option>");var s=document.createElement("div");s.insertAdjacentHTML("beforeend",'<select class="'+this.className+'" name="'+this.name+'">'+n+"</select>");this.parentNode.parentNode.insertBefore(s,this.parentNode.nextSibling).firstElementChild.addEventListener("change",function(){_.apply(this,[t,e])})}).apply(this,[v,t]);break;case v.indexOf("int")>=0:case v.indexOf("float")>=0:case v.indexOf("double")>=0:case v.indexOf("long")>=0:case v.indexOf("decimal")>=0:t.getElementsByClassName("tc-ctl-wfsquery-numeric")[0].classList.remove("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-text")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-date")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-where")[0].classList.remove("tc-hidden");0===t.querySelectorAll("tc-ctl-wfsquery-numeric input:checked").length&&(t.querySelector(".tc-ctl-wfsquery-numeric :first-child").checked=!0);x();if(T("number"))if(TC.Util.detectIE()){s.type="text";new Promise(function(e,t){"undefined"!=typeof IMask?setTimeout(function(){e()},10):TC.loadJS(!0,[TC.apiLocation+"/lib/polyfill/IMask"+(TC.isDebug?"":".min")+".js"],function(){console.log("Imask loaded");e()})}).then(function(){k=new IMask(s,{mask:Number,scale:v.indexOf("int")>=0||v.indexOf("long")>=0?0:2,signed:!1,thousandsSeparator:r&&"en-US"===r?",":".",padFractionalZeros:!1,normalizeZeros:!0,radix:r&&"en-US"===r?".":","})})}else{s.type="number";v.indexOf("int")>=0||v.indexOf("long")>=0?s.step="1":s.step="0.0001"}break;case v.indexOf("dateTime")>=0:t.getElementsByClassName("tc-ctl-wfsquery-numeric")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-text")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-date")[0].classList.remove("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-where")[0].classList.remove("tc-hidden");0===t.querySelectorAll("tc-ctl-wfsquery-date input:checked").length&&(t.querySelector(".tc-ctl-wfsquery-date :first-child").checked=!0);S(s);break;case v.indexOf("string")>=0:t.getElementsByClassName("tc-ctl-wfsquery-numeric")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-text")[0].classList.remove("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-date")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-where")[0].classList.remove("tc-hidden");0===t.querySelectorAll("tc-ctl-wfsquery-text input:checked").length&&(t.querySelector(".tc-ctl-wfsquery-text :first-child").checked=!0);x();const n=[].slice.call(t.querySelectorAll("select[name="+this.name+"]")).reduce(function(e,t){return e+(e?"/":"")+t.value},"");$(s,n,t.getElementsByClassName(e.CLASS+"-list tc-ctl-search-list")[0])}}else{t.getElementsByClassName("tc-ctl-wfsquery-numeric")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-date")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-text")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-where")[0].classList.add("tc-hidden");t.getElementsByClassName("tc-ctl-wfsquery-operacion")[0].classList.add("tc-hidden")}},O=function(t){dust.filters.numberSeparator||(dust.filters.numberSeparator=function(e){return e.toLocaleString(r)});TC._hbs&&!TC._hbs.helpers.numberSeparator&&TC._hbs.registerHelper("numberSeparator",function(e){return e.toLocaleString(r)});var n=t.getElementsByClassName("tc-ctl-wfsquery-whereList")[0];c(n);e.getRenderedHtml(e.CLASS+"-filter",{conditions:whereFilterList},function(e){t.getElementsByClassName("tc-ctl-wfsquery-whereList")[0].innerHTML=e;for(var n=t.getElementsByClassName("tc-ctl-wfsquery-del-cond"),l=0;l<n.length;l++)n[l].addEventListener("click",function(){var e=Array.prototype.indexOf.call(n,this);whereObjList.splice(e,1);whereFilterList.splice(e,1);O(t)})})},N=function(){whereObjList=[];whereFilterList=[]},A=function(e){var t,n=e.querySelector('.tc-ctl-wfsquery input[type="radio"]:checked');if(L&&!L.masked.isComplete){!1===/^(?=\d)(?:(?:31(?!.(?:0?[2469]|11))|(?:30|29)(?!.0?2)|29(?=.0?2.(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00)))(?:\x20|$))|(?:2[0-8]|1\d|0?[1-9]))([-.\/])(?:1[012]|0?[1-9])\1(?:1[6-9]|[2-9]\d)?\d\d(?:(?=\x20\d)\x20|$))?(((0?[1-9]|1[012])(:[0-5]\d){0,2}(\x20[AP]M))|([01]\d|2[0-3])(:[0-5]\d){1,2})?$/.test(str)&&W("Fecha "+str+" inv\xe1lida",TC.Consts.msgType.ERROR);return!1}if(0==n.length){W(C("query.msgNoCondition"));return!1}if(e.querySelectorAll("input[type='date']").length&&!e.querySelector("input[type='date']").checkValidity()){W(C("query.msgNoValidDate"));return!1}if(e.querySelectorAll("input[type='number']").length&&null!=(t=e.querySelector("input[type='number']"))&&!t.checkValidity()){"1"===t.step?W(C("query.msgNoValidNumberMustInt")):W(C("query.msgNoValidNumber"));return!1}if(""===e.querySelector("input.tc-textbox").value.trim()){W(C("query.msgNoValueCondition"));return!1}return!0},B=function(){const e=this;if(M()){n.getElementsByClassName("tc-modal-body")[0].classList.add("tc-loading");!function(){var t=F();I.apply(e,[p]);y.toolProxification.cacheHost.getAction(g).then(function(n){const i=n.action(g);if(s){s.setVisibility(!1);s.clearFeatures();d.off(TC.Consts.event.LAYERUPDATE,R);d.on(TC.Consts.event.LAYERUPDATE,R);s.url=i;s.featurePrefix=f.substring(0,f.indexOf(":"));s.featureType=f.substring(f.indexOf(":")+1);s.properties=t;s.setVisibility(!0);s.refresh()}else{P({id:"WFSQueryResults",type:TC.Consts.layerType.WFS,url:i,version:"1.1.0",owner:e,stealth:!0,geometryName:"the_geom",featurePrefix:f.substring(0,f.indexOf(":")),featureType:f.substring(f.indexOf(":")+1),properties:t,outputFormat:TC.Consts.format.JSON,styles:m()});d.on(TC.Consts.event.RESULTSPANELCLOSE,function(e){if(e.control===l){TC.browserFeatures.touch()&&TC.Util.swipe(e.control.div,"enable");s.clearFeatures();s.setVisibility(!1);d.off(TC.Consts.event.LAYERUPDATE,R)}})}})}()}else W(C("query.msgNoQueryFilter"))},P=function(e){d.addLayer(e).then(function(e){s=e;e.map.on(TC.Consts.event.LAYERUPDATE,R)})},F=function(){if(whereObjList.length>1){var e=document.querySelector(".tc-ctl-wfsquery-logOpRadio:checked").value;return TC.filter[TC.Consts.logicalOperator[e]].apply(null,whereObjList)}return 0===whereObjList.length?null:whereObjList[0]},R=function(e){if(e.layer==s){if(e.newData&&0===e.newData.totalFeatures){n.getElementsByClassName("tc-modal-body")[0].classList.remove("tc-loading");W(C("query.msgNoResults"),TC.Consts.msgType.INFO);return}var t=e.layer.features;if(t.length>0){d.zoomToFeatures(t);j(t.length>1?t.reduce(function(e,t,n){return(e instanceof Array?e:[e.data]).concat([t.data])}):[t[0].data],s,p)}else{n.getElementsByClassName("tc-modal-body")[0].classList.remove("tc-loading");W("No hay resultados",TC.Consts.msgType.INFO)}e.layer.map.off(TC.Consts.event.LAYERUPDATE,R)}};const D=()=>p;var I=function(e){const t=this;var n=e;new Promise(function(e,t){TC.control.ResultsPanel?e(TC.control.ResultsPanel):TC.loadJS(!0,TC.apiLocation+"TC/control/ResultsPanel",function(){e(TC.control.ResultsPanel)})}).then(function(e){if(l){l.options.save.fileName=n+".xls";l.options.titles.max=l.getLocaleString("geo.trk.chart.exp")}else{var s=function(e){l=e;delete dust.cache[l.CLASS+"-table"];l.template[l.CLASS+"-table"]=function(){dust.register(l.CLASS+"-table",e);function e(e,l){return e.w('<table class="table"><thead>').s(l.get(["columns"],!1),l,{block:t},{}).w("</thead><tbody>").s(l.get(["results"],!1),l,{block:n},{}).w("</tbody></table>")}e.__dustBody=!0;function t(e,t){return e.w("<th>").f(t.getPath(!0,[]),t,"h").w("</th>")}t.__dustBody=!0;function n(e,t){return e.w('<tr title="').h("i18n",t,{},{$key:"zoomToFeature"}).w('" data-id="').f(t.get(["Id"],!1),t,"h").w('" data-index="').f(t.get(["$idx"],!1),t,"h").w('" class="tc-selectable">').h("iterate",t,{block:s},{on:t.getPath(!0,[])}).w("</tr>")}n.__dustBody=!0;function s(e,t){return e.h("select",t,{block:i},{key:t.get(["key"],!1)})}s.__dustBody=!0;function i(e,t){return e.w('<td class="').f(t.get(["key"],!1),t,"h",["removeAccents","downcase"]).w('">').h("startsWith",t,{else:o,block:a},{key:t.get(["value"],!1),value:"http"}).w("</td>")}i.__dustBody=!0;function o(e,t){return e.p("tc-ctl-wfsquery-table-object",t,t.rebase(t.get(["value"],!1)),{})}o.__dustBody=!0;function a(e,t){return e.w('<a href="').f(t.get(["value"],!1),t,"h").w('" target="_blank" title="').h("i18n",t,{},{$key:"linkInNewWindow"}).w('">').h("i18n",t,{},{$key:"open"}).w("</a>")}a.__dustBody=!0;return e};l.options.titles.max=l.getLocaleString("geo.trk.chart.exp")},o=d.getControlsByClass(TC.control.ControlContainer);0==o.length?d.addControl("ResultsPanel",{content:"table",titles:{main:"",max:""},save:{fileName:n+".xls"},download:()=>{i(t,D)}}).then(s):o[0].addControl("ResultsPanel",{content:"table",titles:{main:"",max:""},save:{fileName:n+".xls"},download:()=>{i(t,D)},position:"right"}).then(s)}});var i=function(e,t){const n=e;new Promise(function(e,t){w?e(w):n.map.addControl("FeatureDownloadDialog").then(t=>{e(w=t)})}).then(function(e){var l={title:t()};l=!0!==n.options.displayElevation?Object.assign({},l,{elevation:Object.assign({},n.map.elevation&&n.map.elevation.options,n.options.displayElevation)}):Object.assign({},l,{elevation:n.map.elevation&&n.map.elevation.options});s.features.some(function(e){return TC.feature.Polygon&&e instanceof TC.feature.Polygon||TC.feature.MultiPolygon&&e instanceof TC.feature.MultiPolygon})&&(l=Object.assign({},l,{excludedFormats:["GPX"]}));e.open(s.features,l)})}},j=function(e,t,s){l.div.querySelector(".prpanel-title-text").innerText=l.getLocaleString(e.length>1?"query.titleResultPaneMany":"query.titleResultPanelOne",{numero:e.length,layerName:s});l.div.classList.add("tc-ctl-wfsquery-results");n.parentElement.removeChild(n);l.openTable({data:e,css:{trClass:"trClass",tdClass:"tdClass",thClass:"thClass"},callback:function(n){l.maximize();console.log("render del panel de resultados");var s=n.querySelectorAll(".table>tbody>tr"),i=_internalGetDataTypes(),o=1;for(var a in e[0]){if(i.hasOwnProperty(a)){if(i[a].type&&!(i[a].type instanceof Object)&&(i[a].type.indexOf("int")>=0||i[a].type.indexOf("float")>=0||i[a].type.indexOf("double")>=0||i[a].type.indexOf("long")>=0||i[a].type.indexOf("decimal")>=0))for(var r=n.querySelectorAll("td:nth-child("+o+")"),c=0;c<r.length;c++)r[c].classList.add("tc-numeric");i[a].type&&i[a].type instanceof Object&&console.log("aki lo que sea")}o++}for(a=0;a<s.length;a++){s[a].addEventListener("click",function(e){e.stopPropagation();var n=this.dataset.index;null!=n&&t.map.zoomToFeatures([t.features[n]])});s[a].addEventListener("mouseenter",function(){var e=this.dataset.index;if(null!=e){var n=t.features[e];n&&n.geometry&&H(n);var l=this.querySelectorAll("td.value div");l.length>0?l.forEach(function(e){e.offsetWidth<e.scrollWidth&&(e.title=e.innerText)}):this.querySelectorAll("td").forEach(function(e){e.offsetWidth<e.scrollWidth&&(e.title=e.innerText)})}});s[a].addEventListener("mouseleave",function(){var e=this.dataset.index;if(null!=e){var n=t.features[e];n&&n.geometry&&V(n)}})}n.querySelectorAll(".complexAttr label,.complexAttr input").forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation()})});n.querySelectorAll(".complexAttr input").forEach(function(e){e.addEventListener("change",function(e){this.checked&&this.nextElementSibling.querySelectorAll("td.value div").forEach(function(e){e.offsetWidth<e.scrollWidth&&(e.title=e.innerText)})})});TC.browserFeatures.touch()&&TC.Util.swipe(l.div,"disable")}})},M=function(){return whereObjList.length>0},W=function(e,n){var l=t.getElementsByClassName("tc-ctl-wfsquery-message")[0];if(i)clearTimeout(i);else{l.innerHTML=e;switch(n){case TC.Consts.msgType.INFO:l.classList.add("tc-msg-info");break;case TC.Consts.msgType.WARNING:l.classList.add("tc-msg-warning");break;case TC.Consts.msgType.ERROR:default:l.classList.add("tc-msg-error")}l.classList.remove(TC.Consts.classes.HIDDEN)}i=setTimeout(function(){i=null;l.classList.add(TC.Consts.classes.HIDDEN)},3e3)},$=function(e,t,n){TC.UI.autocomplete.call(e,{minLength:3,target:n,source:function(e,n){var l=this;l.target.innerHTML='<li><a class="tc-ctl-search-li-loading" href="#">'+C("searching")+'<span class="tc-ctl-search-loading-spinner tc-ctl-search-loading"></span></a></li>';l.target.classList.remove("tc-hidden");o&&window.clearTimeout(o);o=window.setTimeout(async function(){var s=await async function(e,t){var n=Object.assign({},h);n.version="1.1.0";switch(document.querySelector(".tc-ctl-wfsquery.tc-ctl-wfsquery-text input:checked").value){case"start":t+="*";break;case"contains":case"eq":t="*"+t+"*";break;case"end":t="*"+t}a&&a.abort();let l=(a=new AbortController).signal;try{var s=await y.toolProxification.fetchJSON(g,{data:TC.Util.WFSQueryBuilder([f],TC.filter.like(e,t,void 0,void 0,void 0,!1),n,"JSON",!1),contentType:"application/xml",method:"POST",signal:l});if(s.features&&s.features.length>0){var i;1===s.features.length&&(i=[e.split("/").reduce(function(e,t){return e[t.substring(t.indexOf(":")+1)]},s.features[0].properties)]);s.features.length>1&&(i=s.features.reduce(function(t,n){if(t&&t instanceof Array)return t.indexOf(n.properties[e])<0?t.concat(e.split("/").reduce(function(e,t){return e[t.substring(t.indexOf(":")+1)]},n.properties)):t},[]));return i}return[]}catch(e){return null}}(t,e);s&&(s.length?n(s):l.target.classList.add("tc-hidden"))},500)},callback:function(t){e.value=t.currentTarget.dataset.value;this.target.classList.add("tc-hidden")},buildHTML:function(t){var n=e.value;this.target.style.maxHeight="";return t.results.length>1?t.results.reduce(function(e,t,l){return(l>1?e:U(e,n))+U(t,n)}):U(t.results[0],n)}});e.addEventListener("targetCleared.autocomplete",function(){n.classList.add("tc-hidden")});e.addEventListener("keypress",function(t){13==t.which&&TC.UI.autocomplete.call(e,"clear")});e.addEventListener("search",function(t){0===e.value.length&&TC.UI.autocomplete.call(e,"clear")});e.addEventListener("input",function(t){0===e.value.length&&TC.UI.autocomplete.call(e,"clear")})},U=function(e,t){t=new RegExp(t,"gi");return'<li><a href="#" data-value="'+e+'">'+e.replace(t,"<b>$&</b>")+"</a></li>"},H=function(e){var t=function(e,t){var n;t instanceof TC.feature.Point?n=e.addPoint(t.getCoords()):t instanceof TC.feature.Polyline?n=e.addPolyline(t.getCoords()):t instanceof TC.feature.Polygon?n=e.addPolygon(t.getCoords()):t instanceof TC.feature.MultiPolygon?n=e.addMultiPolygon(t.getCoords()):t instanceof TC.feature.MultiPolyline&&(n=e.addMultiPolyline(t.getCoords()));return n};if(e.layer){var n=e.layer.map.getLayer("WFSQueryResultsHighlight");n?t(n,e):e.layer.map.addLayer({id:"WFSQueryResultsHighlight",type:TC.Consts.layerType.VECTOR,owner:self,stealth:!0,styles:b()},function(n){t(n,e)})}},V=function(e){var t=e.layer.map.getLayer("WFSQueryResultsHighlight");t&&t.clearFeatures()};e.render=function(e){return TC.Control.prototype.render.call(this,e)};e.register=function(e){const t=this;d=e;return new Promise(function(l){e.on(TC.Consts.event.LAYERERROR,e=>{if(e.layer===s){n.getElementsByClassName("tc-modal-body")[0].classList.remove("tc-loading");if(e.reason===TC.Consts.WFSErrors.MAX_NUM_FEATURES)W(C("query.msgTooManyResults",{limit:e.data.limit}),TC.Consts.msgType.WARNING);else{console.error(e.reason);W(C("query.errorUndefined"),TC.Consts.msgType.ERROR)}}});dust.helpers.countif=function(e,t,n,l){l=l||{};var s=n.block,i=n.else,o=l.key||t.current(),a=null!=l.excludedKeys?l.excludedKeys.split(","):null,r=0;for(var c in o)(null==a||a.indexOf(c)<0)&&r++;r>0?e=e.render(s,t):i&&(e=e.render(i,t));return e};TC._hbs&&TC._hbs.registerHelper("countif",function(e,t){const n=t?t.split(","):[];let l=0;for(let t in e)n.indexOf(t)<0&&l++;return l>0});TC.Control.prototype.register.call(t,d).then(function(e){var t=e;m=function(){var e=function(e,t){return this.options.styles&&this.options.styles[e]&&this.options.styles[e][t]||TC.Cfg.styles[e][t]};return{polygon:{fillColor:e.bind(t,"polygon","fillColor"),fillOpacity:e.bind(t,"polygon","fillOpacity"),strokeColor:e.bind(t,"polygon","strokeColor"),strokeOpacity:e.bind(t,"polygon","strokeOpacity"),strokeWidth:e.bind(t,"polygon","strokeWidth")},line:{strokeColor:e.bind(t,"line","strokeColor"),strokeOpacity:e.bind(t,"line","strokeOpacity"),strokeWidth:e.bind(t,"line","strokeWidth")},point:{radius:e.bind(t,"point","radius"),height:e.bind(t,"point","height"),width:e.bind(t,"point","width"),fillColor:e.bind(t,"point","fillColor"),fillOpacity:e.bind(t,"point","fillOpacity"),strokeColor:e.bind(t,"point","strokeColor"),strokeWidth:e.bind(t,"point","strokeWidth"),fontSize:e.bind(t,"point","fontSize"),fontColor:e.bind(t,"point","fontColor"),labelOutlineColor:e.bind(t,"point","labelOutlineColor"),labelOutlineWidth:e.bind(t,"point","labelOutlineWidth"),label:e.bind(t,"point","label"),angle:e.bind(t,"point","angle")}}};b=function(){var e={polygon:TC.Util.extend(!0,{},TC.Cfg.styles.polygon,{fillColor:"#0099FF",fillOpacity:1,strokeColor:"#0099FF",strokeWidth:2}),line:TC.Util.extend(!0,{},TC.Cfg.styles.line,{strokeColor:"#0099FF",strokeWidth:2}),point:TC.Util.extend(!0,{},TC.Cfg.styles.point,{strokeColor:"#0099FF"})};return t.highlightStyles?{polygon:TC.Util.extend(!0,{},e.polygon,t.highlightStyles.polygon?t.highlightStyles.polygon:{}),line:TC.Util.extend(!0,{},e.line,t.highlightStyles.line?t.highlightStyles.line:{}),point:TC.Util.extend(!0,{},e.point,t.highlightStyles.point?t.highlightStyles.point:{})}:e};r=d.options.locale;C=function(e,t){return TC.Util.getLocaleString(r,e,t)};d.ready(function(){d.getControlsByClass("TC.control.WorkLayerManager").forEach(function(e){e.addLayerTool({renderFn:function(e,n){const l=t.CLASS+"-btn-open";let s=e.querySelector("button."+l);if(!s){const i=d.getLayer(n);if(i.type===TC.Consts.layerType.WMS||i.type===TC.Consts.layerType.WFS){const o=t.getLocaleString("query.tooltipMagnifBtn");(s=document.createElement("button")).innerHTML=o;s.setAttribute("title",o);s.classList.add(l);s.dataset.layerId=n;e.appendChild(s);if(i.type===TC.Consts.layerType.WMS){s.classList.add(TC.Consts.classes.LOADING);i.getWFSCapabilities().then(e=>{if(e.Operations.GetFeature){var t=i.getDisgregatedLayerNames?i.getDisgregatedLayerNames():i.featureType;(t=t.filter(function(t){return e.FeatureTypes.hasOwnProperty(t.substring(t.indexOf(":")+1))})).length||s.classList.add(TC.Consts.classes.HIDDEN)}else s.classList.add(TC.Consts.classes.HIDDEN)}).catch(()=>s.classList.add(TC.Consts.classes.HIDDEN)).finally(()=>s.classList.remove(TC.Consts.classes.LOADING))}}}return s},updateEvents:[],actionFn:function(){if(this.classList.contains("tc-unavailable")||this.classList.contains("tc-loading"))return;const e=t.map.getLayer(this.dataset.layerId);t.renderModalDialog(e)}})})});l(t)})})};e.renderModalDialog=function(l){const s=this;let i,o;if(l.type===TC.Consts.layerType.WMS){const e=l.getPath();i=e[e.length-1];o=l.getWFSCapabilities()}else{if(l.type!==TC.Consts.layerType.WFS)return;i=l.title;o=l.getCapabilitiesPromise()}let a=new Promise(function(a,r){o.then(function(o){(function(l,s,i,o){const a=this;let r;if(l.getDisgregatedLayerNames){r=[];l.getDisgregatedLayerNames().forEach(function(e,t){var n=l.getPath(e);i.FeatureTypes.hasOwnProperty(e.substring(e.indexOf(":")+1))&&r.push({name:e,title:n[n.length-1]})});r.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0})}else r=l.featureType;e.getRenderedHtml(e.CLASS+"-dialog",{layerName:C("query.titleDialog",{layerName:s}),layers:r},function(e){var l=document.createElement("div");l.insertAdjacentHTML("beforeEnd",e);var s=null;if(l.childNodes.length>0){s=l.firstChild;document.body.appendChild(s)}(t=s.getElementsByClassName("tc-modal-body")[0]).classList.add("tc-loading");TC.Util.showModal(s,{closeCallback:function(){s.parentElement.removeChild(s)}});if(TC.Util.detectIE()){var i=1;switch(!0){case document.body.clientWidth>768&&document.body.clientWidth<document.body.clientHeight:case document.body.clientWidth>1024:i=.8;case document.body.clientWidth>1140:i=.7}t.style.maxHeight=document.body.clientHeight*i-t.nextElementSibling.clientHeight-t.previousElementSibling.clientHeight}n=s;s.getElementsByClassName("tc-button tc-ctl-wlm-btn-launch")[0].addEventListener("click",function(){B.apply(a,[])});o&&o(s)})}).apply(s,[l,i,o,function(e){a(e)}])})});Promise.all([l,a,o]).then(q)}}();
//# sourceMappingURL=../maps/control/WFSQuery.min.js.map