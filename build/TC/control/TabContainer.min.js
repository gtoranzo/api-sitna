TC.control=TC.control||{};TC.control.Container||TC.syncLoadJS(TC.apiLocation+"TC/Control/Container");TC.control.TabContainer=function(){TC.control.Container.apply(this,arguments);var t=this._classSelector="."+this.CLASS;this._selectors={TAB:t+"-tab",RADIOBUTTON:"input[type=radio][name=sctnr-sel]",ELEMENT:t+"-elm"}};TC.inherit(TC.control.TabContainer,TC.control.Container);!function(){var t=TC.control.TabContainer.prototype;t.CLASS="tc-ctl-tctr";t.template=function(){dust.register(t.CLASS,e);function e(t,e){return t.w("<h2>").f(e.get(["title"],!1),e,"h").w('</h2><div class="tc-ctl-tctr-select"><form>').s(e.get(["controls"],!1),e,{block:o},{}).w("</form></div>").s(e.get(["controls"],!1),e,{block:n},{})}e.__dustBody=!0;function o(t,e){return t.w('<label class="tc-ctl-tctr-tab tc-ctl-tctr-tab-').f(e.get(["$idx"],!1),e,"h").w('" style="width:calc(100%/').f(e.get(["$len"],!1),e,"h").w(' - 1px)"><input type="radio" name="sctnr-sel" value="').f(e.get(["$idx"],!1),e,"h").w('" /><span>').f(e.get(["title"],!1),e,"h").w("</span></label>")}o.__dustBody=!0;function n(t,e){return t.w('<div class="tc-ctl-tctr-elm tc-ctl-tctr-elm-').f(e.get(["$idx"],!1),e,"h").w(' tc-hidden"></div>')}n.__dustBody=!0;return e};t.onRenderPromise=function(){const t=this;t.title=t.title||t.getLocaleString(t.options.title||"moreControls");t.div.querySelector("h2").innerHTML=t.title;for(var e=new Array(t.ctlCount),o=0,n=t.controlOptions.length;o<n;o++){var s=t.controlOptions[o],r="",l={};if(void 0!==s.name&&void 0!==s.options){console.log("Gestionamos config de tabContainer antiguo");r=s.name;l=s.options}else l=s[r=Object.keys(s).filter(t=>"title"!==t)[0]];e[o]=t.map.addControl(r,TC.Util.extend({id:t.uids[o],div:t.div.querySelector("."+t.CLASS+"-elm-"+o)},l))}var c=function(e,o){e.renderPromise().then(function(){const n=t.getLocaleString(t.controlOptions[o].title)||e.div.querySelector("h2").innerHTML;var s=e.div;do{s=s.parentElement}while(s&&!s.matches(t._classSelector));s.querySelector(t._selectors.TAB+"-"+o+" span").innerHTML=n})};Promise.all(e).then(function(e){for(var o=0,n=e.length;o<n;o++){var s=e[o];s.containerControl=t;c(s,o)}})};t.render=function(t){const e=this;return e._set1stRenderPromise(e.renderData({title:e.title,controls:e.controlOptions},function(){var t=function(t){for(var o=this;o&&!o.matches(e._selectors.TAB);)o=o.parentElement;var n,s=[];const r=o.querySelector(e._selectors.RADIOBUTTON),l=r.value,c=e.div.querySelectorAll(e._selectors.ELEMENT);if(e._oldValue===l&&e.options.deselectable){setTimeout(function(){r.checked=!1},0);e._oldValue=null;n=null;s=c}else{c.forEach(function(t){t.matches(e._selectors.ELEMENT+"-"+l)?n=t:s.push(t)});e._oldValue=l}if(n&&n.classList.contains(TC.Consts.classes.COLLAPSED)){n.classList.remove(TC.Consts.classes.COLLAPSED);new MutationObserver(function(t){t.forEach(function(t){t.target.classList.contains(TC.Consts.classes.COLLAPSED)&&t.target.classList.remove(TC.Consts.classes.COLLAPSED)})}).observe(n,{attributes:!0})}n&&n.classList.remove(TC.Consts.classes.HIDDEN);s.forEach(function(t){t.classList.add(TC.Consts.classes.HIDDEN)});r.checked=!0};e.div.querySelectorAll("span").forEach(function(e){e.addEventListener(TC.Consts.event.CLICK,t)});"number"==typeof e.defaultSelection&&t.call(e.div.querySelectorAll(e._selectors.RADIOBUTTON)[e.defaultSelection])}))}}();
//# sourceMappingURL=../maps/control/TabContainer.min.js.map