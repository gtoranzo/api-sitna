TC.control=TC.control||{};TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control");!function(){TC.control.SWCacheClient=function(){TC.Control.apply(this,arguments);this.serviceWorkerEnabled=!1};TC.inherit(TC.control.SWCacheClient,TC.Control);var e=TC.control.SWCacheClient.prototype;e.CLASS="tc-ctl-swcc";e.register=function(e){const r=this,t=TC.Control.prototype.register.call(r,e);r._swPromise=new Promise(function(e,t){navigator.serviceWorker?navigator.serviceWorker.register("tc-cb-service-worker.js",{scope:"./"}).then(function(t){r.serviceWorkerEnabled=!0;t.installing?e(t.installing):t.waiting?e(t.waiting):t.active&&e(t.active);console.log(t.scope,"register")},function(e){r.serviceWorkerEnabled=!1;t();console.error("Could not register service worker: "+e)}):t(new Error("Browser does not support service workers"))});return t};e.getServiceWorker=function(){return this._swPromise?this._swPromise:Promise.reject(new Error("No service worker available"))};var r=function(e,r,t,n,o){navigator.serviceWorker.addEventListener("message",function i(c){if(c.data.name===t){c.data.action===n&&c.data.event===o?e(t):"error"===c.data.event&&r();navigator.serviceWorker.removeEventListener("message",i)}})};e.createCache=function(e,t){var n=this;return new Promise(function(o,i){n.getServiceWorker().then(function(n){var c=t||{};r(o,i,e,"create","cached");n.postMessage({action:"create",name:e,list:c.urlList||[],silent:c.silent})},function(){o(!1)})})};e.deleteCache=function(e,t){var n=this;return new Promise(function(o,i){n.getServiceWorker().then(function(n){var c=t||{};r(o,i,e,"delete","deleted");n.postMessage({action:"delete",name:e,silent:c.silent})},function(){o(!1)})})}}();
//# sourceMappingURL=../maps/control/SWCacheClient.min.js.map