var TC=TC||{};TC.UI=TC.UI||{};!function(){var t=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e=function(){var t={},n=!1,i=0;if("[object Boolean]"===Object.prototype.toString.call(arguments[0])){n=arguments[0];i++}for(var r=function(i){for(var r in i)i.hasOwnProperty(r)&&(n&&"[object Object]"===Object.prototype.toString.call(i[r])?t[r]=e(t[r],i[r]):t[r]=i[r])};i<arguments.length;i++)r(arguments[i]);return t},n=function(e,n,r){var o=[];if(n)if(r.buildHTML)r.target.innerHTML=r.buildHTML({results:n});else{for(var a=0;a<n.length;a++){var l=n[a];t(l)?o[o.length]='<li><a href="'+r.link+encodeURIComponent(l.id)+'">'+l.label+"</a></li>":o[o.length]='<li><a href="'+r.link+encodeURIComponent(l)+'">'+l+"</a></li>"}var c=document.createElement("template");c.innerHTML=o.join("");r.target.appendChild(c.content?c.content.firstChild:c.firstChild)}null!==r.callback&&"function"==typeof r.callback&&i(r);e.value.length>0?e.dispatchEvent(new CustomEvent("targetUpdated.autocomplete")):e.dispatchEvent(new CustomEvent("targetCleared.autocomplete"))},i=function(t){t.target.querySelectorAll("li a").forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation();e.preventDefault();t.callback(e)})})},r=function(t,e){e.innerHTML="";t.dispatchEvent(new CustomEvent("targetCleared.autocomplete"))},o=function(e){var i,o,a,l,c=e.target,u=c.getAttribute("id"),s=c.getAttribute("autocomplete");if(s){var p=this.settings,f=s.openXHR;if((i=c.value).length<p.minLength)r(c,p.target);else if(Array.isArray(p.source)){o=p.source.sort().filter(function(e){l=p.matchFromStart?new RegExp("^"+i,"i"):new RegExp(i,"i");a=t(e)?e.label:e;return l.test(a)});n(c,o,p)}else if("function"==typeof p.source){if(arguments&&arguments[0]&&[37,39].indexOf(arguments[0].keyCode)>-1)return;p.source(i,function(t){n(c,t,p)})}else{const t=function(t){if(p.cancelRequests){f[u]?f[u].abort():p.target.innerHTML='<li><a href="#">Searching...</a></li>';f[u]=t}},e=function(){p.cancelRequests&&(f[u]=null)};var g=new XMLHttpRequest;g.overrideMimeType("application/json");g.open("GET",url,!0);g.onload=function(){e();var t=JSON.parse(req.responseText);n(c,t,p)};g.onerror=function(t){e()};t(g);g.send(null)}}},a={init:function(t){var n=this,i={settings:null};i.settings=e({},i.defaults,t);n.setAttribute("autocomplete",!0);var a=i.settings;n.removeEventListener("keyup",o);n.addEventListener("keyup",o);n.parentNode.querySelector(".ui-input-clear")&&n.parentNode.querySelector(".ui-input-clear").addEventListener("click",function(t){r(n,a.target)});return n},update:function(t,n){this.getAttribute("autocomplete")&&(this.settings=e(this.settings,n));return this},clear:function(t){this.getAttribute("autocomplete")&&r(this,this.settings.target);return this},destroy:function(){if(this.getAttribute("autocomplete")){r(this,this.settings.target);this.removeAttribute("autocomplete");this.removeEventListener("keyup",o)}return this}};TC.UI.autocomplete=function(t){if(a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof t||!t){this.settings=arguments[0];return a.init.apply(this,arguments)}}}();
//# sourceMappingURL=../maps/ui/autocomplete.min.js.map
