{"version":3,"sources":["tcmap.js"],"names":["loadjs","l","c","f","u","o","e","n","t","length","splice","s","call","success","error","h","r","i","document","async","numRetries","before","a","replace","test","createElement","rel","href","src","onload","onerror","onbeforeload","type","sheet","cssText","code","defaultPrevented","head","appendChild","trim","push","ready","done","reset","isDefined","TC","version","apiLocation","script","currentScript","scripts","getElementsByTagName","getAttribute","substr","lastIndexOf","Consts","OLNS","PROJ4JSOBJ","GEOGRAPHIC","UTM","OLD_BROWSER_ALERT","CLUSTER_ANIMATION_DURATION","ZOOM_ANIMATION_DURATION","URL_MAX_LENGTH","METER_PRECISION","DEGREE_PRECISION","EXTENT_TOLERANCE","SRSDOWNLOAD_GEOJSON_KML","url","SPLIT_REGEX","OL","OL_CONNECTOR","TEMPLATING","TEMPLATING_I18N","TEMPLATING_OVERRIDES","PROJ4JS","EPSG","LOCALFORAGE","D3C3","CESIUM","JSNLOG","ERROR_LOGGER","PDFMAKE","JSONPACK","UA_PARSER","HASH","DRAGGABILLY","URL_POLYFILL","PROMISE_POLYFILL","classes","MAP","POINT","MARKER","VISIBLE","HIDDEN","COLLAPSED","CHECKED","DISABLED","ACTIVE","DEFAULT","LASTCHILD","TRANSPARENT","DROP","LOADING","IPAD_IOS7_FIX","INFO","WARNING","ERROR","THREED","msgType","msgErrorMode","TOAST","CONSOLE","EMAIL","event","MAPLOAD","MAPREADY","BEFORELAYERADD","LAYERADD","LAYERREMOVE","LAYERORDER","BEFORELAYERUPDATE","LAYERUPDATE","LAYERERROR","BEFOREBASELAYERCHANGE","BASELAYERCHANGE","BEFOREUPDATE","UPDATE","BEFOREZOOM","ZOOM","BEFOREUPDATEPARAMS","UPDATEPARAMS","VECTORUPDATE","FEATUREADD","BEFOREFEATURESADD","FEATURESADD","FEATUREREMOVE","FEATURESCLEAR","FEATURESIMPORT","FEATURESIMPORTERROR","BEFORETILELOAD","TILELOAD","TILELOADERROR","CONTROLADD","CONTROLACTIVATE","CONTROLDEACTIVATE","BEFORECONTROLRENDER","CONTROLRENDER","BEFORELAYOUTLOAD","LAYOUTLOAD","LAYERVISIBILITY","LAYEROPACITY","FEATURECLICK","NOFEATURECLICK","FEATUREOVER","FEATUREOUT","BEFOREFEATUREINFO","FEATUREINFO","NOFEATUREINFO","FEATUREINFOERROR","CLICK","MOUSEUP","MOUSEMOVE","MOUSELEAVE","STARTLOADING","STOPLOADING","EXTERNALSERVICEADDED","ZOOMTO","PROJECTIONCHANGE","VIEWCHANGE","TERRAINPROVIDERADD","TERRAINPROVIDERREMOVE","OVERVIEWBASELAYERCHANGE","POPUP","layer","IDENA_ORTHOPHOTO","IDENA_BASEMAP","IDENA_CADASTER","IDENA_CARTO","IDENA_ORTHOPHOTO2018","IDENA_ORTHOPHOTO2017","IDENA_ORTHOPHOTO2014","IDENA_ORTHOPHOTO2012","IDENA_DYNBASEMAP","IDENA_DYNORTHOPHOTO","IDENA_DYNORTHOPHOTO2018","IDENA_DYNORTHOPHOTO2017","IDENA_DYNORTHOPHOTO2014","IDENA_DYNORTHOPHOTO2012","IDENA_DYNCARTO","IDENA_BW_RELIEF","IDENA_BASEMAP_ORTHOPHOTO","IGN_ES_CARTO","IGN_ES_BASEMAP","IGN_ES_BASEMAP_GREY","IGN_ES_RELIEF","IGN_ES_ORTHOPHOTO","IGN_ES_LIDAR","IGN_ES_DYNCARTO","IGN_ES_DYNBASEMAP","IGN_ES_DYNBASEMAP_GREY","IGN_ES_DYNRELIEF","IGN_ES_DYNORTHOPHOTO","IGN_ES_DYNLIDAR","IGN_FR_CARTO","IGN_FR_BASEMAP","IGN_FR_RELIEF","IGN_FR_ORTHOPHOTO","IGN_FR_DYNCARTO","IGN_FR_DYNBASEMAP","IGN_FR_DYNRELIEF","IGN_FR_DYNORTHOPHOTO","OSM","CARTO_VOYAGER","CARTO_LIGHT","CARTO_DARK","MAPBOX_STREETS","MAPBOX_SATELLITE","BLANK","text","API_ERROR","APP_ERROR","layerType","WMS","WMTS","WFS","VECTOR","KML","GPX","GML","GEOJSON","GROUP","geom","MULTIPOINT","POLYLINE","POLYGON","MULTIPOLYLINE","MULTIPOLYGON","CIRCLE","RECTANGLE","searchType","CADASTRAL","COORDINATES","MUNICIPALITY","COUNCIL","LOCALITY","STREET","NUMBER","URBAN","COMMONWEALTH","ROAD","ROADPK","PLACENAME","PLACENAMEMUNICIPALITY","mapSearchType","GENERIC","comparison","EQUAL_TO","NOT_EQUAL_TO","LESS_THAN","GREATER_THAN","LESS_THAN_EQUAL_TO","GREATER_THAN_EQUAL_TO","LIKE","logicalOperator","AND","OR","WMTSEncoding","KVP","RESTFUL","mimeType","PNG","JPEG","JSON","XML","format","GML2","GML3","TOPOJSON","WKT","WFSErrors","GetFeatureNotAvailable","LayersNotAvailable","NoLayers","NoValidLayers","QueryNotAvailable","CapabilitiesParseError","NumMaxFeatures","GetCapabilities","Indeterminate","NoFeatures","visibility","NOT_VISIBLE","NOT_VISIBLE_AT_RESOLUTION","HAS_VISIBLE","view","PRINTING","units","DEGREES","METERS","Defaults","clusterRadii","imageRatio","proxy","crs","utmCrs","geoCrs","initialExtent","maxExtent","baselayerExtent","resolutions","pointBoundsRadius","extentMargin","mouseWheelZoom","attribution","oldBrowserAlert","notifyApplicationErrors","loggingErrorsEnabled","maxErrorCount","locale","screenSize","pixelTolerance","maxResolutionError","toastDuration","avgTileSize","availableBaseLayers","id","title","matrixSet","layerNames","encoding","isDefault","hideTree","thumbnail","fallbackLayer","overviewMapLayer","ignoreProxification","baseLayers","defaultBaseLayer","workLayers","controls","loadingIndicator","navBar","scaleBar","scale","scaleSelector","overviewMap","basemapSelector","TOC","coordinates","legend","popup","search","allowedSearchTypes","municipality","urban","street","number","cadastral","measure","streetView","featureInfo","featureTools","layout","styles","point","fillColor","fillOpacity","strokeColor","strokeWidth","radius","labelOutlineWidth","labelOutlineColor","labelOffset","fontColor","fontSize","marker","anchor","width","height","line","polygon","cluster","feature","count","features","result","Math","round","sqrt","label","selection","Array","prototype","map","fun","this","TypeError","Object","len","res","thisArg","arguments","proxify","Cfg","prevent","proxyExceptions","indexOf","Util","isSameOrigin","window","location","protocol","encodeURIComponent","isDebug","_showLoadFailedError","mapObj","Map","get","querySelector","getLocaleString","options","syncLoadJS","_sendRequest","callbackErrorFn","req","XMLHttpRequest","open","onreadystatechange","readyState","status","responseText","send","reqResult","is404","d","ah","documentElement","insertBefore","body","getHead","prefixes","touch","inputTypeColor","urlParser","browserFeatures","undefined","DocumentTouch","query","prefix","join","matchMedia","matches","elm","setAttribute","value","URL","jQuery","_jQueryIsLoaded","$","_oldWhen","when","newArgs","arg","Promise","newArg","Deferred","then","val","resolve","catch","err","reject","apply","patchJQuery","NodeList","forEach","finally","callback","ctor","constructor","tool","Proxification","ajax","method","data","paramArray","key","toString","cache","Date","now","request","contentType","setRequestHeader","msg","statusText","responseData","responseType","parse","DOMParser","parseFromString","getResponseHeader","addEventListener","build","mapLibrary","Control","ol","VERSION","loadJSInOrder","condition","loadJS","addCrossOriginAttr","path","scriptEl","crossOrigin","inOrder","notCrossOrigin","urls","isArray","name","getName","split","reverse","slice","toLowerCase","toReduce","filter","index","reduce","prev","curr","urlObj","from","scr","cloneNode","detectIE","pathsNotFound","loadCSS","projectionDataCache","getProjectionData","Number","isNaN","parseInt","projData","fetchJSON","Error","loadProjDef","getDef","proj4js","match","exec","fromHTTPURIToURN","proj4","defs","loadProj4Def","def","proj","register","isFunction","obj","loadDef","epsgCode","urnCode","urnxCode","gmlCode","axisUnawareDef","extend","axis","idx","number_result","results","loadDefResponse","templating","olConnector","capabilities","WFScapabilities","alert","prompt","newValue","confirm","accept","cancel","console","wrap","self","parent","getMap","_promise","Layer","EventTarget","getLayer","setLayer","olLayer","Raster","Vector","ctl","control","Click","ScaleBar","NavBar","NavBarHome","Coordinates","Search","Measure","OverviewMap","FeatureInfo","Popup","GeometryFeatureInfo","Geolocation","Draw","Modify","CacheBuilder","Edit","ResultsPanel","Feature","Geometry","inherit","uids","getUID","pluses","raw","decoded","decodeURIComponent","cookie","expires","days","setDate","getDate","String","toUTCString","domain","secure","parts","decode","cookies","shift","browser","getBrowser","acceptedBrowserVersions","isSupported","item","expired","i18n","loadResources","navigator","userAgent","JL","defaultAjaxUrl","onError","errorCount","errorMsg","errorObj","apiError","lineNumber","column","reason","message","stack","filename","lineno","colno","fatalException","appUrl","apiVersion","prevState","getPreviousMapState","contactEmail"],"mappings":"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","sourcesContent":["/**\r\n * LoadJS descargado de https://github.com/muicss/loadjs\r\n * @version 3.5.2\r\n */\r\nloadjs = function () { var l = function () { }, c = {}, f = {}, u = {}; function o(e, n) { if (e) { var t = u[e]; if (f[e] = n, t) for (; t.length;)t[0](e, n), t.splice(0, 1) } } function s(e, n) { e.call && (e = { success: e }), n.length ? (e.error || l)(n) : (e.success || l)(e) } function h(t, r, i, c) { var o, s, e = document, n = i.async, f = (i.numRetries || 0) + 1, u = i.before || l, a = t.replace(/^(css|img)!/, \"\"); c = c || 0, /(^css!|\\.css$)/.test(t) ? (o = !0, (s = e.createElement(\"link\")).rel = \"stylesheet\", s.href = a) : /(^img!|\\.(png|gif|jpg|svg)$)/.test(t) ? (s = e.createElement(\"img\")).src = a : ((s = e.createElement(\"script\")).src = t, s.async = void 0 === n || n), !(s.onload = s.onerror = s.onbeforeload = function (e) { var n = e.type[0]; if (o && \"hideFocus\" in s) try { s.sheet.cssText.length || (n = \"e\") } catch (e) { 18 != e.code && (n = \"e\") } if (\"e\" == n && (c += 1) < f) return h(t, r, i, c); r(t, n, e.defaultPrevented) }) !== u(t, s) && e.head.appendChild(s) } function t(e, n, t) { var r, i; if (n && n.trim && (r = n), i = (r ? t : n) || {}, r) { if (r in c) throw \"LoadJS\"; c[r] = !0 } !function (e, r, n) { var t, i, c = (e = e.push ? e : [e]).length, o = c, s = []; for (t = function (e, n, t) { if (\"e\" == n && s.push(e), \"b\" == n) { if (!t) return; s.push(e) } --c || r(s) }, i = 0; i < o; i++)h(e[i], t, n) }(e, function (e) { s(i, e), o(r, e) }, i) } return t.ready = function (e, n) { return function (e, t) { e = e.push ? e : [e]; var n, r, i, c = [], o = e.length, s = o; for (n = function (e, n) { n.length && c.push(e), --s || t(c) }; o--;)r = e[o], (i = f[r]) ? n(r, i) : (u[r] = u[r] || []).push(n) }(e, function (e) { s(n, e) }), t }, t.done = function (e) { o(e, []) }, t.reset = function () { c = {}, f = {}, u = {} }, t.isDefined = function (e) { return e in c }, t }();\r\n\r\nvar TC = TC || {};\r\n/*\r\n * Initialization\r\n */\r\nTC.version = '2.0.0';\r\n(function () {\r\n    if (!TC.apiLocation) {\r\n        var src;\r\n        var script;\r\n        if (document.currentScript) {\r\n            script = document.currentScript;\r\n        }\r\n        else {\r\n            var scripts = document.getElementsByTagName('script');\r\n            script = scripts[scripts.length - 1];\r\n        }\r\n        var src = script.getAttribute('src');\r\n        TC.apiLocation = src.substr(0, src.lastIndexOf('/') + 1);\r\n    }\r\n})();\r\n\r\nif (!TC.Consts) {\r\n    TC.Consts = {};\r\n    TC.Consts.OLNS = 'ol';\r\n    TC.Consts.PROJ4JSOBJ = 'proj4';\r\n    TC.Consts.GEOGRAPHIC = 'geographic';\r\n    TC.Consts.UTM = 'UTM';\r\n    TC.Consts.OLD_BROWSER_ALERT = 'TC.oldBrowserAlert';\r\n    TC.Consts.CLUSTER_ANIMATION_DURATION = 200;\r\n    TC.Consts.ZOOM_ANIMATION_DURATION = 300;\r\n    TC.Consts.URL_MAX_LENGTH = 2048;\r\n    TC.Consts.METER_PRECISION = 0;\r\n    TC.Consts.DEGREE_PRECISION = 5;\r\n    TC.Consts.EXTENT_TOLERANCE = 0.9998;/*URI: debido al redondeo del extente en el hash se obtiene un nivel de resolución mayor al debido. Con este valor definimos una tolerancia para que use una resolución si es muy muy muy próxima*/\r\n    TC.Consts.SRSDOWNLOAD_GEOJSON_KML = \"EPSG:4326\";\r\n    TC.Consts.url = {\r\n        SPLIT_REGEX: /([^:]*:)?\\/\\/([^:]*:?[^@]*@)?([^:\\/\\?]*):?([^\\/\\?]*)/,\r\n        OL: 'lib/ol/build/ol-sitna',\r\n        OL_CONNECTOR: 'TC/ol/ol',\r\n        TEMPLATING: 'lib/dust/dust-full-helpers.min.js',\r\n        TEMPLATING_I18N: 'lib/dust/dustjs-i18n.min.js',\r\n        TEMPLATING_OVERRIDES: 'lib/dust/dust.overrides.js',\r\n        PROJ4JS: 'lib/proj4js/proj4-src.js',\r\n        EPSG: 'https://epsg.io/',\r\n        LOCALFORAGE: TC.apiLocation + 'lib/localForage/localforage.min.js',\r\n        D3C3: TC.apiLocation + 'lib/d3c3/d3c3.min.js',\r\n        CESIUM: TC.apiLocation + 'lib/cesium/release/Cesium.js',\r\n        JSNLOG: 'lib/jsnlog/jsnlog.min.js',\r\n        ERROR_LOGGER: TC.apiLocation + 'errors/logger.ashx',\r\n        PDFMAKE: TC.apiLocation + 'lib/pdfmake/pdfmake-fonts.min.js',\r\n        JSONPACK: 'lib/jsonpack/jsonpack.min.js',\r\n        UA_PARSER: 'lib/ua-parser/ua-parser.min.js',\r\n        HASH: 'lib/jshash/md5-min.js',\r\n        DRAGGABILLY: 'lib/draggabilly/draggabilly.pkgd',\r\n        URL_POLYFILL: 'lib/polyfill/url.js',\r\n        PROMISE_POLYFILL: 'lib/polyfill/promise/polyfill.min.js'\r\n    };\r\n    TC.Consts.classes = {\r\n        MAP: 'tc-map',\r\n        POINT: 'tc-point',\r\n        MARKER: 'tc-marker',\r\n        VISIBLE: 'tc-visible',\r\n        HIDDEN: 'tc-hidden',\r\n        COLLAPSED: 'tc-collapsed',\r\n        CHECKED: 'tc-checked',\r\n        DISABLED: 'tc-disabled',\r\n        ACTIVE: 'tc-active',\r\n        DEFAULT: 'tc-default',\r\n        LASTCHILD: 'tc-lastchild',\r\n        TRANSPARENT: 'tc-transparent',\r\n        DROP: 'tc-drop',\r\n        LOADING: 'tc-loading',\r\n        IPAD_IOS7_FIX: 'tc-ipad-ios7-fix',\r\n        INFO: 'tc-msg-info',\r\n        WARNING: 'tc-msg-warning',\r\n        ERROR: 'tc-msg-error',\r\n        THREED: 'tc-threed'\r\n    };\r\n    TC.Consts.msgType = {\r\n        INFO: 'info',\r\n        WARNING: 'warning',\r\n        ERROR: 'error'\r\n    };\r\n    TC.Consts.msgErrorMode = {\r\n        TOAST: 'toast',\r\n        CONSOLE: 'console',\r\n        EMAIL: 'email'\r\n    };\r\n    TC.Consts.event = {\r\n        /**\r\n         * Se lanza cuando el mapa ha cargado todas sus capas iniciales y todos sus controles\r\n         * @event mapload\r\n         */\r\n        MAPLOAD: 'mapload.tc',\r\n        MAPREADY: 'mapready.tc',\r\n        BEFORELAYERADD: 'beforelayeradd.tc',\r\n        LAYERADD: 'layeradd.tc',\r\n        LAYERREMOVE: 'layerremove.tc',\r\n        LAYERORDER: 'layerorder.tc',\r\n        BEFORELAYERUPDATE: 'beforelayerupdate.tc',\r\n        LAYERUPDATE: 'layerupdate.tc',\r\n        LAYERERROR: 'layererror.tc',\r\n        BEFOREBASELAYERCHANGE: 'beforebaselayerchange.tc',\r\n        BASELAYERCHANGE: 'baselayerchange.tc',\r\n        BEFOREUPDATE: 'beforeupdate.tc',\r\n        UPDATE: 'update.tc',\r\n        BEFOREZOOM: 'beforezoom.tc',\r\n        ZOOM: 'zoom.tc',\r\n        BEFOREUPDATEPARAMS: 'beforeupdateparams.tc',\r\n        UPDATEPARAMS: 'updateparams.tc',\r\n        VECTORUPDATE: 'vectorupdate.tc',\r\n        FEATUREADD: 'featureadd.tc',\r\n        BEFOREFEATURESADD: 'beforefeaturesadd.tc',\r\n        FEATURESADD: 'featuresadd.tc',\r\n        FEATUREREMOVE: 'featureremove.tc',\r\n        FEATURESCLEAR: 'featuresclear.tc',\r\n        FEATURESIMPORT: 'featuresimport.tc',\r\n        FEATURESIMPORTERROR: 'featuresimporterror.tc',\r\n        BEFORETILELOAD: 'beforetileload.tc',\r\n        TILELOAD: 'tileload.tc',\r\n        TILELOADERROR: 'tileloaderror.tc',\r\n        CONTROLADD: 'controladd.tc',\r\n        CONTROLACTIVATE: 'controlactivate.tc',\r\n        CONTROLDEACTIVATE: 'controldeactivate.tc',\r\n        BEFORECONTROLRENDER: 'beforecontrolrender.tc',\r\n        CONTROLRENDER: 'controlrender.tc',\r\n        BEFORELAYOUTLOAD: 'beforelayoutload.tc',\r\n        LAYOUTLOAD: 'layoutload.tc',\r\n        LAYERVISIBILITY: 'layervisibility.tc',\r\n        LAYEROPACITY: 'layeropacity.tc',\r\n        FEATURECLICK: 'featureclick.tc',\r\n        NOFEATURECLICK: 'nofeatureclick.tc',\r\n        FEATUREOVER: 'featureover.tc',\r\n        FEATUREOUT: 'featureout.tc',\r\n        BEFOREFEATUREINFO: 'beforefeatureinfo.tc',\r\n        FEATUREINFO: 'featureinfo.tc',\r\n        NOFEATUREINFO: 'nofeatureinfo.tc',\r\n        FEATUREINFOERROR: 'featureinfoerror.tc',\r\n        CLICK: 'click',\r\n        MOUSEUP: 'mouseup',\r\n        MOUSEMOVE: 'mousemove',\r\n        MOUSELEAVE: 'mouseleave',\r\n        STARTLOADING: 'startloading.tc',\r\n        STOPLOADING: 'stoploading.tc',\r\n        EXTERNALSERVICEADDED: 'externalserviceadded.tc',\r\n        ZOOMTO: 'zoomto.tc',\r\n        PROJECTIONCHANGE: 'projectionchange.tc',\r\n        VIEWCHANGE: 'viewchange.tc',\r\n        TERRAINPROVIDERADD: 'terrainprovideradd.tc',\r\n        TERRAINPROVIDERREMOVE: 'terrainproviderremove.tc',\r\n        OVERVIEWBASELAYERCHANGE: 'overviewbaselayerchange.tc',\r\n        POPUP: 'popup.tc'\r\n    };\r\n    TC.Consts.layer = {\r\n        IDENA_ORTHOPHOTO: 'ortofoto',\r\n        IDENA_BASEMAP: 'mapabase',\r\n        IDENA_CADASTER: 'catastro',\r\n        IDENA_CARTO: 'cartografia',\r\n        IDENA_ORTHOPHOTO2018: 'ortofoto2018',\r\n        IDENA_ORTHOPHOTO2017: 'ortofoto2017',\r\n        IDENA_ORTHOPHOTO2014: 'ortofoto2014',\r\n        IDENA_ORTHOPHOTO2012: 'ortofoto2012',\r\n        IDENA_DYNBASEMAP: 'mapabase_dinamico',\r\n        IDENA_DYNORTHOPHOTO: 'ortofoto_dinamico',\r\n        IDENA_DYNORTHOPHOTO2018: 'ortofoto2018_dinamico',\r\n        IDENA_DYNORTHOPHOTO2017: 'ortofoto2017_dinamico',\r\n        IDENA_DYNORTHOPHOTO2014: 'ortofoto2014_dinamico',\r\n        IDENA_DYNORTHOPHOTO2012: 'ortofoto2012_dinamico',\r\n        IDENA_DYNCARTO: 'cartografia_dinamico',\r\n        IDENA_BW_RELIEF: 'relieve_bn',\r\n        IDENA_BASEMAP_ORTHOPHOTO: 'base_orto',\r\n\r\n        IGN_ES_CARTO: \"ign-raster\",\r\n        IGN_ES_BASEMAP: \"ign-base\",\r\n        IGN_ES_BASEMAP_GREY: \"ign-base-gris\",\r\n        IGN_ES_RELIEF: \"ign-mtn\",\r\n        IGN_ES_ORTHOPHOTO: \"ign-pnoa\",\r\n        IGN_ES_LIDAR: \"ign-lidar\",\r\n\r\n        IGN_ES_DYNCARTO: \"ign-raster-dyn\",\r\n        IGN_ES_DYNBASEMAP: \"ign-base-dyn\",\r\n        IGN_ES_DYNBASEMAP_GREY: \"ign-base-gris-dyn\",\r\n        IGN_ES_DYNRELIEF: \"ign-mtn-dyn\",\r\n        IGN_ES_DYNORTHOPHOTO: \"ign-pnoa-dyn\",\r\n        IGN_ES_DYNLIDAR: \"ign-lidar-dyn\",\r\n\r\n        IGN_FR_CARTO: \"ign-fr-cartes\",\r\n        IGN_FR_BASEMAP: \"ign-fr-base\",\r\n        IGN_FR_RELIEF: \"ign-fr-estompage\",\r\n        IGN_FR_ORTHOPHOTO: \"ign-fr-orto\",\r\n\r\n        IGN_FR_DYNCARTO: \"ign-fr-cartes-dyn\",\r\n        IGN_FR_DYNBASEMAP: \"ign-fr-base-dyn\",\r\n        IGN_FR_DYNRELIEF: \"ign-fr-estompage-dyn\",\r\n        IGN_FR_DYNORTHOPHOTO: \"ign-fr-orto-dyn\",\r\n\r\n        OSM: 'osm',\r\n        CARTO_VOYAGER: 'carto_voyager',\r\n        CARTO_LIGHT: 'carto_light',\r\n        CARTO_DARK: 'carto_dark',\r\n        MAPBOX_STREETS: 'mapbox_streets',\r\n        MAPBOX_SATELLITE: 'mapbox_satellite',\r\n\r\n        BLANK: 'ninguno'\r\n    };\r\n    TC.Consts.text = {\r\n        API_ERROR: 'Error API SITNA',\r\n        APP_ERROR: 'Error de aplicación'\r\n    };\r\n    /**\r\n     * Colección de identificadores de tipo de capa.\r\n     * No se deberían modificar las propiedades de esta clase.\r\n     * @class TC.consts.LayerType\r\n     * @static\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WMS.\r\n     * @property WMS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WMTS.\r\n     * @property WMTS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WFS.\r\n     * @property WFS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo KML.\r\n     * @property KML\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo GPX.\r\n     * @property GPX\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo vectorial. Este tipo de capa es la que se utiliza para dibujar marcadores.\r\n     * @property VECTOR\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de grupo.\r\n     * @property GROUP\r\n     * @type string\r\n     * @final\r\n     */\r\n    TC.Consts.layerType = {\r\n        WMS: 'WMS',\r\n        WMTS: 'WMTS',\r\n        WFS: 'WFS',\r\n        VECTOR: 'vector',\r\n        KML: 'KML',\r\n        GPX: 'GPX',\r\n        GML: 'GML',\r\n        GEOJSON: 'GeoJSON',\r\n        GROUP: 'group'\r\n    };\r\n    TC.Consts.geom = {\r\n        POINT: 'point',\r\n        MULTIPOINT: 'multipoint',\r\n        POLYLINE: 'polyline',\r\n        POLYGON: 'polygon',\r\n        MULTIPOLYLINE: 'multipolyline',\r\n        MULTIPOLYGON: 'multipolygon',\r\n        CIRCLE: 'circle',\r\n        RECTANGLE: 'rectangle'\r\n    };\r\n    TC.Consts.searchType = {\r\n        CADASTRAL: 'cadastral',\r\n        COORDINATES: 'coordinates',\r\n        MUNICIPALITY: 'municipality',\r\n        COUNCIL: 'council',\r\n        LOCALITY: 'locality',\r\n        STREET: 'street',\r\n        NUMBER: 'number',\r\n        URBAN: 'urban',\r\n        COMMONWEALTH: 'commonwealth',\r\n        ROAD: 'road',\r\n        ROADPK: 'roadpk',\r\n        PLACENAME: 'placename',\r\n        PLACENAMEMUNICIPALITY: 'placenamemunicipality'\r\n    };\r\n    TC.Consts.mapSearchType = {\r\n        MUNICIPALITY: TC.Consts.searchType.MUNICIPALITY,\r\n        COUNCIL: TC.Consts.searchType.COUNCIL,\r\n        URBAN: TC.Consts.searchType.URBAN,\r\n        COMMONWEALTH: TC.Consts.searchType.COMMONWEALTH,\r\n        GENERIC: 'generic'\r\n    };\r\n    TC.Consts.comparison = {\r\n        EQUAL_TO: '==',\r\n        NOT_EQUAL_TO: '!=',\r\n        LESS_THAN: '<',\r\n        GREATER_THAN: '>',\r\n        LESS_THAN_EQUAL_TO: '=<',\r\n        GREATER_THAN_EQUAL_TO: '>=',\r\n        LIKE: 'is'\r\n    };\r\n    TC.Consts.logicalOperator = {\r\n        AND: 'and',\r\n        OR: 'or'\r\n    };\r\n    TC.Consts.WMTSEncoding = {\r\n        KVP: 'KVP',\r\n        RESTFUL: 'RESTful'\r\n    };\r\n    TC.Consts.mimeType = {\r\n        PNG: 'image/png',\r\n        JPEG: 'image/jpeg',\r\n        JSON: 'application/json',\r\n        GEOJSON: 'application/vnd.geo+json',\r\n        KML: 'application/vnd.google-earth.kml+xml',\r\n        GML: 'application/gml+xml',\r\n        GPX: 'application/gpx+xml',\r\n        XML: 'application/xml'\r\n    };\r\n    TC.Consts.format = {\r\n        JSON: 'JSON',\r\n        KML: 'KML',\r\n        GML: 'GML',\r\n        GML2: 'GML2',\r\n        GML3: 'GML2',\r\n        GEOJSON: 'GeoJSON',\r\n        TOPOJSON: 'TopoJSON',\r\n        GPX: 'GPX',\r\n        WKT: 'WKT'\r\n    };\r\n    //enumerado de errores y warninqs derivados de descargas, getfeatures\r\n    TC.Consts.WFSErrors = {\r\n        GetFeatureNotAvailable: \"GetFeatureNotAvailable\",\r\n        LayersNotAvailable: \"LayersNotAvailable\",\r\n        NoLayers: \"NoLayers\",\r\n        NoValidLayers: \"noValidLayers\",\r\n        QueryNotAvailable: \"QueryNotAvailable\",\r\n        CapabilitiesParseError: \"CapabilitiesParseError\",\r\n        NumMaxFeatures: \"NumMaxFeatures\",\r\n        GetCapabilities: \"GetCapabilities\",\r\n        Indeterminate: \"Indeterminate\",\r\n        NoFeatures: \"NoFeatures\"\r\n    }\r\n    /**\r\n     * Colección de identificadores de estados de visibilidad.\r\n     * No se deberían modificar las propiedades de esta clase.\r\n     * @class TC.consts.Visibility\r\n     * @static\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible.\r\n     * @property NOT_VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible a la resolución actual.\r\n     * @property NOT_VISIBLE_AT_RESOLUTION\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible pero que tiene nodos hijos visibles.\r\n     * @property HAS_VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo visible.\r\n     * @property VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    TC.Consts.visibility = {\r\n        NOT_VISIBLE: 0,\r\n        NOT_VISIBLE_AT_RESOLUTION: 1,\r\n        HAS_VISIBLE: 2,\r\n        VISIBLE: 4\r\n    };\r\n\r\n    TC.Consts.view = {\r\n        DEFAULT: 0,\r\n        THREED: 1,\r\n        PRINTING: 2\r\n    };\r\n\r\n    TC.Consts.units = {\r\n        DEGREES: \"degrees\",\r\n        METERS: \"m\"\r\n    };\r\n\r\n    TC.Consts.MARKER = 'marker';\r\n\r\n    TC.Defaults = (function () {\r\n\r\n        var clusterRadii = {};\r\n        var getClusterRadius = function (feature) {\r\n            var count = feature.features.length;\r\n            var result = clusterRadii[count];\r\n            if (!result) {\r\n                result = 2 + Math.round(Math.sqrt(count) * 5);\r\n                clusterRadii[count] = result;\r\n            }\r\n            return result;\r\n        };\r\n\r\n        return {\r\n            imageRatio: 1.05,\r\n            proxy: '',\r\n\r\n            crs: 'EPSG:25830',\r\n            utmCrs: 'EPSG:25830',\r\n            geoCrs: 'EPSG:4326',\r\n            initialExtent: [541084.221, 4640788.225, 685574.4632, 4796618.764],\r\n            maxExtent: false,\r\n            baselayerExtent: [480408, 4599748, 742552, 4861892],\r\n            resolutions: [1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, .5, .25],\r\n            pointBoundsRadius: 30,\r\n            extentMargin: 0.2,\r\n            mouseWheelZoom: true,\r\n            attribution: '<a href=\"http://sitna.navarra.es/\" target=\"_blank\">SITNA</a>',\r\n            oldBrowserAlert: true,\r\n            notifyApplicationErrors: false,\r\n            loggingErrorsEnabled: true,\r\n            maxErrorCount: 10,\r\n\r\n            locale: 'es-ES',\r\n\r\n            view: TC.Consts.view.DEFAULT,\r\n\r\n            screenSize: 20,\r\n            pixelTolerance: 10, // Used in GFI requests\r\n            maxResolutionError: 0.01, // Max error ratio to consider two resolutions equivalent\r\n\r\n            toastDuration: 5000,\r\n\r\n            avgTileSize: 31000,\r\n\r\n            availableBaseLayers: [\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BASEMAP,\r\n                    title: 'Mapa base',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830extended',\r\n                    layerNames: 'mapabase',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: true,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap.png',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNBASEMAP,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO,\r\n                    title: 'Ortofoto máxima actualidad',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto_maxima_actualidad',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2018,\r\n                    title: 'Ortofoto 2018',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2018',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2018.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2017,\r\n                    title: 'Ortofoto 2017',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2017',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2017.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2014,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830reduced',\r\n                    layerNames: 'ortofoto2014',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2014.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2012,\r\n                    title: 'Ortofoto 2012',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2012',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2012.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_CARTO,\r\n                    title: 'Cartografía topográfica 2017',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'mapaTopografico',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-bta.png',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNCARTO,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_CADASTER,\r\n                    title: 'Catastro',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'catastro,regionesFronterizas',\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-cadaster.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BW_RELIEF,\r\n                    title: 'Relieve',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'IDENA:mapa_relieve_bn',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-relief_bw.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BASEMAP_ORTHOPHOTO,\r\n                    title: 'Mapa base/ortofoto',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'mapaBase_orto',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-base_ortho.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNBASEMAP,\r\n                    title: 'Mapa base',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'mapaBase,regionesFronterizas',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_maxima_actualidad',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2018',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2018.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2017',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2017.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2014',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2014.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,\r\n                    title: 'Ortofoto 2012',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2012',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2012.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNCARTO,\r\n                    title: 'Cartografía topográfica',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'MTNa5_BTA',\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-bta.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_CARTO,\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    title: \"Cartografía raster \\r\\n (IGN ES)\",\r\n                    url: \"//www.ign.es/wmts/mapa-raster\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"MTN\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNCARTO,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_BASEMAP,\r\n                    title: \"Callejero \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/ign-base\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"IGNBaseTodo\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-basemap_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNBASEMAP,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_BASEMAP_GREY,\r\n                    title: \"Callejero gris \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/ign-base\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"IGNBase-gris\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-basemap_grey_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_RELIEF,\r\n                    title: \"Relieve \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/mdt\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"Relieve\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-relief_ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNRELIEF,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_ORTHOPHOTO,\r\n                    title: \"Ortofoto PNOA\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/pnoa-ma\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"OI.OrthoimageCoverage\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-orthophoto_pnoa.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_LIDAR,\r\n                    title: \"Modelo digital LIDAR (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"http://wmts-mapa-lidar.idee.es/lidar\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"EL.GridCoverageDSM\",\r\n                    matrixSet: \"GoogleMapsCompatible\",\r\n                    format: \"image/png\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-lidar_ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNLIDAR,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNBASEMAP,\r\n                    title: 'Mapa base \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/ign-base',\r\n                    layerNames: 'IGNBaseTodo',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,\r\n                    title: 'Callejero gris \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/ign-base',\r\n                    layerNames: 'IGNBaseTodo-gris',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap_grey_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/pnoa-ma',\r\n                    layerNames: 'OI.OrthoimageCoverage',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto_pnoa.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNCARTO,\r\n                    title: 'Cartografía topográfica \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/mapa-raster',\r\n                    layerNames: 'mtn_rasterizado',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNRELIEF,\r\n                    title: 'Relieve \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/mdt',\r\n                    layerNames: 'relieve',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-relief_ign.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNLIDAR,\r\n                    title: 'Modelo digital LIDAR (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//wms-mapa-lidar.idee.es/lidar',\r\n                    layerNames: 'EL.GridCoverage',\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-lidar_ign.jpg\",\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_CARTO,\r\n                    title: \"Cartografía raster \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNCARTO,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_BASEMAP,\r\n                    title: \"Mapa base \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGN\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-base-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNBASEMAP,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_RELIEF,\r\n                    title: \"Relieve \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/png\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-estom-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNRELIEF,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_ORTHOPHOTO,\r\n                    title: \"Ortofoto \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"ORTHOIMAGERY.ORTHOPHOTOS\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-ortho-fr-ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNCARTO,\r\n                    title: 'Cartografía raster \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP,\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNBASEMAP,\r\n                    title: 'Mapa base \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGN\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-base-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNRELIEF,\r\n                    title: 'Relieve \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"ELEVATION.ELEVATIONGRIDCOVERAGE\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-estom-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"HR.ORTHOIMAGERY.ORTHOPHOTOS\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-ortho-fr-ign.jpg\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.OSM,\r\n                    title: 'OSM',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/osm/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'osm',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-osm.png',\r\n                    overviewMapLayer: TC.Consts.layer.OSM\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_VOYAGER,\r\n                    title: 'CARTO Voyager',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'voyager',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-voyager.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_LIGHT,\r\n                    title: 'CARTO light',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'light_all',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-light.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_DARK,\r\n                    title: 'CARTO dark',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'dark_all',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-dark.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.MAPBOX_STREETS,\r\n                    title: 'Mapbox Streets',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/mapbox/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'streets',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-mapbox-streets.png',\r\n                    overviewMapLayer: TC.Consts.layer.MAPBOX_STREETS\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.MAPBOX_SATELLITE,\r\n                    title: 'Mapbox Satellite',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/mapbox/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'satellite',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-mapbox-satellite.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.MAPBOX_STREETS\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.BLANK,\r\n                    title: 'Mapa en blanco',\r\n                    type: TC.Consts.layerType.VECTOR\r\n                }\r\n            ],\r\n\r\n            baseLayers: [\r\n                TC.Consts.layer.IDENA_BASEMAP,\r\n                TC.Consts.layer.IDENA_ORTHOPHOTO,\r\n                TC.Consts.layer.IDENA_CADASTER,\r\n                TC.Consts.layer.IDENA_CARTO\r\n            ],\r\n\r\n            defaultBaseLayer: TC.Consts.layer.IDENA_BASEMAP,\r\n\r\n            workLayers: [],\r\n\r\n            controls: {\r\n                loadingIndicator: true,\r\n                navBar: false,\r\n                scaleBar: false,\r\n                scale: false,\r\n                scaleSelector: false,\r\n                overviewMap: false,\r\n                basemapSelector: false,\r\n                attribution: true,\r\n                TOC: false,\r\n                coordinates: true,\r\n                legend: false,\r\n                popup: false,\r\n                search: {\r\n                    url: '//idena.navarra.es/ogc/wfs',\r\n                    allowedSearchTypes: {\r\n                        coordinates: {},\r\n                        municipality: {},\r\n                        urban: {},\r\n                        street: {},\r\n                        number: {},\r\n                        cadastral: {}\r\n                    }\r\n                },\r\n                measure: false,\r\n                streetView: false,\r\n                featureInfo: true,\r\n                featureTools: true\r\n            },\r\n\r\n            layout: null,\r\n\r\n            styles: {\r\n                point: {\r\n                    fillColor: '#000000',\r\n                    fillOpacity: 0.1,\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    radius: 6,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    labelOffset: [0, -16],\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                marker: {\r\n                    classes: [\r\n                        TC.Consts.classes.MARKER + 1,\r\n                        TC.Consts.classes.MARKER + 2,\r\n                        TC.Consts.classes.MARKER + 3,\r\n                        TC.Consts.classes.MARKER + 4,\r\n                        TC.Consts.classes.MARKER + 5\r\n                    ],\r\n                    anchor: [.5, 1],\r\n                    width: 32,\r\n                    height: 32,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    labelOffset: [0, -32],\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                line: {\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                polygon: {\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    fillColor: '#000000',\r\n                    fillOpacity: 0.3,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                cluster: {\r\n                    point: {\r\n                        fillColor: '#333366',\r\n                        fillOpacity: 0.6,\r\n                        radius: getClusterRadius,\r\n                        label: '${features.length}',\r\n                        fontColor: \"#fff\",\r\n                        fontSize: 9\r\n                    }\r\n                },\r\n                selection: {\r\n                    point: {\r\n                        fillColor: '#0000ff',\r\n                        fillOpacity: 0.5,\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        radius: 6,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        labelOffset: [0, -16],\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    },\r\n                    line: {\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    },\r\n                    polygon: {\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        fillColor: '#000000',\r\n                        fillOpacity: .3,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    })();\r\n\r\n    (function () {\r\n        if (!Array.prototype.map) {\r\n            Array.prototype.map = function (fun /*, thisArg */) {\r\n                \"use strict\";\r\n\r\n                if (this === void 0 || this === null)\r\n                    throw new TypeError();\r\n\r\n                var t = Object(this);\r\n                var len = t.length >>> 0;\r\n                if (typeof fun !== \"function\")\r\n                    throw new TypeError();\r\n\r\n                var res = new Array(len);\r\n                var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n                for (var i = 0; i < len; i++) {\r\n                    // NOTE: Absolute correctness would demand Object.defineProperty\r\n                    //       be used.  But this method is fairly new, and failure is\r\n                    //       possible only if Object.prototype or Array.prototype\r\n                    //       has a property |i| (very unlikely), so use a less-correct\r\n                    //       but more portable alternative.\r\n                    if (i in t)\r\n                        res[i] = fun.call(thisArg, t[i], i, t);\r\n                }\r\n\r\n                return res;\r\n            };\r\n        }\r\n\r\n        /* \r\n         * proxify: returns cross-origin safe URL\r\n         */\r\n        TC.proxify = function (url) {\r\n            url = url.trim();\r\n            var result = url;\r\n            if (TC.Cfg.proxy) {\r\n                var prevent = false;\r\n                if (TC.Cfg.proxyExceptions) {\r\n                    for (var i = 0; i < TC.Cfg.proxyExceptions.length; i++) {\r\n                        if (url.indexOf(TC.Cfg.proxyExceptions[i]) > -1) {\r\n                            prevent = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!prevent && !TC.Util.isSameOrigin(url)) {\r\n                    if (typeof TC.Cfg.proxy == \"function\") {\r\n                        result = TC.Cfg.proxy(url);\r\n                    } else {\r\n                        result = TC.Cfg.proxy;\r\n                        if (url.substr(0, 4) != \"http\") result += window.location.protocol;\r\n                        result += encodeURIComponent(url);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n\r\n        var getHead = function () {\r\n            var result;\r\n            var d = document;\r\n            var ah = d.getElementsByTagName(\"head\");\r\n            if (ah.length === 0) {\r\n                result = d.createElement(\"head\");\r\n                d.documentElement.insertBefore(result, document.body);\r\n            }\r\n            else {\r\n                result = ah[0];\r\n            }\r\n            return result;\r\n        };\r\n\r\n        if (typeof TC.isDebug != \"boolean\") {\r\n            TC.isDebug = true;\r\n        };\r\n\r\n        var _showLoadFailedError = function (url) {\r\n            const mapObj = TC.Map.get(document.querySelector('.' + TC.Consts.classes.MAP));\r\n            TC.error(\r\n                TC.Util.getLocaleString(mapObj.options.locale, \"urlFailedToLoad\",\r\n                    { url: url }),\r\n                [TC.Consts.msgErrorMode.TOAST, TC.Consts.msgErrorMode.EMAIL],\r\n                \"Error al cargar \" + url);\r\n        };\r\n\r\n        TC.syncLoadJS = function (url) {\r\n            var _sendRequest = function (url, callbackErrorFn) {\r\n                var req = new XMLHttpRequest();\r\n                req.open(\"GET\", url, false); // 'false': synchronous.\r\n                var result;\r\n\r\n                req.onreadystatechange = function (e) {\r\n                    if (req.readyState === 4) {\r\n                        if (req.status === 404) {\r\n                            result = false;\r\n                            callbackErrorFn(true);\r\n                        } else if (req.status !== 200) {\r\n                            callbackErrorFn();\r\n                            result = false;\r\n                        } else {\r\n                            result = req.responseText;\r\n                        }\r\n                    }\r\n                };\r\n\r\n\r\n                try {\r\n                    req.send(null);\r\n                } catch (error) {\r\n                    result = false;\r\n                    callbackErrorFn();\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            if (!/(\\.js|\\/)$/i.test(url)) { // Si pedimos un archivo sin extensión se la ponemos según el entorno\r\n                url = url + (TC.isDebug ? '.js' : '.min.js');\r\n            }\r\n\r\n            var reqResult = _sendRequest(url, function (is404) {\r\n                if (is404) {\r\n                    _showLoadFailedError(url);\r\n                    return false;\r\n                } else {\r\n                    return _sendRequest(url, function () {\r\n                        _showLoadFailedError(url);\r\n                    });\r\n                }\r\n            });\r\n\r\n            if (reqResult) {\r\n                var script = document.createElement(\"script\");\r\n                script.type = \"text/javascript\";\r\n                script.text = reqResult;\r\n                getHead().appendChild(script);\r\n            }\r\n        };\r\n\r\n        const prefixes = ['', '-webkit-', '-moz-', '-o-', '-ms-'];\r\n        const randomText = ':-)';\r\n        const urlString = 'http://sitna.tracasa.es/';\r\n        var touch;\r\n        var inputTypeColor;\r\n        var urlParser;\r\n        TC.browserFeatures = {\r\n            touch: function () {\r\n                if (touch === undefined) {\r\n                    if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\r\n                        touch = true;\r\n                        return true;\r\n                    }\r\n                    const query = prefixes\r\n                        .map(function (prefix) { return '(' + prefix + 'touch-enabled)'; })\r\n                        .join();\r\n                    touch = matchMedia(query).matches;\r\n                }\r\n                return touch;\r\n            },\r\n            inputTypeColor: function () {\r\n                if (inputTypeColor === undefined) {\r\n                    const elm = document.createElement('input');\r\n                    elm.setAttribute('type', 'color');\r\n                    inputTypeColor = elm.type !== 'text' && 'style' in elm;\r\n                    if (inputTypeColor) {\r\n                        elm.value = randomText;\r\n                        inputTypeColor = elm.value !== randomText;\r\n                    }\r\n                }\r\n                return inputTypeColor;\r\n            },\r\n            urlParser: function () {\r\n                if (urlParser === undefined) {\r\n                    try {\r\n                        // have to actually try use it, because Safari defines a dud constructor\r\n                        const url = new URL(urlString);\r\n                        urlParser = url.href === urlString;\r\n                    } catch (e) {\r\n                        urlParser = false;\r\n                    }\r\n                }\r\n                return urlParser;\r\n            }\r\n        };\r\n\r\n        const patchJQuery = function () {\r\n            // Parche para soportar $.when\r\n            $._oldWhen = $.when;\r\n            $.when = function () {\r\n                const newArgs = new Array(arguments.length);\r\n                for (var i = 0; i < arguments.length; i++) {\r\n                    const arg = newArgs[i] = arguments[i];\r\n                    if (arg instanceof Promise) {\r\n                        const newArg = $.Deferred();\r\n                        arg\r\n                            .then(function (val) {\r\n                                newArg.resolve(val)\r\n                            })\r\n                            .catch(function (err) {\r\n                                newArg.reject(err);\r\n                            });\r\n                        newArgs[i] = newArg;\r\n                    }\r\n                }\r\n                return $._oldWhen.apply(this, newArgs);\r\n            };\r\n        };\r\n\r\n        if (window.jQuery) {\r\n            TC._jQueryIsLoaded = true;\r\n            patchJQuery();\r\n        }\r\n        //else {\r\n        //    Object.defineProperty(window, 'jQuery', {\r\n        //        configurable: true,\r\n        //        get: fnction () {\r\n        //            console.trace();\r\n        //            Object.defineProperty(window, 'jQuery', { writable: true });\r\n        //            TC.syncLoadJS(TC.Consts.url.JQUERY);\r\n        //            patchJQuery();\r\n        //            TC._jQueryIsLoaded = true;\r\n        //            return jQuery;\r\n        //        }\r\n        //    });\r\n        //    Object.defineProperty(window, '$', {\r\n        //        configurable: true,\r\n        //        get: function () {\r\n        //            console.trace();\r\n        //            Object.defineProperty(window, '$', { writable: true });\r\n        //            TC.syncLoadJS(TC.Consts.url.JQUERY);\r\n        //            patchJQuery();\r\n        //            TC._jQueryIsLoaded = true;\r\n        //            return $;\r\n        //        }\r\n        //    });\r\n        //}\r\n\r\n        if (!('Promise' in window)) {\r\n            TC.syncLoadJS(TC.apiLocation + TC.Consts.url.PROMISE_POLYFILL);\r\n        }\r\n        // Polyfill para NodeList.forEach\r\n        if (window.NodeList && !NodeList.prototype.forEach) {\r\n            NodeList.prototype.forEach = Array.prototype.forEach;\r\n        }\r\n        if (!('finally' in Promise.prototype)) {\r\n            // Muchos polyfills de Promise no implementan finally, lo hacemos aquí en ese caso\r\n            Promise.prototype.finally = function (callback) {\r\n                const ctor = this.constructor;\r\n                return this.then(\r\n                    function (val) {\r\n                        return ctor.resolve(callback()).then(function () {\r\n                            return value;\r\n                        });\r\n                    },\r\n                    function (err) {\r\n                        return ctor.resolve(callback()).then(function () {\r\n                            return ctor.reject(err);\r\n                        });\r\n                    }\r\n                );\r\n            };\r\n        }\r\n\r\n        if (!TC.tool || !TC.tool.Proxification) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/tool/Proxification');\r\n        }\r\n\r\n        // Transformación de petición AJAX de jQuery a promesa nativa\r\n        TC.ajax = function (options) {\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                const method = options.method || 'GET';\r\n                var data;\r\n                if (options.data) {\r\n                    if (typeof options.data === 'string') {\r\n                        data = options.data;\r\n                    }\r\n                    else if (typeof options.data === 'object') {\r\n                        const paramArray = [];\r\n                        for (var key in options.data) {\r\n                            paramArray[paramArray.length] = key + '=' + options.data[key].toString();\r\n                        }\r\n                        data = paramArray.join('&');\r\n                    }\r\n                }\r\n                var url = options.url;\r\n                if (method === 'GET') {\r\n                    url = url + '?' + data;\r\n                }\r\n                if (options.cache === false) {\r\n                    url += (url.indexOf('?') < 0 ? '&' : '?') + 'ts=' + Date.now();\r\n                }\r\n                const request = new XMLHttpRequest();\r\n                request.open(method, options.url);\r\n\r\n                if (options.contentType || typeof options.contentType === 'boolean') {\r\n                    if (options.contentType) {\r\n                        request.setRequestHeader('Content-Type', options.contentType + '; charset=UTF-8');\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n                }\r\n\r\n                request.onreadystatechange = function (e) {\r\n                    if (request.readyState === 4) { // DONE\r\n                        if (request.status !== 200) {\r\n                            reject({\r\n                                status: request.status,\r\n                                msg: request.statusText,\r\n                                url: options.url\r\n                            });\r\n                        } else {\r\n                            var responseData;\r\n                            try {\r\n                                switch (options.responseType) {\r\n                                    case TC.Consts.mimeType.JSON:\r\n                                        responseData = JSON.parse(request.responseText);\r\n                                        break;\r\n                                    case TC.Consts.mimeType.XML:\r\n                                        responseData = new DOMParser().parseFromString(request.responseText, 'application/xml');\r\n                                        break;\r\n                                    default:\r\n                                        responseData = request.responseText;\r\n                                        break;\r\n                                }\r\n                                resolve({ data: responseData, contentType: request.getResponseHeader(\"Content-type\") });\r\n                            }\r\n                            catch (error) {\r\n                                reject(error);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n\r\n                try {\r\n                    request.send(method === 'POST' ? data : null);\r\n                } catch (error) {\r\n                    reject(error);\r\n                }\r\n            });\r\n        };\r\n\r\n        // Completamos los datos de versión\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            var build;\r\n            var mapLibrary = 'Unknown library';\r\n            var OL = 'OpenLayers';\r\n            if (TC.Control) {\r\n                build = 'Compiled';\r\n                if (window.ol) {\r\n                    mapLibrary = OL + ' ' + ol.VERSION;\r\n                }\r\n            }\r\n            else {\r\n                build = 'On demand';\r\n                mapLibrary = OL;\r\n            }\r\n            TC.version = TC.version + ' (' + build + '; ' + mapLibrary + '; @ ' + TC.apiLocation + ')';\r\n        });\r\n\r\n        TC.loadJSInOrder = function (condition, url, callback) {\r\n            TC.loadJS(condition, url, callback, true);\r\n        };\r\n\r\n        const addCrossOriginAttr = function (path, scriptEl) {\r\n            if (!TC.Util.isSameOrigin(path)) {\r\n                scriptEl.crossOrigin = \"anonymous\";\r\n            }\r\n        };\r\n\r\n        TC.loadJS = function (condition, url, callback, inOrder, notCrossOrigin) {\r\n            if (arguments.length < 4) {\r\n                inOrder = false;\r\n            }\r\n\r\n            var urls = Array.isArray(url) ? url : [url];\r\n            urls = urls.map(function (elm) {\r\n                if (!/\\.js$/i.test(elm) && elm.indexOf(TC.apiLocation) === 0) { // Si pedimos un archivo sin extensión y es nuestro se la ponemos según el entorno\r\n                    return elm + (TC.isDebug ? '.js' : '.min.js');\r\n                }\r\n                return elm;\r\n            });\r\n\r\n            if (condition) {\r\n                urls = urls instanceof Array ? urls : [urls];\r\n\r\n                var name = \"\";\r\n                const getName = function (path) {\r\n                    return path.split('/').reverse().slice(0, 2).reverse().join('_').toLowerCase();\r\n                };\r\n                if (urls.length > 1) {\r\n                    var toReduce = urls.slice(0).filter(function (path, index) {\r\n                        if (loadjs.isDefined(getName(path))) {\r\n                            urls.splice(index, 1);\r\n                            loadjs.ready(getName(path), callback);\r\n                            return false;\r\n                        } else {\r\n                            return true;\r\n                        }\r\n                    });\r\n                    if (toReduce.length === 1) {\r\n                        name = getName(toReduce[0]);\r\n                    } else if (toReduce.length > 0) {\r\n                        name = toReduce.reduce(function (prev, curr) {\r\n                            return getName(prev) + \"_\" + getName(curr);\r\n                        });\r\n                    }\r\n                } else {\r\n                    name = getName(urls[0]);\r\n                }\r\n\r\n                if (name.length > 0) {\r\n                    if (!loadjs.isDefined(name)) {\r\n                        var options = {\r\n                            async: !inOrder,\r\n                            numRetries: 1\r\n                        };\r\n\r\n                        if (!notCrossOrigin && !TC.Util.detectIE()) {\r\n                            options.before = addCrossOriginAttr;\r\n                        }\r\n\r\n                        loadjs(urls, name, options);\r\n                        loadjs.ready(name, {\r\n                            success: function () {\r\n                                callback();\r\n                            },\r\n                            error: function (pathsNotFound) {\r\n                                _showLoadFailedError(pathsNotFound);\r\n                            }\r\n                        });\r\n                    } else {\r\n                        // Esto vuelve a añadir el script al head si se está pidiendo un script cargado previamente.\r\n                        urls.forEach(function (url) {\r\n                            const urlObj = new URL(url, location.href);\r\n                            const script = Array.from(document.scripts).filter((scr) => scr.src === urlObj.href)[0];\r\n                            if (script) {\r\n                                document.head.appendChild(script.cloneNode());\r\n                            }\r\n                        });\r\n                        loadjs.ready(name, callback);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                callback();\r\n            }\r\n        };\r\n\r\n        TC.loadCSS = function (url) {\r\n            const getName = function (path) {\r\n                return path.split('/').reverse().slice(0, 2).reverse().join('_').toLowerCase();\r\n            };\r\n\r\n            const name = getName(url);\r\n            if (!loadjs.isDefined(name)) {\r\n                loadjs(url, name, {\r\n                    error: function (pathsNotFound) {\r\n                        _showLoadFailedError(pathsNotFound);\r\n                    },\r\n                    numRetries: 1\r\n                });\r\n            } else {\r\n                loadjs.ready(name, {});\r\n            }\r\n        };\r\n\r\n        var projectionDataCache = {};\r\n\r\n        TC.getProjectionData = function (options) {\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                var code = options.crs.substr(options.crs.indexOf(':') + 1);\r\n                if (Number.isNaN(parseInt(code))) {\r\n                    // El CRS no está en modo urn o EPSG\r\n                    code = options.crs.substr(options.crs.lastIndexOf('/') + 1);\r\n                }\r\n                var projData = projectionDataCache[code];\r\n                if (projData) {\r\n                    resolve(projData);\r\n                }\r\n                else {\r\n                    var url = TC.Consts.url.EPSG + '?format=json&q=' + code;\r\n                    const toolProxification = new TC.tool.Proxification(TC.proxify);\r\n                    toolProxification.fetchJSON(url, options).then(function (data) {\r\n                        projectionDataCache[code] = data;\r\n                        resolve(data);\r\n                    }).catch(function (error) {\r\n                        reject(Error(error));\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        TC.loadProjDef = function (options) {\r\n            options = options || {};\r\n            const crs = options.crs;\r\n            const epsgPrefix = 'EPSG:';\r\n            const urnPrefix = 'urn:ogc:def:crs:EPSG::';\r\n            const urnxPrefix = 'urn:x-ogc:def:crs:EPSG:';\r\n            const gmlPrefix = 'http://www.opengis.net/gml/srs/epsg.xml#';\r\n\r\n            const fromHTTPURIToURN = function (name) {\r\n                var match = /http:\\/\\/www\\.opengis\\.net\\/def\\/crs\\/EPSG\\/\\d\\/(\\d{4})/.exec(name);\r\n                if (match && match.length === 2) {\r\n                    return urnPrefix + match[1];\r\n                }\r\n\r\n                return name;\r\n            };\r\n\r\n            var getDef;\r\n            if (!window[TC.Consts.PROJ4JSOBJ]) {\r\n                TC.syncLoadJS(TC.url.proj4js);\r\n            }\r\n            getDef = function (name) {\r\n                name = fromHTTPURIToURN(name);\r\n                return proj4.defs(name);\r\n            };\r\n            const loadProj4Def = function (code, def) {\r\n                proj4.defs(code, def);\r\n                if (window.ol && window.ol.proj) {\r\n                    // https://openlayers.org/en/latest/apidoc/module-ol_proj_proj4.html\r\n                    window.ol.proj.proj4.register(proj4);\r\n                }\r\n            };\r\n            const isFunction = function (obj) {\r\n                return typeof obj === 'function';\r\n            };\r\n            const loadDef = function (code, def, name) {\r\n                const epsgCode = epsgPrefix + code;\r\n                const urnCode = urnPrefix + code;\r\n                const urnxCode = urnxPrefix + code;\r\n                const gmlCode = gmlPrefix + code;\r\n                var axisUnawareDef;\r\n                if (typeof def === 'object') {\r\n                    axisUnawareDef = TC.Util.extend({}, def);\r\n                    def = TC.Util.extend({}, def);\r\n                    if (axisUnawareDef.axis) {\r\n                        delete axisUnawareDef.axis;\r\n                    }\r\n                }\r\n                else if (typeof def === 'string') {\r\n                    axisUnawareDef = def.replace('+axis=neu', '');\r\n                }\r\n                loadProj4Def(epsgCode, def);\r\n                loadProj4Def(urnCode, def);\r\n                loadProj4Def(urnxCode, def);\r\n                // Por convención, los CRS definidos por URI siempre tienen orden de coordenadas X-Y.\r\n                loadProj4Def(gmlCode, axisUnawareDef);\r\n                if (crs.indexOf('http') === 0) {\r\n                    // El CRS es tipo URI, usado seguramente en un GML.\r\n                    loadProj4Def(crs, axisUnawareDef);\r\n                    getDef(crs).name = name;\r\n                }\r\n                getDef(epsgCode).name = name;\r\n                getDef(gmlCode).name = name;\r\n            };\r\n            const loadDefResponse = function (data) {\r\n                var result = data.status === 'ok' && data.number_result === 1;\r\n                if (result) {\r\n                    var def = data.results[0];\r\n                    loadDef(def.code, def.proj4, def.name);\r\n                }\r\n                return result;\r\n            };\r\n\r\n            var idx = crs.lastIndexOf('#');\r\n            if (idx < 0) {\r\n                idx = crs.lastIndexOf('/');\r\n            }\r\n            if (idx < 0) {\r\n                idx = crs.lastIndexOf(':');\r\n            }\r\n            var code = crs.substr(idx + 1);\r\n            var def = getDef(crs);\r\n            if (def) {\r\n                loadDef(code, def, options.name);\r\n                if (isFunction(options.callback)) {\r\n                    options.callback();\r\n                }\r\n            }\r\n            else {\r\n                if (options.def) {\r\n                    loadDef(code, options.def, options.name);\r\n                    if (isFunction(options.callback)) {\r\n                        options.callback();\r\n                    }\r\n                }\r\n                else {\r\n                    TC.getProjectionData(options).then(function (data) {\r\n                        if (loadDefResponse(data) && isFunction(options.callback)) {\r\n                            options.callback();\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        TC.url = {\r\n            templating: [\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING,\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING_I18N,\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING_OVERRIDES\r\n            ]\r\n        };\r\n\r\n        TC.url.ol = TC.apiLocation + TC.Consts.url.OL;\r\n        TC.url.olConnector = TC.apiLocation + TC.Consts.url.OL_CONNECTOR;\r\n        TC.url.proj4js = TC.apiLocation + TC.Consts.url.PROJ4JS;\r\n\r\n        // Precargamos el CRS por defecto\r\n        TC.loadProjDef({ crs: 'EPSG:25830', name: 'ETRS89 / UTM zone 30N', def: '+proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs' });\r\n        // Precargamos los CRS de IDENA que tienen orden de ejes neu\r\n        TC.loadProjDef({ crs: 'EPSG:4258', name: 'ETRS89', def: '+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3040', name: 'ETRS89 / UTM zone 28N (N-E)', def: '+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3041', name: 'ETRS89 / UTM zone 29N (N-E)', def: '+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3042', name: 'ETRS89 / UTM zone 30N (N-E)', def: '+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3043', name: 'ETRS89 / UTM zone 31N (N-E)', def: '+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:4230', name: 'ED50', def: '+proj=longlat +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +no_defs +axis=neu' });\r\n\r\n        if (!TC.Util) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/Util');\r\n        }\r\n\r\n        TC.Cfg = TC.Util.extend(true, {}, TC.Defaults, TC.Cfg);\r\n\r\n        TC.capabilities = {};\r\n\r\n        TC.WFScapabilities = {};\r\n\r\n        TC.cache = {};\r\n\r\n        TC.alert = function (text) {\r\n            alert(text);\r\n        };\r\n\r\n        TC.prompt = function (text, value, callback) {\r\n            var newValue = prompt(text, value);\r\n            if (TC.Util.isFunction(callback)) {\r\n                callback(newValue);\r\n            }\r\n        };\r\n\r\n        TC.confirm = function (text, accept, cancel) {\r\n            if (confirm(text)) {\r\n                if (TC.Util.isFunction(accept)) {\r\n                    accept();\r\n                }\r\n            }\r\n            else {\r\n                if (TC.Util.isFunction(cancel)) {\r\n                    cancel();\r\n                }\r\n            }\r\n        };\r\n\r\n        TC.error = function (text) {\r\n            if (window.console) {\r\n                console.error(text);\r\n            }\r\n\r\n        };\r\n\r\n        if (!TC.Map) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/Map');\r\n        }\r\n\r\n        // OpenLayers connectors\r\n        TC.wrap = {\r\n            Map: function (map) {\r\n                var self = this;\r\n                self.parent = map;\r\n                self.map = null;\r\n                /*\r\n                 *  wrap.getMap: Gets OpenLayers map or a promise for the OpenLayers map\r\n                 */\r\n                self.getMap = function () {\r\n                    return self._promise;\r\n                };                \r\n            },\r\n            Layer: function (layer) {\r\n                var self = this;\r\n                self.parent = layer;\r\n                self.layer = null;\r\n                TC.EventTarget.call(self);\r\n                /*\r\n                 *  getLayer: Gets OpenLayers layer or a promise for the OpenLayers layer\r\n                 */\r\n                self.getLayer = function () {\r\n                    if (self.layer) {\r\n                        return Promise.resolve(self.layer);\r\n                    }\r\n                    return self._promise;\r\n                };\r\n                /*\r\n                 *  setLayer: Resolves the deferred layer object\r\n                 * Parameter: the OpenLayers layer\r\n                 */\r\n                self.setLayer = function (olLayer) {\r\n                    self.layer = olLayer;\r\n                };\r\n            },\r\n            layer: {\r\n                Raster: function () { TC.wrap.Layer.apply(this, arguments); },\r\n                Vector: function () { TC.wrap.Layer.apply(this, arguments); }\r\n            },\r\n            Control: function (ctl) {\r\n                var self = this;\r\n                self.parent = ctl;\r\n            },\r\n            control: {\r\n                Click: function () { TC.wrap.Control.apply(this, arguments); },\r\n                ScaleBar: function () { TC.wrap.Control.apply(this, arguments); },\r\n                NavBar: function () { TC.wrap.Control.apply(this, arguments); },\r\n                NavBarHome: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Coordinates: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Search: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Measure: function () { TC.wrap.Control.apply(this, arguments); },\r\n                OverviewMap: function () { TC.wrap.Control.apply(this, arguments); },\r\n                FeatureInfo: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Popup: function () { TC.wrap.Control.apply(this, arguments); },\r\n                GeometryFeatureInfo: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Geolocation: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Draw: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Modify: function () { TC.wrap.Control.apply(this, arguments); },\r\n                CacheBuilder: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Edit: function () { TC.wrap.Control.apply(this, arguments); },\r\n                ResultsPanel: function () { TC.wrap.Control.apply(this, arguments); }\r\n            },\r\n            Feature: function () { },\r\n            Geometry: function () { }\r\n        };\r\n        TC.inherit(TC.wrap.Layer, TC.EventTarget);\r\n        TC.inherit(TC.wrap.layer.Raster, TC.wrap.Layer);\r\n        TC.inherit(TC.wrap.layer.Vector, TC.wrap.Layer);\r\n        TC.inherit(TC.wrap.control.Click, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.ScaleBar, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.NavBar, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.NavBarHome, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Coordinates, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Measure, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.OverviewMap, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Popup, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.FeatureInfo, TC.wrap.control.Click);\r\n        TC.inherit(TC.wrap.control.GeometryFeatureInfo, TC.wrap.control.Click);\r\n        TC.inherit(TC.wrap.control.Geolocation, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Draw, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.CacheBuilder, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Edit, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.ResultsPanel, TC.wrap.Control);\r\n\r\n        TC.loadCSS(TC.apiLocation + 'TC/css/tcmap.css');\r\n\r\n\r\n        TC.loadJS(!TC.browserFeatures.urlParser(), TC.apiLocation + TC.Consts.url.URL_POLYFILL, function () { });\r\n\r\n        var uids = {};\r\n        TC.getUID = function (prefix) {\r\n            prefix = prefix || '';\r\n            var value = uids[prefix];\r\n            if (!value) {\r\n                value = uids[prefix] = 1;\r\n            }\r\n            var result = prefix + value;\r\n            uids[prefix] = value + 1;\r\n            return result;\r\n        };\r\n\r\n        const pluses = /\\+/g;\r\n        function raw(s) {\r\n            return s;\r\n        }\r\n        function decoded(s) {\r\n            return decodeURIComponent(s.replace(pluses, ' '));\r\n        }\r\n\r\n        TC.cookie = function (key, value, options) {\r\n\r\n            // key and at least value given, set cookie...\r\n            if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null)) {\r\n                options = TC.Util.extend({}, options);\r\n\r\n                if (value === null) {\r\n                    options.expires = -1;\r\n                }\r\n\r\n                if (typeof options.expires === 'number') {\r\n                    var days = options.expires, t = options.expires = new Date();\r\n                    t.setDate(t.getDate() + days);\r\n                }\r\n\r\n                value = String(value);\r\n\r\n                return (document.cookie = [\r\n                    encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\r\n                    options.expires ? ';expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n                    options.path ? ';path=' + options.path : '',\r\n                    options.domain ? ';domain=' + options.domain : '',\r\n                    options.secure ? ';secure' : ''\r\n                ].join(''));\r\n            }\r\n\r\n            // key and possibly options given, get cookie...\r\n            options = value || {};\r\n            var decode = options.raw ? raw : decoded;\r\n            var cookies = document.cookie.split('; ');\r\n            for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {\r\n                if (decode(parts.shift()) === key) {\r\n                    return decode(parts.join('='));\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n\r\n    })();\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\r\n    TC.browser = TC.Util.getBrowser();\r\n\r\n    TC.loadJS(!TC.Cfg.acceptedBrowserVersions, TC.apiLocation + 'TC/config/browser-versions.js', function (result) {\r\n        var isSupported = true;\r\n        var versions = TC.Cfg.acceptedBrowserVersions;\r\n\r\n        var match = versions.filter(function (item) {\r\n            return item.name.toLowerCase() === TC.browser.name.toLowerCase();\r\n        });\r\n\r\n        // GLS: 14/02/2019 Añadimos gestión para que no muestre tostada ni envíe correos en caso de que el navegador sea uno expirado\r\n        if (match.length > 0 && match[0].expired) {\r\n            TC.Cfg.loggingErrorsEnabled = false;\r\n        } else {\r\n            if (match.length > 0 && !isNaN(match[0].version)) {\r\n                if (TC.browser.version < match[0].version) {\r\n                    isSupported = false;\r\n                }\r\n            }\r\n\r\n            if (TC.Cfg.oldBrowserAlert && !isSupported) {\r\n                TC.Cfg.loggingErrorsEnabled = false;\r\n                const mapObj = TC.Map.get(document.querySelector('.' + TC.Consts.classes.MAP));\r\n\r\n                TC.i18n.loadResources(!TC.i18n[mapObj.options.locale], TC.apiLocation + 'TC/resources/', mapObj.options.locale).then(function () {\r\n                    TC.error(TC.Util.getLocaleString(mapObj.options.locale, 'outdatedBrowser'), TC.Consts.msgErrorMode.TOAST);\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    if (/ip(ad|hone|od)/i.test(navigator.userAgent)) {\r\n        // En iOS, el primer click es un mouseover, por eso usamos touchstart como sustituto.\r\n        TC.Consts.event.CLICK = \"touchstart\";\r\n    }\r\n\r\n    // Gestión de errores\r\n    if (!window.JL) {\r\n        TC.syncLoadJS(TC.apiLocation + TC.Consts.url.JSNLOG);\r\n    }\r\n    JL.defaultAjaxUrl = TC.Consts.url.ERROR_LOGGER;\r\n\r\n    const onError = (function () {\r\n        var errorCount = 0;\r\n\r\n        var mapObj;\r\n\r\n        return function (e) {\r\n            mapObj = mapObj || TC.Map.get(document.querySelector('.' + TC.Consts.classes.MAP));\r\n\r\n            var errorMsg, url = \"\", lineNumber = -1, column = -1, errorObj, apiError;\r\n\r\n            if (e.type === \"unhandledrejection\") {\r\n                errorMsg = e.reason ? e.reason.message : \"\";\r\n                if (e.reason && e.reason.stack) {\r\n                    apiError = e.reason.stack.indexOf(TC.apiLocation) >= 0;\r\n                } else {\r\n                    apiError = true;\r\n                }\r\n                errorObj = e.reason;\r\n            } else {\r\n                errorMsg = e.message;\r\n                url = e.filename;\r\n                lineNumber = e.lineno;\r\n                column = e.colno;\r\n                errorObj = e.error;\r\n                apiError = url.indexOf(TC.apiLocation) >= 0;\r\n            }\r\n            \r\n            // Si notifyApplicationErrors === false solo capturamos los errores de la API\r\n            if ((TC.Cfg.notifyApplicationErrors || apiError) && errorCount < TC.Cfg.maxErrorCount && TC.Cfg.loggingErrorsEnabled) {\r\n                // Send object with all data to server side log, using severity fatal, \r\n                // from logger \"onerrorLogger\"\r\n                var msg = apiError ? TC.Consts.text.API_ERROR : TC.Consts.text.APP_ERROR;\r\n                JL(\"onerrorLogger\").fatalException({\r\n                    \"msg\": msg,\r\n                    \"errorMsg\": errorMsg,\r\n                    \"url\": url,\r\n                    \"lineNumber\": lineNumber,\r\n                    \"column\": column,\r\n                    \"appUrl\": location.href,\r\n                    \"apiVersion\": TC.version,\r\n                    \"prevState\": mapObj.getPreviousMapState(),\r\n                    \"userAgent\": navigator.userAgent\r\n                }, errorObj);\r\n                errorCount++;\r\n\r\n                if (!TC.isDebug) {\r\n                    var DEFAULT_CONTACT_EMAIL = \"webmaster@itracasa.es\";\r\n                    TC.i18n.loadResources(!TC.i18n[mapObj.options.locale], TC.apiLocation + 'TC/resources/', mapObj.options.locale)\r\n                        .then(function () {\r\n                            TC.error(TC.Util.getLocaleString(mapObj.options.locale, \"genericError\") + (mapObj.options.contactEmail || DEFAULT_CONTACT_EMAIL), { type: TC.Consts.msgType.ERROR });\r\n                        });\r\n                }\r\n            }\r\n            // Tell browser to run its own error handler as well   \r\n            return false;\r\n        };\r\n    })();\r\n\r\n    window.addEventListener('error', onError, false);\r\n    window.addEventListener('unhandledrejection', onError, false);\r\n});"]}