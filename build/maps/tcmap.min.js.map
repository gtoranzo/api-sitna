{"version":3,"sources":["tcmap.js"],"names":["loadjs","devnull","bundleIdCache","bundleResultCache","bundleCallbackQueue","publish","bundleId","pathsNotFound","q","length","splice","executeCallbacks","args","depsNotFound","call","success","error","loadFile","path","callbackFn","numTries","isLegacyIECss","e","doc","document","async","maxTries","numRetries","beforeCallbackFn","before","pathStripped","replace","test","createElement","rel","href","relList","as","src","undefined","onload","onerror","onbeforeload","ev","result","type","sheet","cssText","x","code","defaultPrevented","head","appendChild","paths","arg1","arg2","trim","loadFn","resolve","reject","fn","i","numWaiting","push","loadFiles","returnPromise","Promise","ready","deps","bundleIds","r","subscribe","done","reset","isDefined","TC","version","apiLocation","script","currentScript","scripts","getElementsByTagName","getAttribute","substr","lastIndexOf","Consts","OLNS_LEGACY","OLNS","PROJ4JSOBJ_LEGACY","PROJ4JSOBJ","GEOGRAPHIC","UTM","OLD_BROWSER_ALERT","CLUSTER_ANIMATION_DURATION","ZOOM_ANIMATION_DURATION","URL_MAX_LENGTH","METER_PRECISION","DEGREE_PRECISION","EXTENT_TOLERANCE","url","SPLIT_REGEX","MODERNIZR","JQUERY_LEGACY","JQUERY","OL_LEGACY","OL","OL_CONNECTOR_LEGACY","OL_CONNECTOR","TEMPLATING","TEMPLATING_I18N","TEMPLATING_OVERRIDES","PROJ4JS_LEGACY","PROJ4JS","EPSG","LOCALFORAGE","D3C3","CESIUM","JSNLOG","ERROR_LOGGER","PDFMAKE","JSONPACK","UA_PARSER","HASH","URL_POLYFILL","PROMISE_POLYFILL","classes","MAP","POINT","MARKER","VISIBLE","HIDDEN","COLLAPSED","CHECKED","DISABLED","ACTIVE","DEFAULT","LASTCHILD","TRANSPARENT","DROP","LOADING","IPAD_IOS7_FIX","INFO","WARNING","ERROR","THREED","msgType","msgErrorMode","TOAST","CONSOLE","EMAIL","event","MAPLOAD","MAPREADY","BEFORELAYERADD","LAYERADD","LAYERREMOVE","LAYERORDER","BEFORELAYERUPDATE","LAYERUPDATE","LAYERERROR","BEFOREBASELAYERCHANGE","BASELAYERCHANGE","BEFOREUPDATE","UPDATE","BEFOREZOOM","ZOOM","BEFOREUPDATEPARAMS","UPDATEPARAMS","VECTORUPDATE","FEATUREADD","BEFOREFEATURESADD","FEATURESADD","FEATUREREMOVE","FEATURESCLEAR","FEATURESIMPORT","FEATURESIMPORTERROR","BEFORETILELOAD","TILELOAD","TILELOADERROR","CONTROLADD","CONTROLACTIVATE","CONTROLDEACTIVATE","BEFORECONTROLRENDER","CONTROLRENDER","BEFORELAYOUTLOAD","LAYOUTLOAD","LAYERVISIBILITY","LAYEROPACITY","FEATURECLICK","NOFEATURECLICK","FEATUREOVER","FEATUREOUT","BEFOREFEATUREINFO","FEATUREINFO","NOFEATUREINFO","FEATUREINFOERROR","CLICK","MOUSEUP","MOUSEMOVE","MOUSELEAVE","STARTLOADING","STOPLOADING","EXTERNALSERVICEADDED","ZOOMTO","PROJECTIONCHANGE","VIEWCHANGE","TERRAINPROVIDERADD","TERRAINPROVIDERREMOVE","OVERVIEWBASELAYERCHANGE","POPUP","layer","IDENA_ORTHOPHOTO","IDENA_BASEMAP","IDENA_CADASTER","IDENA_CARTO","IDENA_ORTHOPHOTO2018","IDENA_ORTHOPHOTO2017","IDENA_ORTHOPHOTO2014","IDENA_ORTHOPHOTO2012","IDENA_DYNBASEMAP","IDENA_DYNORTHOPHOTO","IDENA_DYNORTHOPHOTO2018","IDENA_DYNORTHOPHOTO2017","IDENA_DYNORTHOPHOTO2014","IDENA_DYNORTHOPHOTO2012","IDENA_DYNCARTO","IDENA_BW_RELIEF","IDENA_BASEMAP_ORTHOPHOTO","IGN_ES_CARTO","IGN_ES_BASEMAP","IGN_ES_BASEMAP_GREY","IGN_ES_RELIEF","IGN_ES_ORTHOPHOTO","IGN_ES_DYNCARTO","IGN_ES_DYNBASEMAP","IGN_ES_DYNBASEMAP_GREY","IGN_ES_DYNRELIEF","IGN_ES_DYNORTHOPHOTO","IGN_FR_CARTO","IGN_FR_BASEMAP","IGN_FR_RELIEF","IGN_FR_ORTHOPHOTO","IGN_FR_DYNCARTO","IGN_FR_DYNBASEMAP","IGN_FR_DYNRELIEF","IGN_FR_DYNORTHOPHOTO","OSM","CARTO_VOYAGER","CARTO_LIGHT","CARTO_DARK","MAPBOX_STREETS","MAPBOX_SATELLITE","BLANK","text","API_ERROR","APP_ERROR","layerType","WMS","WMTS","WFS","VECTOR","KML","GPX","GML","GEOJSON","GROUP","geom","MULTIPOINT","POLYLINE","POLYGON","MULTIPOLYLINE","MULTIPOLYGON","CIRCLE","RECTANGLE","searchType","CADASTRAL","COORDINATES","MUNICIPALITY","COUNCIL","LOCALITY","STREET","NUMBER","URBAN","COMMONWEALTH","ROAD","ROADPK","PLACENAME","PLACENAMEMUNICIPALITY","mapSearchType","GENERIC","comparison","EQUAL_TO","NOT_EQUAL_TO","LESS_THAN","GREATER_THAN","LESS_THAN_EQUAL_TO","GREATER_THAN_EQUAL_TO","LIKE","logicalOperator","AND","OR","WMTSEncoding","KVP","RESTFUL","mimeType","PNG","JPEG","JSON","XML","format","GML2","GML3","TOPOJSON","WKT","WFSErrors","GetFeatureNotAvailable","LayersNotAvailable","NoLayers","NoValidLayers","QueryNotAvailable","CapabilitiesParseError","NumMaxFeatures","GetCapabilities","Indeterminate","NoFeatures","visibility","NOT_VISIBLE","NOT_VISIBLE_AT_RESOLUTION","HAS_VISIBLE","view","PRINTING","units","DEGREES","METERS","Defaults","clusterRadii","imageRatio","proxy","crs","utmCrs","geoCrs","initialExtent","maxExtent","baselayerExtent","resolutions","pointBoundsRadius","extentMargin","mouseWheelZoom","attribution","oldBrowserAlert","notifyApplicationErrors","loggingErrorsEnabled","maxErrorCount","layoutURLParamName","titleURLParamName","locale","screenSize","pixelTolerance","maxResolutionError","toastDuration","avgTileSize","availableBaseLayers","id","title","matrixSet","layerNames","encoding","isDefault","hideTree","thumbnail","fallbackLayer","overviewMapLayer","ignoreProxification","baseLayers","defaultBaseLayer","workLayers","controls","loadingIndicator","navBar","scaleBar","scale","scaleSelector","overviewMap","basemapSelector","TOC","coordinates","legend","popup","search","allowedSearchTypes","municipality","urban","street","number","cadastral","measure","streetView","featureInfo","featureTools","layout","styles","point","fillColor","fillOpacity","strokeColor","strokeWidth","radius","labelOutlineWidth","labelOutlineColor","labelOffset","fontColor","fontSize","marker","anchor","width","height","line","polygon","cluster","feature","count","features","Math","round","sqrt","label","selection","Array","prototype","map","fun","this","TypeError","t","Object","len","res","thisArg","arguments","proxify","$","Cfg","prevent","proxyExceptions","indexOf","Util","isSameOrigin","window","location","protocol","encodeURIComponent","isDebug","_showLoadFailedError","mapObj","data","getLocaleString","options","syncLoadJS","_sendRequest","callbackErrorFn","req","XMLHttpRequest","open","onreadystatechange","readyState","status","responseText","send","reqResult","is404","d","ah","documentElement","insertBefore","body","getHead","Modernizr","touch","touchevents","isLegacy","canvas","jQuery","NodeList","forEach","finally","callback","ctor","constructor","then","val","value","err","_oldWhen","when","newArgs","arg","newArg","Deferred","catch","apply","ajax","method","paramArray","key","toString","join","request","contentType","setRequestHeader","msg","statusText","responseData","responseType","parse","DOMParser","parseFromString","Error","addEventListener","build","mapLibrary","OL2","Control","OpenLayers","ol","loadJSInOrder","condition","loadJS","addCrossOriginAttr","scriptEl","crossOrigin","inOrder","notCrossOrigin","urls","isArray","elm","name","getName","split","reverse","slice","toLowerCase","toReduce","filter","index","reduce","prev","curr","detectIE","loadCSS","projectionDataCache","getProjectionData","parseInt","Number","NaN","projData","tool","Proxification","fetchJSON","loadProjDef","getDef","proj4js","Proj4js","defs","proj4","Proj","transform","loadProj4Def","def","loadDef","epsgCode","urnCode","gmlCode","axisUnawareDef","extend","axis","idx","isFunction","number_result","results","loadDefResponse","templating","olConnector","capabilities","WFScapabilities","cache","alert","prompt","newValue","confirm","accept","cancel","console","Map","wrap","self","parent","getMap","_promise","Layer","EventTarget","getLayer","setLayer","olLayer","Raster","Vector","ctl","control","Click","ScaleBar","NavBar","NavBarHome","Coordinates","Search","Measure","OverviewMap","FeatureInfo","Popup","GeometryFeatureInfo","Geolocation","Draw","Modify","CacheBuilder","Edit","ResultsPanel","Feature","Geometry","inherit","urlparser","uids","getUID","prefix","pluses","raw","s","decoded","decodeURIComponent","cookie","expires","days","Date","setDate","getDate","String","toUTCString","domain","secure","parts","decode","cookies","shift","browser","getBrowser","acceptedBrowserVersions","isSupported","match","item","expired","isNaN","i18n","loadResources","navigator","userAgent","JL","defaultAjaxUrl","onError","errorCount","get","querySelector","errorMsg","errorObj","apiError","lineNumber","column","reason","message","stack","filename","lineno","colno","fatalException","appUrl","prevState","getPreviousMapState","contactEmail"],"mappings":"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","sourcesContent":["/**\r\n * LoadJS descargado de https://github.com/muicss/loadjs\r\n * @version 3.6.1\r\n */\r\nloadjs = (function () {\r\n    /**\r\n     * Global dependencies.\r\n     * @global {Object} document - DOM\r\n     */\r\n\r\n    var devnull = function () { },\r\n        bundleIdCache = {},\r\n        bundleResultCache = {},\r\n        bundleCallbackQueue = {};\r\n\r\n\r\n    /**\r\n     * Subscribe to bundle load event.\r\n     * @param {string[]} bundleIds - Bundle ids\r\n     * @param {Function} callbackFn - The callback function\r\n     */\r\n    function subscribe(bundleIds, callbackFn) {\r\n        // listify\r\n        bundleIds = bundleIds.push ? bundleIds : [bundleIds];\r\n\r\n        var depsNotFound = [],\r\n            i = bundleIds.length,\r\n            numWaiting = i,\r\n            fn,\r\n            bundleId,\r\n            r,\r\n            q;\r\n\r\n        // define callback function\r\n        fn = function (bundleId, pathsNotFound) {\r\n            if (pathsNotFound.length) depsNotFound.push(bundleId);\r\n\r\n            numWaiting--;\r\n            if (!numWaiting) callbackFn(depsNotFound);\r\n        };\r\n\r\n        // register callback\r\n        while (i--) {\r\n            bundleId = bundleIds[i];\r\n\r\n            // execute callback if in result cache\r\n            r = bundleResultCache[bundleId];\r\n            if (r) {\r\n                fn(bundleId, r);\r\n                continue;\r\n            }\r\n\r\n            // add to callback queue\r\n            q = bundleCallbackQueue[bundleId] = bundleCallbackQueue[bundleId] || [];\r\n            q.push(fn);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Publish bundle load event.\r\n     * @param {string} bundleId - Bundle id\r\n     * @param {string[]} pathsNotFound - List of files not found\r\n     */\r\n    function publish(bundleId, pathsNotFound) {\r\n        // exit if id isn't defined\r\n        if (!bundleId) return;\r\n\r\n        var q = bundleCallbackQueue[bundleId];\r\n\r\n        // cache result\r\n        bundleResultCache[bundleId] = pathsNotFound;\r\n\r\n        // exit if queue is empty\r\n        if (!q) return;\r\n\r\n        // empty callback queue\r\n        while (q.length) {\r\n            q[0](bundleId, pathsNotFound);\r\n            q.splice(0, 1);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Execute callbacks.\r\n     * @param {Object or Function} args - The callback args\r\n     * @param {string[]} depsNotFound - List of dependencies not found\r\n     */\r\n    function executeCallbacks(args, depsNotFound) {\r\n        // accept function as argument\r\n        if (args.call) args = { success: args };\r\n\r\n        // success and error callbacks\r\n        if (depsNotFound.length) (args.error || devnull)(depsNotFound);\r\n        else (args.success || devnull)(args);\r\n    }\r\n\r\n\r\n    /**\r\n     * Load individual file.\r\n     * @param {string} path - The file path\r\n     * @param {Function} callbackFn - The callback function\r\n     */\r\n    function loadFile(path, callbackFn, args, numTries) {\r\n        var doc = document,\r\n            async = args.async,\r\n            maxTries = (args.numRetries || 0) + 1,\r\n            beforeCallbackFn = args.before || devnull,\r\n            pathStripped = path.replace(/^(css|img)!/, ''),\r\n            isLegacyIECss,\r\n            e;\r\n\r\n        numTries = numTries || 0;\r\n\r\n        if (/(^css!|\\.css$)/.test(path)) {\r\n            // css\r\n            e = doc.createElement('link');\r\n            e.rel = 'stylesheet';\r\n            e.href = pathStripped;\r\n\r\n            // tag IE9+\r\n            isLegacyIECss = 'hideFocus' in e;\r\n\r\n            // use preload in IE Edge (to detect load errors)\r\n            if (isLegacyIECss && e.relList) {\r\n                isLegacyIECss = 0;\r\n                e.rel = 'preload';\r\n                e.as = 'style';\r\n            }\r\n        } else if (/(^img!|\\.(png|gif|jpg|svg)$)/.test(path)) {\r\n            // image\r\n            e = doc.createElement('img');\r\n            e.src = pathStripped;\r\n        } else {\r\n            // javascript\r\n            e = doc.createElement('script');\r\n            e.src = path;\r\n            e.async = async === undefined ? true : async;\r\n        }\r\n\r\n        e.onload = e.onerror = e.onbeforeload = function (ev) {\r\n            var result = ev.type[0];\r\n\r\n            // treat empty stylesheets as failures to get around lack of onerror\r\n            // support in IE9-11\r\n            if (isLegacyIECss) {\r\n                try {\r\n                    if (!e.sheet.cssText.length) result = 'e';\r\n                } catch (x) {\r\n                    // sheets objects created from load errors don't allow access to\r\n                    // `cssText` (unless error is Code:18 SecurityError)\r\n                    if (x.code != 18) result = 'e';\r\n                }\r\n            }\r\n\r\n            // handle retries in case of load failure\r\n            if (result == 'e') {\r\n                // increment counter\r\n                numTries += 1;\r\n\r\n                // exit function and try again\r\n                if (numTries < maxTries) {\r\n                    return loadFile(path, callbackFn, args, numTries);\r\n                }\r\n            } else if (e.rel == 'preload' && e.as == 'style') {\r\n                // activate preloaded stylesheets\r\n                return e.rel = 'stylesheet'; // jshint ignore:line\r\n            }\r\n\r\n            // execute callback\r\n            callbackFn(path, result, ev.defaultPrevented);\r\n        };\r\n\r\n        // add to document (unless callback returns `false`)\r\n        if (beforeCallbackFn(path, e) !== false) doc.head.appendChild(e);\r\n    }\r\n\r\n\r\n    /**\r\n     * Load multiple files.\r\n     * @param {string[]} paths - The file paths\r\n     * @param {Function} callbackFn - The callback function\r\n     */\r\n    function loadFiles(paths, callbackFn, args) {\r\n        // listify paths\r\n        paths = paths.push ? paths : [paths];\r\n\r\n        var numWaiting = paths.length,\r\n            x = numWaiting,\r\n            pathsNotFound = [],\r\n            fn,\r\n            i;\r\n\r\n        // define callback function\r\n        fn = function (path, result, defaultPrevented) {\r\n            // handle error\r\n            if (result == 'e') pathsNotFound.push(path);\r\n\r\n            // handle beforeload event. If defaultPrevented then that means the load\r\n            // will be blocked (ex. Ghostery/ABP on Safari)\r\n            if (result == 'b') {\r\n                if (defaultPrevented) pathsNotFound.push(path);\r\n                else return;\r\n            }\r\n\r\n            numWaiting--;\r\n            if (!numWaiting) callbackFn(pathsNotFound);\r\n        };\r\n\r\n        // load scripts\r\n        for (i = 0; i < x; i++) loadFile(paths[i], fn, args);\r\n    }\r\n\r\n\r\n    /**\r\n     * Initiate script load and register bundle.\r\n     * @param {(string|string[])} paths - The file paths\r\n     * @param {(string|Function|Object)} [arg1] - The (1) bundleId or (2) success\r\n     *   callback or (3) object literal with success/error arguments, numRetries,\r\n     *   etc.\r\n     * @param {(Function|Object)} [arg2] - The (1) success callback or (2) object\r\n     *   literal with success/error arguments, numRetries, etc.\r\n     */\r\n    function loadjs(paths, arg1, arg2) {\r\n        var bundleId,\r\n            args;\r\n\r\n        // bundleId (if string)\r\n        if (arg1 && arg1.trim) bundleId = arg1;\r\n\r\n        // args (default is {})\r\n        args = (bundleId ? arg2 : arg1) || {};\r\n\r\n        // throw error if bundle is already defined\r\n        if (bundleId) {\r\n            if (bundleId in bundleIdCache) {\r\n                throw \"LoadJS\";\r\n            } else {\r\n                bundleIdCache[bundleId] = true;\r\n            }\r\n        }\r\n\r\n        function loadFn(resolve, reject) {\r\n            loadFiles(paths, function (pathsNotFound) {\r\n                // execute callbacks\r\n                executeCallbacks(args, pathsNotFound);\r\n\r\n                // resolve Promise\r\n                if (resolve) {\r\n                    executeCallbacks({ success: resolve, error: reject }, pathsNotFound);\r\n                }\r\n\r\n                // publish bundle load event\r\n                publish(bundleId, pathsNotFound);\r\n            }, args);\r\n        }\r\n\r\n        if (args.returnPromise) return new Promise(loadFn);\r\n        else loadFn();\r\n    }\r\n\r\n\r\n    /**\r\n     * Execute callbacks when dependencies have been satisfied.\r\n     * @param {(string|string[])} deps - List of bundle ids\r\n     * @param {Object} args - success/error arguments\r\n     */\r\n    loadjs.ready = function ready(deps, args) {\r\n        // subscribe to bundle load event\r\n        subscribe(deps, function (depsNotFound) {\r\n            // execute callbacks\r\n            executeCallbacks(args, depsNotFound);\r\n        });\r\n\r\n        return loadjs;\r\n    };\r\n\r\n\r\n    /**\r\n     * Manually satisfy bundle dependencies.\r\n     * @param {string} bundleId - The bundle id\r\n     */\r\n    loadjs.done = function done(bundleId) {\r\n        publish(bundleId, []);\r\n    };\r\n\r\n\r\n    /**\r\n     * Reset loadjs dependencies statuses\r\n     */\r\n    loadjs.reset = function reset() {\r\n        bundleIdCache = {};\r\n        bundleResultCache = {};\r\n        bundleCallbackQueue = {};\r\n    };\r\n\r\n\r\n    /**\r\n     * Determine if bundle has already been defined\r\n     * @param String} bundleId - The bundle id\r\n     */\r\n    loadjs.isDefined = function isDefined(bundleId) {\r\n        return bundleId in bundleIdCache;\r\n    };\r\n\r\n\r\n    // export\r\n    return loadjs;\r\n\r\n})();\r\n\r\nvar TC = TC || {};\r\n/*\r\n * Initialization\r\n */\r\nTC.version = '1.6.0';\r\n(function () {\r\n    if (!TC.apiLocation) {\r\n        var src;\r\n        var script;\r\n        if (document.currentScript) {\r\n            script = document.currentScript;\r\n        }\r\n        else {\r\n            var scripts = document.getElementsByTagName('script');\r\n            script = scripts[scripts.length - 1];\r\n        }\r\n        var src = script.getAttribute('src');\r\n        TC.apiLocation = src.substr(0, src.lastIndexOf('/') + 1);\r\n    }\r\n})();\r\n\r\nif (!TC.Consts) {\r\n    TC.Consts = {};\r\n    TC.Consts.OLNS_LEGACY = 'OpenLayers';\r\n    TC.Consts.OLNS = 'ol';\r\n    TC.Consts.PROJ4JSOBJ_LEGACY = 'Proj4js';\r\n    TC.Consts.PROJ4JSOBJ = 'proj4';\r\n    TC.Consts.GEOGRAPHIC = 'geographic';\r\n    TC.Consts.UTM = 'UTM';\r\n    TC.Consts.OLD_BROWSER_ALERT = 'TC.oldBrowserAlert';\r\n    TC.Consts.CLUSTER_ANIMATION_DURATION = 200;\r\n    TC.Consts.ZOOM_ANIMATION_DURATION = 300;\r\n    TC.Consts.URL_MAX_LENGTH = 2048;\r\n    TC.Consts.METER_PRECISION = 0;\r\n    TC.Consts.DEGREE_PRECISION = 5;\r\n    TC.Consts.EXTENT_TOLERANCE = 0.9998;/*URI: debido al redondeo del extente en el hash se obtiene un nivel de resolución mayor al debido. Con este valor definimos una tolerancia para que use una resolución si es muy muy muy próxima*/\r\n    TC.Consts.url = {\r\n        SPLIT_REGEX: /([^:]*:)?\\/\\/([^:]*:?[^@]*@)?([^:\\/\\?]*):?([^\\/\\?]*)/,\r\n        MODERNIZR: 'lib/modernizr.js',\r\n        JQUERY_LEGACY: TC.apiLocation + 'lib/jquery/jquery.1.10.2.js',\r\n        JQUERY: '//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.js',\r\n        OL_LEGACY: 'lib/OpenLayers/OpenLayers.sitna.js',\r\n        OL: 'lib/ol/build/ol-custom.js',\r\n        OL_CONNECTOR_LEGACY: 'TC/ol/ol2.js',\r\n        OL_CONNECTOR: 'TC/ol/ol.js',\r\n        TEMPLATING: 'lib/dust/dust-full-helpers.min.js',\r\n        TEMPLATING_I18N: 'lib/dust/dustjs-i18n.min.js',\r\n        TEMPLATING_OVERRIDES: 'lib/dust/dust.overrides.js',\r\n        PROJ4JS_LEGACY: 'lib/proj4js/legacy/proj4js-compressed.js',\r\n        PROJ4JS: 'lib/proj4js/proj4-src.js',\r\n        EPSG: 'https://epsg.io/',\r\n        LOCALFORAGE: TC.apiLocation + 'lib/localForage/localforage.min.js',\r\n        D3C3: TC.apiLocation + 'lib/d3c3/d3c3.min.js',\r\n        CESIUM: TC.apiLocation + 'lib/cesium/release/Cesium.js',\r\n        JSNLOG: 'lib/jsnlog/jsnlog.min.js',\r\n        ERROR_LOGGER: TC.apiLocation + 'errors/logger.ashx',\r\n        PDFMAKE: TC.apiLocation + 'lib/pdfmake/pdfmake-fonts.min.js',\r\n        JSONPACK: 'lib/jsonpack/jsonpack.min.js',\r\n        UA_PARSER: 'lib/ua-parser/ua-parser.min.js',\r\n        HASH: 'lib/jshash/md5-min.js',\r\n        URL_POLYFILL: 'lib/polyfill/url.js',\r\n        PROMISE_POLYFILL: 'lib/polyfill/promise/polyfill.min.js'\r\n    };\r\n    TC.Consts.classes = {\r\n        MAP: 'tc-map',\r\n        POINT: 'tc-point',\r\n        MARKER: 'tc-marker',\r\n        VISIBLE: 'tc-visible',\r\n        HIDDEN: 'tc-hidden',\r\n        COLLAPSED: 'tc-collapsed',\r\n        CHECKED: 'tc-checked',\r\n        DISABLED: 'tc-disabled',\r\n        ACTIVE: 'tc-active',\r\n        DEFAULT: 'tc-default',\r\n        LASTCHILD: 'tc-lastchild',\r\n        TRANSPARENT: 'tc-transparent',\r\n        DROP: 'tc-drop',\r\n        LOADING: 'tc-loading',\r\n        IPAD_IOS7_FIX: 'tc-ipad-ios7-fix',\r\n        INFO: 'tc-msg-info',\r\n        WARNING: 'tc-msg-warning',\r\n        ERROR: 'tc-msg-error',\r\n        THREED: 'tc-threed'\r\n    };\r\n    TC.Consts.msgType = {\r\n        INFO: 'info',\r\n        WARNING: 'warning',\r\n        ERROR: 'error'\r\n    };\r\n    TC.Consts.msgErrorMode = {\r\n        TOAST: 'toast',\r\n        CONSOLE: 'console',\r\n        EMAIL: 'email'\r\n    };\r\n    TC.Consts.event = {\r\n        /**\r\n         * Se lanza cuando el mapa ha cargado todas sus capas iniciales y todos sus controles\r\n         * @event mapload\r\n         */\r\n        MAPLOAD: 'mapload.tc',\r\n        MAPREADY: 'mapready.tc',\r\n        BEFORELAYERADD: 'beforelayeradd.tc',\r\n        LAYERADD: 'layeradd.tc',\r\n        LAYERREMOVE: 'layerremove.tc',\r\n        LAYERORDER: 'layerorder.tc',\r\n        BEFORELAYERUPDATE: 'beforelayerupdate.tc',\r\n        LAYERUPDATE: 'layerupdate.tc',\r\n        LAYERERROR: 'layererror.tc',\r\n        BEFOREBASELAYERCHANGE: 'beforebaselayerchange.tc',\r\n        BASELAYERCHANGE: 'baselayerchange.tc',\r\n        BEFOREUPDATE: 'beforeupdate.tc',\r\n        UPDATE: 'update.tc',\r\n        BEFOREZOOM: 'beforezoom.tc',\r\n        ZOOM: 'zoom.tc',\r\n        BEFOREUPDATEPARAMS: 'beforeupdateparams.tc',\r\n        UPDATEPARAMS: 'updateparams.tc',\r\n        VECTORUPDATE: 'vectorupdate.tc',\r\n        FEATUREADD: 'featureadd.tc',\r\n        BEFOREFEATURESADD: 'beforefeaturesadd.tc',\r\n        FEATURESADD: 'featuresadd.tc',\r\n        FEATUREREMOVE: 'featureremove.tc',\r\n        FEATURESCLEAR: 'featuresclear.tc',\r\n        FEATURESIMPORT: 'featuresimport.tc',\r\n        FEATURESIMPORTERROR: 'featuresimporterror.tc',\r\n        BEFORETILELOAD: 'beforetileload.tc',\r\n        TILELOAD: 'tileload.tc',\r\n        TILELOADERROR: 'tileloaderror.tc',\r\n        CONTROLADD: 'controladd.tc',\r\n        CONTROLACTIVATE: 'controlactivate.tc',\r\n        CONTROLDEACTIVATE: 'controldeactivate.tc',\r\n        BEFORECONTROLRENDER: 'beforecontrolrender.tc',\r\n        CONTROLRENDER: 'controlrender.tc',\r\n        BEFORELAYOUTLOAD: 'beforelayoutload.tc',\r\n        LAYOUTLOAD: 'layoutload.tc',\r\n        LAYERVISIBILITY: 'layervisibility.tc',\r\n        LAYEROPACITY: 'layeropacity.tc',\r\n        FEATURECLICK: 'featureclick.tc',\r\n        NOFEATURECLICK: 'nofeatureclick.tc',\r\n        FEATUREOVER: 'featureover.tc',\r\n        FEATUREOUT: 'featureout.tc',\r\n        BEFOREFEATUREINFO: 'beforefeatureinfo.tc',\r\n        FEATUREINFO: 'featureinfo.tc',\r\n        NOFEATUREINFO: 'nofeatureinfo.tc',\r\n        FEATUREINFOERROR: 'featureinfoerror.tc',\r\n        CLICK: 'click',\r\n        MOUSEUP: 'mouseup',\r\n        MOUSEMOVE: 'mousemove',\r\n        MOUSELEAVE: 'mouseleave',\r\n        STARTLOADING: 'startloading.tc',\r\n        STOPLOADING: 'stoploading.tc',\r\n        EXTERNALSERVICEADDED: 'externalserviceadded.tc',\r\n        ZOOMTO: 'zoomto.tc',\r\n        PROJECTIONCHANGE: 'projectionchange.tc',\r\n        VIEWCHANGE: 'viewchange.tc',\r\n        TERRAINPROVIDERADD: 'terrainprovideradd.tc',\r\n        TERRAINPROVIDERREMOVE: 'terrainproviderremove.tc',\r\n        OVERVIEWBASELAYERCHANGE: 'overviewbaselayerchange.tc',\r\n        POPUP: 'popup.tc'\r\n    };\r\n    TC.Consts.layer = {\r\n        IDENA_ORTHOPHOTO: 'ortofoto',\r\n        IDENA_BASEMAP: 'mapabase',\r\n        IDENA_CADASTER: 'catastro',\r\n        IDENA_CARTO: 'cartografia',\r\n        IDENA_ORTHOPHOTO2018: 'ortofoto2018',\r\n        IDENA_ORTHOPHOTO2017: 'ortofoto2017',\r\n        IDENA_ORTHOPHOTO2014: 'ortofoto2014',\r\n        IDENA_ORTHOPHOTO2012: 'ortofoto2012',\r\n        IDENA_DYNBASEMAP: 'mapabase_dinamico',\r\n        IDENA_DYNORTHOPHOTO: 'ortofoto_dinamico',\r\n        IDENA_DYNORTHOPHOTO2018: 'ortofoto2018_dinamico',\r\n        IDENA_DYNORTHOPHOTO2017: 'ortofoto2017_dinamico',\r\n        IDENA_DYNORTHOPHOTO2014: 'ortofoto2014_dinamico',\r\n        IDENA_DYNORTHOPHOTO2012: 'ortofoto2012_dinamico',\r\n        IDENA_DYNCARTO: 'cartografia_dinamico',\r\n        IDENA_BW_RELIEF: 'relieve_bn',\r\n        IDENA_BASEMAP_ORTHOPHOTO: 'base_orto',\r\n\r\n        IGN_ES_CARTO: \"ign-raster\",\r\n        IGN_ES_BASEMAP: \"ign-base\",\r\n        IGN_ES_BASEMAP_GREY: \"ign-base-gris\",\r\n        IGN_ES_RELIEF: \"ign-mtn\",\r\n        IGN_ES_ORTHOPHOTO: \"ign-pnoa\",\r\n\r\n        IGN_ES_DYNCARTO: \"ign-raster-dyn\",\r\n        IGN_ES_DYNBASEMAP: \"ign-base-dyn\",\r\n        IGN_ES_DYNBASEMAP_GREY: \"ign-base-gris-dyn\",\r\n        IGN_ES_DYNRELIEF: \"ign-mtn-dyn\",\r\n        IGN_ES_DYNORTHOPHOTO: \"ign-pnoa-dyn\",\r\n\r\n        IGN_FR_CARTO: \"ign-fr-cartes\",\r\n        IGN_FR_BASEMAP: \"ign-fr-base\",\r\n        IGN_FR_RELIEF: \"ign-fr-estompage\",\r\n        IGN_FR_ORTHOPHOTO: \"ign-fr-orto\",\r\n\r\n        IGN_FR_DYNCARTO: \"ign-fr-cartes-dyn\",\r\n        IGN_FR_DYNBASEMAP: \"ign-fr-base-dyn\",\r\n        IGN_FR_DYNRELIEF: \"ign-fr-estompage-dyn\",\r\n        IGN_FR_DYNORTHOPHOTO: \"ign-fr-orto-dyn\",\r\n\r\n        OSM: 'osm',\r\n        CARTO_VOYAGER: 'carto_voyager',\r\n        CARTO_LIGHT: 'carto_light',\r\n        CARTO_DARK: 'carto_dark',\r\n        MAPBOX_STREETS: 'mapbox_streets',\r\n        MAPBOX_SATELLITE: 'mapbox_satellite',\r\n\r\n        BLANK: 'ninguno'\r\n    };\r\n    TC.Consts.text = {\r\n        API_ERROR: 'Error API SITNA',\r\n        APP_ERROR: 'Error de aplicación'\r\n    };\r\n    /**\r\n     * Colección de identificadores de tipo de capa.\r\n     * No se deberían modificar las propiedades de esta clase.\r\n     * @class TC.consts.LayerType\r\n     * @static\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WMS.\r\n     * @property WMS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WMTS.\r\n     * @property WMTS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WFS.\r\n     * @property WFS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo KML.\r\n     * @property KML\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo GPX.\r\n     * @property GPX\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo vectorial. Este tipo de capa es la que se utiliza para dibujar marcadores.\r\n     * @property VECTOR\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de grupo.\r\n     * @property GROUP\r\n     * @type string\r\n     * @final\r\n     */\r\n    TC.Consts.layerType = {\r\n        WMS: 'WMS',\r\n        WMTS: 'WMTS',\r\n        WFS: 'WFS',\r\n        VECTOR: 'vector',\r\n        KML: 'KML',\r\n        GPX: 'GPX',\r\n        GML: 'GML',\r\n        GEOJSON: 'GeoJSON',\r\n        GROUP: 'group'\r\n    };\r\n    TC.Consts.geom = {\r\n        POINT: 'point',\r\n        MULTIPOINT: 'multipoint',\r\n        POLYLINE: 'polyline',\r\n        POLYGON: 'polygon',\r\n        MULTIPOLYLINE: 'multipolyline',\r\n        MULTIPOLYGON: 'multipolygon',\r\n        CIRCLE: 'circle',\r\n        RECTANGLE: 'rectangle'\r\n    };\r\n    TC.Consts.searchType = {\r\n        CADASTRAL: 'cadastral',\r\n        COORDINATES: 'coordinates',\r\n        MUNICIPALITY: 'municipality',\r\n        COUNCIL: 'council',\r\n        LOCALITY: 'locality',\r\n        STREET: 'street',\r\n        NUMBER: 'number',\r\n        URBAN: 'urban',\r\n        COMMONWEALTH: 'commonwealth',\r\n        ROAD: 'road',\r\n        ROADPK: 'roadpk',\r\n        PLACENAME: 'placename',\r\n        PLACENAMEMUNICIPALITY: 'placenamemunicipality'\r\n    };\r\n    TC.Consts.mapSearchType = {\r\n        MUNICIPALITY: TC.Consts.searchType.MUNICIPALITY,\r\n        COUNCIL: TC.Consts.searchType.COUNCIL,\r\n        URBAN: TC.Consts.searchType.URBAN,\r\n        COMMONWEALTH: TC.Consts.searchType.COMMONWEALTH,\r\n        GENERIC: 'generic'\r\n    };\r\n    TC.Consts.comparison = {\r\n        EQUAL_TO: '==',\r\n        NOT_EQUAL_TO: '!=',\r\n        LESS_THAN: '<',\r\n        GREATER_THAN: '>',\r\n        LESS_THAN_EQUAL_TO: '=<',\r\n        GREATER_THAN_EQUAL_TO: '>=',\r\n        LIKE: 'is'\r\n    };\r\n    TC.Consts.logicalOperator = {\r\n        AND: 'and',\r\n        OR: 'or'\r\n    };\r\n    TC.Consts.WMTSEncoding = {\r\n        KVP: 'KVP',\r\n        RESTFUL: 'RESTful'\r\n    };\r\n    TC.Consts.mimeType = {\r\n        PNG: 'image/png',\r\n        JPEG: 'image/jpeg',\r\n        JSON: 'application/json',\r\n        GEOJSON: 'application/vnd.geo+json',\r\n        KML: 'application/vnd.google-earth.kml+xml',\r\n        GML: 'application/gml+xml',\r\n        GPX: 'application/gpx+xml',\r\n        XML: 'application/xml'\r\n    };\r\n    TC.Consts.format = {\r\n        JSON: 'JSON',\r\n        KML: 'KML',\r\n        GML: 'GML',\r\n        GML2: 'GML2',\r\n        GML3: 'GML2',\r\n        GEOJSON: 'GeoJSON',\r\n        TOPOJSON: 'TopoJSON',\r\n        GPX: 'GPX',\r\n        WKT: 'WKT'\r\n    };\r\n    //enumerado de errores y warninqs derivados de descargas, getfeatures\r\n    TC.Consts.WFSErrors = {\r\n        GetFeatureNotAvailable: \"GetFeatureNotAvailable\",\r\n        LayersNotAvailable: \"LayersNotAvailable\",\r\n        NoLayers: \"NoLayers\",\r\n        NoValidLayers: \"noValidLayers\",\r\n        QueryNotAvailable: \"QueryNotAvailable\",\r\n        CapabilitiesParseError: \"CapabilitiesParseError\",\r\n        NumMaxFeatures: \"NumMaxFeatures\",\r\n        GetCapabilities: \"GetCapabilities\",\r\n        Indeterminate: \"Indeterminate\",\r\n        NoFeatures: \"NoFeatures\"\r\n    }\r\n    /**\r\n     * Colección de identificadores de estados de visibilidad.\r\n     * No se deberían modificar las propiedades de esta clase.\r\n     * @class TC.consts.Visibility\r\n     * @static\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible.\r\n     * @property NOT_VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible a la resolución actual.\r\n     * @property NOT_VISIBLE_AT_RESOLUTION\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible pero que tiene nodos hijos visibles.\r\n     * @property HAS_VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo visible.\r\n     * @property VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    TC.Consts.visibility = {\r\n        NOT_VISIBLE: 0,\r\n        NOT_VISIBLE_AT_RESOLUTION: 1,\r\n        HAS_VISIBLE: 2,\r\n        VISIBLE: 4\r\n    };\r\n\r\n    TC.Consts.view = {\r\n        DEFAULT: 0,\r\n        THREED: 1,\r\n        PRINTING: 2\r\n    };\r\n\r\n    TC.Consts.units = {\r\n        DEGREES: \"degrees\",\r\n        METERS: \"m\"\r\n    };\r\n\r\n    TC.Consts.MARKER = 'marker';\r\n\r\n    TC.Defaults = (function () {\r\n\r\n        var clusterRadii = {};\r\n        var getClusterRadius = function (feature) {\r\n            var count = feature.features.length;\r\n            var result = clusterRadii[count];\r\n            if (!result) {\r\n                result = 2 + Math.round(Math.sqrt(count) * 5);\r\n                clusterRadii[count] = result;\r\n            }\r\n            return result;\r\n        };\r\n\r\n        return {\r\n            imageRatio: 1.05,\r\n            proxy: '',\r\n\r\n            crs: 'EPSG:25830',\r\n            utmCrs: 'EPSG:25830',\r\n            geoCrs: 'EPSG:4326',\r\n            initialExtent: [541084.221, 4640788.225, 685574.4632, 4796618.764],\r\n            maxExtent: false,\r\n            baselayerExtent: [480408, 4599748, 742552, 4861892],\r\n            resolutions: [1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, .5, .25],\r\n            pointBoundsRadius: 30,\r\n            extentMargin: 0.2,\r\n            mouseWheelZoom: true,\r\n            attribution: '<a href=\"http://sitna.navarra.es/\" target=\"_blank\">SITNA</a>',\r\n            oldBrowserAlert: true,\r\n            notifyApplicationErrors: false,\r\n            loggingErrorsEnabled: true,\r\n            maxErrorCount: 10,\r\n            layoutURLParamName: 'layout', // Parámetro donde leer en la URL de la aplicación para cargar un layout.\r\n            titleURLParamName: 'title', // Parámetro donde leer en la URL de la aplicación para cargar un título de mapa, p. e. al imprimir.\r\n\r\n            locale: 'es-ES',\r\n\r\n            view: TC.Consts.view.DEFAULT,\r\n\r\n            screenSize: 20,\r\n            pixelTolerance: 10, // Used in GFI requests\r\n            maxResolutionError: 0.01, // Max error ratio to consider two resolutions equivalent\r\n\r\n            toastDuration: 5000,\r\n\r\n            avgTileSize: 31000,\r\n\r\n            availableBaseLayers: [\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BASEMAP,\r\n                    title: 'Mapa base',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830extended',\r\n                    layerNames: 'mapabase',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: true,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap.png',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNBASEMAP,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO,\r\n                    title: 'Ortofoto máxima actualidad',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto_maxima_actualidad',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2018,\r\n                    title: 'Ortofoto 2018',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2018',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2018.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2017,\r\n                    title: 'Ortofoto 2017',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2017',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2017.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2014,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830reduced',\r\n                    layerNames: 'ortofoto2014',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2014.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2012,\r\n                    title: 'Ortofoto 2012',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2012',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2012.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_CARTO,\r\n                    title: 'Cartografía topográfica',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'mapaTopografico',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-bta.png',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNCARTO,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_CADASTER,\r\n                    title: 'Catastro',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'catastro,regionesFronterizas',\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-cadaster.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BW_RELIEF,\r\n                    title: 'Relieve',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'IDENA:mapa_relieve_bn',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-relief_bw.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BASEMAP_ORTHOPHOTO,\r\n                    title: 'Mapa base/ortofoto',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'mapaBase_orto',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-base_ortho.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNBASEMAP,\r\n                    title: 'Mapa base',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'mapaBase,regionesFronterizas',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_maxima_actualidad',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2018',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2018.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2017',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2017.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2014',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2014.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,\r\n                    title: 'Ortofoto 2012',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2012',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2012.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNCARTO,\r\n                    title: 'Cartografía topográfica',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'MTNa5_BTA',\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-bta.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_CARTO,\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    title: \"Cartografía raster \\r\\n (IGN ES)\",\r\n                    url: \"//www.ign.es/wmts/mapa-raster\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"MTN\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNCARTO,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_BASEMAP,\r\n                    title: \"Callejero \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/ign-base\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"IGNBaseTodo\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-basemap_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNBASEMAP,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_BASEMAP_GREY,\r\n                    title: \"Callejero gris \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/ign-base\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"IGNBase-gris\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-basemap_grey_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_RELIEF,\r\n                    title: \"Relieve \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/mdt\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"Relieve\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-relief_ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNRELIEF,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_ORTHOPHOTO,\r\n                    title: \"Ortofoto PNOA\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/pnoa-ma\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"OI.OrthoimageCoverage\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-orthophoto_pnoa.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNBASEMAP,\r\n                    title: 'Mapa base \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/ign-base',\r\n                    layerNames: 'IGNBaseTodo',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,\r\n                    title: 'Callejero gris \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/ign-base',\r\n                    layerNames: 'IGNBaseTodo-gris',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap_grey_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/pnoa-ma',\r\n                    layerNames: 'OI.OrthoimageCoverage',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto_pnoa.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNCARTO,\r\n                    title: 'Cartografía topográfica \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/mapa-raster',\r\n                    layerNames: 'mtn_rasterizado',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNRELIEF,\r\n                    title: 'Relieve \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/mdt',\r\n                    layerNames: 'relieve',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-relief_ign.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_CARTO,\r\n                    title: \"Cartografía raster \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNCARTO,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_BASEMAP,\r\n                    title: \"Mapa base \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGN\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-base-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNBASEMAP,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_RELIEF,\r\n                    title: \"Relieve \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/png\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-estom-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNRELIEF,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_ORTHOPHOTO,\r\n                    title: \"Ortofoto \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"ORTHOIMAGERY.ORTHOPHOTOS\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-ortho-fr-ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNCARTO,\r\n                    title: 'Cartografía raster \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP,\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNBASEMAP,\r\n                    title: 'Mapa base \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGN\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-base-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNRELIEF,\r\n                    title: 'Relieve \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"ELEVATION.ELEVATIONGRIDCOVERAGE\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-estom-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"HR.ORTHOIMAGERY.ORTHOPHOTOS\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-ortho-fr-ign.jpg\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.OSM,\r\n                    title: 'OSM',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/osm/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'osm',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-osm.png',\r\n                    overviewMapLayer: TC.Consts.layer.OSM\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_VOYAGER,\r\n                    title: 'CARTO Voyager',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'voyager',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-voyager.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_LIGHT,\r\n                    title: 'CARTO light',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'light_all',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-light.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_DARK,\r\n                    title: 'CARTO dark',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'dark_all',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-dark.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.MAPBOX_STREETS,\r\n                    title: 'Mapbox Streets',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/mapbox/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'streets',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-mapbox-streets.png',\r\n                    overviewMapLayer: TC.Consts.layer.MAPBOX_STREETS\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.MAPBOX_SATELLITE,\r\n                    title: 'Mapbox Satellite',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/mapbox/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'satellite',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-mapbox-satellite.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.MAPBOX_STREETS\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.BLANK,\r\n                    title: 'Mapa en blanco',\r\n                    type: TC.Consts.layerType.VECTOR\r\n                }\r\n            ],\r\n\r\n            baseLayers: [\r\n                TC.Consts.layer.IDENA_BASEMAP,\r\n                TC.Consts.layer.IDENA_ORTHOPHOTO,\r\n                TC.Consts.layer.IDENA_CADASTER,\r\n                TC.Consts.layer.IDENA_CARTO\r\n            ],\r\n\r\n            defaultBaseLayer: TC.Consts.layer.IDENA_BASEMAP,\r\n\r\n            workLayers: [],\r\n\r\n            controls: {\r\n                loadingIndicator: true,\r\n                navBar: false,\r\n                scaleBar: false,\r\n                scale: false,\r\n                scaleSelector: false,\r\n                overviewMap: false,\r\n                basemapSelector: false,\r\n                attribution: true,\r\n                TOC: false,\r\n                coordinates: true,\r\n                legend: false,\r\n                popup: false,\r\n                search: {\r\n                    url: '//idena.navarra.es/ogc/wfs',\r\n                    allowedSearchTypes: {\r\n                        coordinates: {},\r\n                        municipality: {},\r\n                        urban: {},\r\n                        street: {},\r\n                        number: {},\r\n                        cadastral: {}\r\n                    }\r\n                },\r\n                measure: false,                \r\n                streetView: true,\r\n                featureInfo: true,\r\n                featureTools: true\r\n            },\r\n\r\n            layout: null,\r\n\r\n            styles: {\r\n                point: {\r\n                    fillColor: '#000000',\r\n                    fillOpacity: 0.1,\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    radius: 6,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    labelOffset: [0, -16],\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                marker: {\r\n                    classes: [\r\n                        TC.Consts.classes.MARKER + 1,\r\n                        TC.Consts.classes.MARKER + 2,\r\n                        TC.Consts.classes.MARKER + 3,\r\n                        TC.Consts.classes.MARKER + 4,\r\n                        TC.Consts.classes.MARKER + 5\r\n                    ],\r\n                    anchor: [.5, 1],\r\n                    width: 32,\r\n                    height: 32,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    labelOffset: [0, -32],\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                line: {\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                polygon: {\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    fillColor: '#000000',\r\n                    fillOpacity: 0.3,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                cluster: {\r\n                    point: {\r\n                        fillColor: '#333366',\r\n                        fillOpacity: 0.6,\r\n                        radius: getClusterRadius,\r\n                        label: '${features.length}',\r\n                        fontColor: \"#fff\",\r\n                        fontSize: 9\r\n                    }\r\n                },\r\n                selection: {\r\n                    point: {\r\n                        fillColor: '#0000ff',\r\n                        fillOpacity: 0.5,\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        radius: 6,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        labelOffset: [0, -16],\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    },\r\n                    line: {\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    },\r\n                    polygon: {\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        fillColor: '#000000',\r\n                        fillOpacity: .3,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    })();\r\n\r\n    (function () {\r\n        if (!Array.prototype.map) {\r\n            Array.prototype.map = function (fun /*, thisArg */) {\r\n                \"use strict\";\r\n\r\n                if (this === void 0 || this === null)\r\n                    throw new TypeError();\r\n\r\n                var t = Object(this);\r\n                var len = t.length >>> 0;\r\n                if (typeof fun !== \"function\")\r\n                    throw new TypeError();\r\n\r\n                var res = new Array(len);\r\n                var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n                for (var i = 0; i < len; i++) {\r\n                    // NOTE: Absolute correctness would demand Object.defineProperty\r\n                    //       be used.  But this method is fairly new, and failure is\r\n                    //       possible only if Object.prototype or Array.prototype\r\n                    //       has a property |i| (very unlikely), so use a less-correct\r\n                    //       but more portable alternative.\r\n                    if (i in t)\r\n                        res[i] = fun.call(thisArg, t[i], i, t);\r\n                }\r\n\r\n                return res;\r\n            };\r\n        }\r\n\r\n        /* \r\n         * proxify: returns cross-origin safe URL\r\n         */\r\n        TC.proxify = function (url) {\r\n            url = $.trim(url);\r\n            var result = url;\r\n            if (TC.Cfg.proxy) {\r\n                var prevent = false;\r\n                if (TC.Cfg.proxyExceptions) {\r\n                    for (var i = 0; i < TC.Cfg.proxyExceptions.length; i++) {\r\n                        if (url.indexOf(TC.Cfg.proxyExceptions[i]) > -1) {\r\n                            prevent = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!prevent && !TC.Util.isSameOrigin(url)) {\r\n                    if (typeof TC.Cfg.proxy == \"function\") {\r\n                        result = TC.Cfg.proxy(url);\r\n                    } else {\r\n                        result = TC.Cfg.proxy;\r\n                        if (url.substr(0, 4) != \"http\") result += window.location.protocol;\r\n                        result += encodeURIComponent(url);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n\r\n        var getHead = function () {\r\n            var result;\r\n            var d = document;\r\n            var ah = d.getElementsByTagName(\"head\");\r\n            if (ah.length === 0) {\r\n                result = d.createElement(\"head\");\r\n                d.documentElement.insertBefore(result, document.body);\r\n            }\r\n            else {\r\n                result = ah[0];\r\n            }\r\n            return result;\r\n        };\r\n\r\n        if (typeof TC.isDebug != \"boolean\") {\r\n            TC.isDebug = true;\r\n        };\r\n\r\n        var _showLoadFailedError = function (url) {\r\n            var mapObj = $('.' + TC.Consts.classes.MAP).data('map');\r\n            TC.error(\r\n                TC.Util.getLocaleString(mapObj.options.locale, \"urlFailedToLoad\",\r\n                    { url: url }),\r\n                [TC.Consts.msgErrorMode.TOAST, TC.Consts.msgErrorMode.EMAIL],\r\n                \"Error al cargar \" + url);\r\n        };\r\n\r\n        TC.syncLoadJS = function (url) {\r\n            var _sendRequest = function (url, callbackErrorFn) {\r\n                var req = new XMLHttpRequest();\r\n                req.open(\"GET\", url, false); // 'false': synchronous.\r\n                var result;\r\n\r\n                req.onreadystatechange = function (e) {\r\n                    if (req.readyState === 4) {\r\n                        if (req.status === 404) {\r\n                            result = false;\r\n                            callbackErrorFn(true);\r\n                        } else if (req.status !== 200) {\r\n                            callbackErrorFn();\r\n                            result = false;\r\n                        } else {\r\n                            result = req.responseText;\r\n                        }\r\n                    }\r\n                };\r\n\r\n\r\n                try {\r\n                    req.send(null);\r\n                } catch (error) {\r\n                    result = false;\r\n                    callbackErrorFn();\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            if (!/(\\.js|\\/)$/i.test(url)) { // Si pedimos un archivo sin extensión se la ponemos según el entorno\r\n                url = url + (TC.isDebug ? '.js' : '.min.js');\r\n            }\r\n\r\n            var reqResult = _sendRequest(url, function (is404) {\r\n                if (is404) {\r\n                    _showLoadFailedError(url);\r\n                    return false;\r\n                } else {\r\n                    return _sendRequest(url, function () {\r\n                        _showLoadFailedError(url);\r\n                    });\r\n                }\r\n            });\r\n\r\n            if (reqResult) {\r\n                var script = document.createElement(\"script\");\r\n                script.type = \"text/javascript\";\r\n                script.text = reqResult;\r\n                getHead().appendChild(script);\r\n            }\r\n        };\r\n\r\n        if (!window.Modernizr) {\r\n            TC.syncLoadJS(TC.apiLocation + TC.Consts.url.MODERNIZR);\r\n        }\r\n        Modernizr.touch = Modernizr.touchevents; // compatibilidad hacia atrás\r\n\r\n        TC.isLegacy = TC.isLegacy || !Modernizr.canvas;\r\n\r\n        if (!window.jQuery) {\r\n            if (Modernizr.canvas && !TC.isLegacy) { // > ie8\r\n                TC.syncLoadJS(TC.Consts.url.JQUERY);\r\n            }\r\n            else {\r\n                TC.syncLoadJS(TC.Consts.url.JQUERY_LEGACY);\r\n            }\r\n        }\r\n\r\n        if (!('Promise' in window)) {\r\n            TC.syncLoadJS(TC.apiLocation + TC.Consts.url.PROMISE_POLYFILL);\r\n        }\r\n        // Polyfill para NodeList.forEach\r\n        if (window.NodeList && !NodeList.prototype.forEach) {\r\n            NodeList.prototype.forEach = Array.prototype.forEach;\r\n        }\r\n        if (!('finally' in Promise.prototype)) {\r\n            // Muchos polyfills de Promise no implementan finally, lo hacemos aquí en ese caso\r\n            Promise.prototype.finally = function (callback) {\r\n                const ctor = this.constructor;\r\n                return this.then(\r\n                    function (val) {\r\n                        return ctor.resolve(callback()).then(function () {\r\n                            return value;\r\n                        });\r\n                    },\r\n                    function (err) {\r\n                        return ctor.resolve(callback()).then(function () {\r\n                            return ctor.reject(err);\r\n                        });\r\n                    }\r\n                );\r\n            };\r\n        }\r\n\r\n        // Parche para soportar $.when\r\n        if ('$' in window) {\r\n            $._oldWhen = $.when;\r\n            $.when = function () {\r\n                const newArgs = new Array(arguments.length);\r\n                for (var i = 0; i < arguments.length; i++) {\r\n                    const arg = newArgs[i] = arguments[i];\r\n                    if (arg instanceof Promise) {\r\n                        const newArg = $.Deferred();\r\n                        arg\r\n                            .then(function (val) {\r\n                                newArg.resolve(val)\r\n                            })\r\n                            .catch(function (err) {\r\n                                newArg.reject(err);\r\n                            });\r\n                        newArgs[i] = newArg;\r\n                    }\r\n                }\r\n                return $._oldWhen.apply(this, newArgs);\r\n            };\r\n        }\r\n\r\n        // Transformación de petición AJAX de jQuery a promesa nativa\r\n        TC.ajax = function (options) {\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                const method = options.method || 'GET';\r\n                var data;\r\n                if (options.data) {\r\n                    if (typeof options.data === 'string') {\r\n                        data = options.data;\r\n                    }\r\n                    else if (typeof options.data === 'object') {\r\n                        const paramArray = [];\r\n                        for (var key in options.data) {\r\n                            paramArray[paramArray.length] = key + '=' + options.data[key].toString();\r\n                        }\r\n                        data = paramArray.join('&');\r\n                    }\r\n                }\r\n                var url = options.url;\r\n                if (method === 'GET') {\r\n                    url = url + '?' + data;\r\n                }\r\n                const request = new XMLHttpRequest();\r\n                request.open(method, options.url);\r\n\r\n                if (options.contentType || typeof options.contentType === 'boolean') {\r\n                    if (options.contentType) {\r\n                        request.setRequestHeader('Content-Type', options.contentType + '; charset=UTF-8');\r\n                    }\r\n                    \r\n                }\r\n                else {\r\n                    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n                }\r\n\r\n                request.onreadystatechange = function (e) {\r\n                    if (request.readyState === 4) { // DONE\r\n                        if (request.status !== 200) {\r\n                            reject({\r\n                                status: request.status,\r\n                                msg: request.statusText,\r\n                                url: options.url\r\n                            });\r\n                        } else {\r\n                            var responseData;\r\n                            try {\r\n                                switch (options.responseType) {\r\n                                    case TC.Consts.mimeType.JSON:\r\n                                        responseData = JSON.parse(request.responseText);\r\n                                        break;\r\n                                    case TC.Consts.mimeType.XML:\r\n                                        responseData = new DOMParser().parseFromString(request.responseText, 'application/xml');\r\n                                        break;\r\n                                    default:\r\n                                        responseData = request.responseText;\r\n                                        break;\r\n                                }\r\n                                resolve(responseData);\r\n                            }\r\n                            catch (error) {\r\n                                reject(error);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n\r\n                try {\r\n                    request.send(method === 'POST' ? data : null);\r\n                } catch (error) {\r\n                    reject(Error(error));\r\n                }\r\n            });\r\n        };\r\n\r\n        // Completamos los datos de versión\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            var build;\r\n            var mapLibrary = 'Unknown library';\r\n            var OL2 = 'OpenLayers 2';\r\n            var OL = 'OpenLayers 4';\r\n            if (TC.Control) {\r\n                build = 'Compiled';\r\n                if (TC.isLegacy) {\r\n                    if (window.OpenLayers) {\r\n                        mapLibrary = OL2;\r\n                    }\r\n                }\r\n                else {\r\n                    if (window.ol) {\r\n                        mapLibrary = OL;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                build = 'On demand';\r\n                mapLibrary = TC.isLegacy ? OL2 : OL;\r\n            }\r\n            TC.version = TC.version + ' (' + build + '; ' + mapLibrary + '; @ ' + TC.apiLocation + ')';\r\n        });\r\n\r\n        TC.loadJSInOrder = function (condition, url, callback) {\r\n            TC.loadJS(condition, url, callback, true);\r\n        };\r\n\r\n        const addCrossOriginAttr = function (path, scriptEl) {\r\n            if (!TC.Util.isSameOrigin(path)) {\r\n                scriptEl.crossOrigin = \"anonymous\";\r\n            }\r\n        };\r\n\r\n        TC.loadJS = function (condition, url, callback, inOrder, notCrossOrigin) {\r\n            if (arguments.length < 4) {\r\n                inOrder = false;\r\n            }\r\n\r\n            var urls = $.isArray(url) ? url : [url];\r\n            urls = urls.map(function (elm) {\r\n                if (!/\\.js$/i.test(elm) && elm.indexOf(TC.apiLocation) === 0) { // Si pedimos un archivo sin extensión y es nuestro se la ponemos según el entorno\r\n                    return elm + (TC.isDebug ? '.js' : '.min.js');\r\n                }\r\n                return elm;\r\n            });\r\n\r\n            //si tiene canvas, es que es un navegador nuevo\r\n            if (Modernizr.canvas) {\r\n                if (condition) {\r\n                    urls = urls instanceof Array ? urls : [urls];                    \r\n\r\n                    var name = \"\";\r\n                    const getName = function (path) {\r\n                        return path.split('/').reverse().slice(0, 2).reverse().join('_').toLowerCase();\r\n                    };\r\n                    if (urls.length > 1) {\r\n                        var toReduce = urls.slice(0).filter(function (path, index) {\r\n                            if (loadjs.isDefined(getName(path))) {\r\n                                urls.splice(index, 1);\r\n                                loadjs.ready(getName(path), callback);\r\n                                return false;\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        });\r\n                        if (toReduce.length === 1) {\r\n                            name = getName(toReduce[0]);\r\n                        } else if (toReduce.length > 0) {\r\n                            name = toReduce.reduce(function (prev, curr) {\r\n                                return getName(prev) + \"_\" + getName(curr);\r\n                            });\r\n                        }\r\n                    } else {\r\n                        name = getName(urls[0]);\r\n                    }\r\n\r\n                    if (name.length > 0) {\r\n                        if (!loadjs.isDefined(name)) {\r\n                            var options = {\r\n                                async: !inOrder,\r\n                                numRetries: 1\r\n                            };\r\n\r\n                            if (!notCrossOrigin && !TC.Util.detectIE()) {\r\n                                options.before = addCrossOriginAttr;\r\n                            }\r\n\r\n                            loadjs(urls, name, options);\r\n                            loadjs.ready(name, {\r\n                                success: function () {\r\n                                    callback();\r\n                                },\r\n                                error: function (pathsNotFound) {\r\n                                    _showLoadFailedError(pathsNotFound);\r\n                                }\r\n                            });\r\n                        } else {\r\n                            loadjs.ready(name, callback);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    callback();\r\n                }\r\n            }\r\n            else {\r\n                if (condition) {\r\n                    for (var i = 0; i < urls.length; i++) {\r\n                        TC.syncLoadJS(urls[i]);\r\n                    }\r\n                }\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        };        \r\n\r\n        TC.loadCSS = function (url) {\r\n            const getName = function (path) {\r\n                return path.split('/').reverse().slice(0, 2).reverse().join('_').toLowerCase();\r\n            };\r\n\r\n            const name = getName(url);\r\n            if (!loadjs.isDefined(name)) {\r\n                loadjs(url, name, {\r\n                    error: function (pathsNotFound) {\r\n                        _showLoadFailedError(pathsNotFound);\r\n                    },\r\n                    numRetries: 1\r\n                });\r\n            } else {\r\n                loadjs.ready(name, {});\r\n            }\r\n        };\r\n\r\n        var projectionDataCache = {};\r\n\r\n        TC.getProjectionData = function (options) {\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                var code = options.crs.substr(options.crs.indexOf(':') + 1);\r\n                if (parseInt(code) === Number.NaN) {\r\n                    // El CRS no está en modo urn o EPSG\r\n                    code = options.crs.substr(options.crs.lastIndexOf('/') + 1);\r\n                }\r\n                var projData = projectionDataCache[code];\r\n                if (projData) {\r\n                    resolve(projData);\r\n                }\r\n                else {\r\n                    var url = TC.Consts.url.EPSG + '?format=json&q=' + code;\r\n                    const toolProxification = new TC.tool.Proxification(TC.proxify);\r\n                    toolProxification.fetchJSON(url, options).then(function (data) {\r\n                        projectionDataCache[code] = data;\r\n                        resolve(data);\r\n                    }).catch(function (error) {\r\n                        reject(Error(error));\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        TC.loadProjDef = function (options) {\r\n            options = options || {};\r\n            const crs = options.crs;\r\n            const epsgPrefix = 'EPSG:';\r\n            const urnPrefix = 'urn:ogc:def:crs:EPSG::';\r\n            const gmlPrefix = 'http://www.opengis.net/gml/srs/epsg.xml#';\r\n\r\n            var getDef;\r\n            if (TC.isLegacy) {\r\n                if (!window[TC.Consts.PROJ4JSOBJ_LEGACY]) {\r\n                    TC.syncLoadJS(TC.url.proj4js);\r\n                }\r\n                getDef = function (name) {\r\n                    return Proj4js.defs[name];\r\n                };\r\n            }\r\n            else {\r\n                if (!window[TC.Consts.PROJ4JSOBJ]) {\r\n                    TC.syncLoadJS(TC.url.proj4js);\r\n                }\r\n                getDef = function (name) {\r\n                    return proj4.defs(name);\r\n                };\r\n            }\r\n            if (!window.Proj4js) {\r\n                window.Proj4js = {\r\n                    Proj: function (code) { return proj4(Proj4js.defs[code]); },\r\n                    defs: proj4.defs,\r\n                    transform: proj4\r\n                };\r\n            }\r\n            const loadProj4Def = function (code, def) {\r\n                Proj4js.defs[code] = def;\r\n                if (!TC.isLegacy) {\r\n                    proj4.defs(code, def);\r\n                }\r\n            };\r\n            const loadDef = function (code, def, name) {\r\n                const epsgCode = epsgPrefix + code;\r\n                const urnCode = urnPrefix + code;\r\n                const gmlCode = gmlPrefix + code;\r\n                var axisUnawareDef;\r\n                if (typeof def === 'object') {\r\n                    axisUnawareDef = $.extend({}, def);\r\n                    def = $.extend({}, def);\r\n                    if (axisUnawareDef.axis) {\r\n                        delete axisUnawareDef.axis;\r\n                    }\r\n                }\r\n                else if (typeof def === 'string') {\r\n                    axisUnawareDef = def.replace('+axis=neu', '');\r\n                }\r\n                loadProj4Def(epsgCode, def);\r\n                loadProj4Def(urnCode, def);\r\n                // Por convención, los CRS definidos por URI siempre tienen orden de coordenadas X-Y.\r\n                loadProj4Def(gmlCode, axisUnawareDef);\r\n                if (crs.indexOf('http') === 0) {\r\n                    // El CRS es tipo URI, usado seguramente en un GML.\r\n                    loadProj4Def(crs, axisUnawareDef);\r\n                    getDef(crs).name = name;\r\n                }\r\n                getDef(epsgCode).name = name;\r\n                getDef(gmlCode).name = name;\r\n            };\r\n            const loadDefResponse = function (data) {\r\n                var result = data.status === 'ok' && data.number_result === 1;\r\n                if (result) {\r\n                    var def = data.results[0];\r\n                    loadDef(def.code, def.proj4, def.name);\r\n                }\r\n                return result;\r\n            };\r\n\r\n            var idx = crs.lastIndexOf('#');\r\n            if (idx < 0) {\r\n                idx = crs.lastIndexOf('/');\r\n            }\r\n            if (idx < 0) {\r\n                idx = crs.lastIndexOf(':');\r\n            }\r\n            var code = crs.substr(idx + 1);\r\n            var def = getDef(crs);\r\n            if (def) {\r\n                loadDef(code, def, options.name);\r\n                if ($.isFunction(options.callback)) {\r\n                    options.callback();\r\n                }\r\n            }\r\n            else {\r\n                if (options.def) {\r\n                    loadDef(code, options.def, options.name);\r\n                    if ($.isFunction(options.callback)) {\r\n                        options.callback();\r\n                    }\r\n                }\r\n                else {\r\n                    TC.getProjectionData(options).then(function (data) {\r\n                        if (loadDefResponse(data) && $.isFunction(options.callback)) {\r\n                            options.callback();\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        TC.url = {\r\n            templating: [\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING,\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING_I18N,\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING_OVERRIDES\r\n            ]\r\n        };\r\n\r\n        if (TC.isLegacy) {\r\n            TC.url.ol = TC.apiLocation + TC.Consts.url.OL_LEGACY;\r\n            TC.url.olConnector = TC.apiLocation + TC.Consts.url.OL_CONNECTOR_LEGACY;\r\n            TC.url.proj4js = TC.apiLocation + TC.Consts.url.PROJ4JS_LEGACY;\r\n        }\r\n        else {\r\n            TC.url.ol = TC.apiLocation + TC.Consts.url.OL;\r\n            TC.url.olConnector = TC.apiLocation + TC.Consts.url.OL_CONNECTOR;\r\n            TC.url.proj4js = TC.apiLocation + TC.Consts.url.PROJ4JS;\r\n        }\r\n\r\n        // Precargamos el CRS por defecto\r\n        TC.loadProjDef({ crs: 'EPSG:25830', name: 'ETRS89 / UTM zone 30N', def: '+proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs' });\r\n        // Precargamos los CRS de IDENA que tienen orden de ejes neu\r\n        TC.loadProjDef({ crs: 'EPSG:4258', name: 'ETRS89', def: '+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3040', name: 'ETRS89 / UTM zone 28N (N-E)', def: '+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3041', name: 'ETRS89 / UTM zone 29N (N-E)', def: '+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3042', name: 'ETRS89 / UTM zone 30N (N-E)', def: '+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3043', name: 'ETRS89 / UTM zone 31N (N-E)', def: '+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:4230', name: 'ED50', def: '+proj=longlat +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +no_defs +axis=neu' });\r\n\r\n        TC.Cfg = $.extend(true, {}, TC.Defaults, TC.Cfg);\r\n\r\n        TC.capabilities = {};\r\n\r\n        TC.WFScapabilities = {};\r\n\r\n        TC.cache = {};\r\n\r\n        TC.alert = function (text) {\r\n            alert(text);\r\n        };\r\n\r\n        TC.prompt = function (text, value, callback) {\r\n            var newValue = prompt(text, value);\r\n            if ($.isFunction(callback)) {\r\n                callback(newValue);\r\n            }\r\n        };\r\n\r\n        TC.confirm = function (text, accept, cancel) {\r\n            if (confirm(text)) {\r\n                if ($.isFunction(accept)) {\r\n                    accept();\r\n                }\r\n            }\r\n            else {\r\n                if ($.isFunction(cancel)) {\r\n                    cancel();\r\n                }\r\n            }\r\n        };\r\n\r\n        TC.error = function (text) {\r\n            if (window.console) {\r\n                console.error(text);\r\n            }\r\n\r\n        };\r\n\r\n        if (!TC.Map) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/Map');\r\n        }\r\n        if (!TC.Util) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/Util');\r\n        }\r\n\r\n        // OpenLayers connectors\r\n        TC.wrap = {\r\n            Map: function (map) {\r\n                var self = this;\r\n                self.parent = map;\r\n                self.map = null;\r\n                /*\r\n                 *  wrap.getMap: Gets OpenLayers map or a promise for the OpenLayers map\r\n                 */\r\n                self.getMap = function () {\r\n                    return self._promise;\r\n                };\r\n            },\r\n            Layer: function (layer) {\r\n                var self = this;\r\n                self.parent = layer;\r\n                self.layer = null;\r\n                TC.EventTarget.call(self);\r\n                /*\r\n                 *  getLayer: Gets OpenLayers layer or a promise for the OpenLayers layer\r\n                 */\r\n                self.getLayer = function () {\r\n                    if (self.layer) {\r\n                        return Promise.resolve(self.layer);\r\n                    }\r\n                    return self._promise;\r\n                };\r\n                /*\r\n                 *  setLayer: Resolves the deferred layer object\r\n                 * Parameter: the OpenLayers layer\r\n                 */\r\n                self.setLayer = function (olLayer) {\r\n                    self.layer = olLayer;\r\n                };\r\n            },\r\n            layer: {\r\n                Raster: function () { TC.wrap.Layer.apply(this, arguments); },\r\n                Vector: function () { TC.wrap.Layer.apply(this, arguments); }\r\n            },\r\n            Control: function (ctl) {\r\n                var self = this;\r\n                self.parent = ctl;\r\n            },\r\n            control: {\r\n                Click: function () { TC.wrap.Control.apply(this, arguments); },\r\n                ScaleBar: function () { TC.wrap.Control.apply(this, arguments); },\r\n                NavBar: function () { TC.wrap.Control.apply(this, arguments); },\r\n                NavBarHome: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Coordinates: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Search: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Measure: function () { TC.wrap.Control.apply(this, arguments); },\r\n                OverviewMap: function () { TC.wrap.Control.apply(this, arguments); },\r\n                FeatureInfo: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Popup: function () { TC.wrap.Control.apply(this, arguments); },\r\n                GeometryFeatureInfo: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Geolocation: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Draw: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Modify: function () { TC.wrap.Control.apply(this, arguments); },\r\n                CacheBuilder: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Edit: function () { TC.wrap.Control.apply(this, arguments); },\r\n                ResultsPanel: function () { TC.wrap.Control.apply(this, arguments); }\r\n            },\r\n            Feature: function () { },\r\n            Geometry: function () { }\r\n        };\r\n        TC.inherit(TC.wrap.Layer, TC.EventTarget);\r\n        TC.inherit(TC.wrap.layer.Raster, TC.wrap.Layer);\r\n        TC.inherit(TC.wrap.layer.Vector, TC.wrap.Layer);\r\n        TC.inherit(TC.wrap.control.Click, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.ScaleBar, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.NavBar, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.NavBarHome, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Coordinates, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Measure, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.OverviewMap, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Popup, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.FeatureInfo, TC.wrap.control.Click);\r\n        TC.inherit(TC.wrap.control.GeometryFeatureInfo, TC.wrap.control.Click);\r\n        TC.inherit(TC.wrap.control.Geolocation, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Draw, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.CacheBuilder, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Edit, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.ResultsPanel, TC.wrap.Control);\r\n\r\n        TC.loadCSS(TC.apiLocation + 'TC/css/tcmap.css');\r\n\r\n\r\n        TC.loadJS(!Modernizr.urlparser, TC.apiLocation + TC.Consts.url.URL_POLYFILL, function () { });\r\n\r\n        var uids = {};\r\n        TC.getUID = function (prefix) {\r\n            prefix = prefix || '';\r\n            var value = uids[prefix];\r\n            if (!value) {\r\n                value = uids[prefix] = 1;\r\n            }\r\n            var result = prefix + value;\r\n            uids[prefix] = value + 1;\r\n            return result;\r\n        };\r\n\r\n        const pluses = /\\+/g;\r\n        function raw(s) {\r\n            return s;\r\n        }\r\n        function decoded(s) {\r\n            return decodeURIComponent(s.replace(pluses, ' '));\r\n        }\r\n\r\n        TC.cookie = function (key, value, options) {\r\n\r\n            // key and at least value given, set cookie...\r\n            if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null)) {\r\n                options = $.extend({}, options);\r\n\r\n                if (value === null) {\r\n                    options.expires = -1;\r\n                }\r\n\r\n                if (typeof options.expires === 'number') {\r\n                    var days = options.expires, t = options.expires = new Date();\r\n                    t.setDate(t.getDate() + days);\r\n                }\r\n\r\n                value = String(value);\r\n\r\n                return (document.cookie = [\r\n                    encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\r\n                    options.expires ? ';expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n                    options.path ? ';path=' + options.path : '',\r\n                    options.domain ? ';domain=' + options.domain : '',\r\n                    options.secure ? ';secure' : ''\r\n                ].join(''));\r\n            }\r\n\r\n            // key and possibly options given, get cookie...\r\n            options = value || {};\r\n            var decode = options.raw ? raw : decoded;\r\n            var cookies = document.cookie.split('; ');\r\n            for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {\r\n                if (decode(parts.shift()) === key) {\r\n                    return decode(parts.join('='));\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n\r\n    })();\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\r\n    TC.browser = TC.Util.getBrowser();\r\n\r\n    TC.loadJS(!TC.Cfg.acceptedBrowserVersions, TC.apiLocation + 'TC/config/browser-versions.js', function (result) {\r\n        var isSupported = true;\r\n        var versions = TC.Cfg.acceptedBrowserVersions;\r\n\r\n        var match = versions.filter(function (item) {\r\n            return item.name.toLowerCase() === TC.browser.name.toLowerCase();\r\n        });\r\n\r\n        // GLS: 14/02/2019 Añadimos gestión para que no muestre tostada ni envíe correos en caso de que el navegador sea uno expirado\r\n        if (match.length > 0 && match[0].expired) {            \r\n            TC.Cfg.loggingErrorsEnabled = false;\r\n        } else {\r\n            if (match.length > 0 && !isNaN(match[0].version)) {\r\n                if (TC.browser.version < match[0].version) {\r\n                    isSupported = false;\r\n                }\r\n            }\r\n\r\n            if (TC.Cfg.oldBrowserAlert && !isSupported) {\r\n                TC.Cfg.loggingErrorsEnabled = false;\r\n                var mapObj = $('.' + TC.Consts.classes.MAP).data('map');\r\n\r\n                TC.i18n.loadResources(!TC.i18n[mapObj.options.locale], TC.apiLocation + 'TC/resources/', mapObj.options.locale).then(function () {\r\n                    TC.error(TC.Util.getLocaleString(mapObj.options.locale, 'outdatedBrowser'), TC.Consts.msgErrorMode.TOAST);\r\n                });\r\n            }\r\n        }        \r\n    });\r\n\r\n    if (/ip(ad|hone|od)/i.test(navigator.userAgent)) {\r\n        // En iOS, el primer click es un mouseover, por eso usamos touchstart como sustituto.\r\n        TC.Consts.event.CLICK = \"touchstart\";\r\n    }\r\n\r\n    // Gestión de errores\r\n    if (!window.JL) {\r\n        TC.syncLoadJS(TC.apiLocation + TC.Consts.url.JSNLOG);\r\n    }\r\n    JL.defaultAjaxUrl = TC.Consts.url.ERROR_LOGGER;\r\n\r\n    const onError = (function () {\r\n        var errorCount = 0;\r\n\r\n        var mapObj;\r\n\r\n        return function (e) {\r\n            mapObj = mapObj || TC.Map.get(document.querySelector('.' + TC.Consts.classes.MAP));\r\n\r\n            var errorMsg, url = \"\", lineNumber = -1, column = -1, errorObj, apiError;\r\n\r\n            if (e.type === \"unhandledrejection\") {\r\n                errorMsg = e.reason.message;\r\n                if (e.reason.stack) {\r\n                    apiError = e.reason.stack.indexOf(TC.apiLocation) > 0;\r\n                } else {\r\n                    apiError = true;\r\n                }\r\n                errorObj = e.reason;\r\n            } else {\r\n                errorMsg = e.message;\r\n                url = e.filename;\r\n                lineNumber = e.lineno;\r\n                column = e.colno;\r\n                errorObj = e.error;\r\n                apiError = url.indexOf(TC.apiLocation) > 0;\r\n            }\r\n\r\n            // Si notifyApplicationErrors === false solo capturamos los errores de la API\r\n            if ((TC.Cfg.notifyApplicationErrors || apiError) && errorCount < TC.Cfg.maxErrorCount && TC.Cfg.loggingErrorsEnabled) {\r\n                // Send object with all data to server side log, using severity fatal, \r\n                // from logger \"onerrorLogger\"\r\n                var msg = apiError ? TC.Consts.text.API_ERROR : TC.Consts.text.APP_ERROR;\r\n                JL(\"onerrorLogger\").fatalException({\r\n                    \"msg\": msg,\r\n                    \"errorMsg\": errorMsg,\r\n                    \"url\": url,\r\n                    \"lineNumber\": lineNumber,\r\n                    \"column\": column,\r\n                    \"appUrl\": location.href,\r\n                    \"prevState\": mapObj.getPreviousMapState(),\r\n                    \"userAgent\": navigator.userAgent\r\n                }, errorObj);\r\n                errorCount++;\r\n\r\n                if (!TC.isDebug) {\r\n                    var DEFAULT_CONTACT_EMAIL = \"webmaster@itracasa.es\";\r\n                    TC.i18n.loadResources(!TC.i18n[mapObj.options.locale], TC.apiLocation + 'TC/resources/', mapObj.options.locale)\r\n                        .then(function () {\r\n                            TC.error(TC.Util.getLocaleString(mapObj.options.locale, \"genericError\") + (mapObj.options.contactEmail || DEFAULT_CONTACT_EMAIL), { type: TC.Consts.msgType.ERROR });\r\n                        });\r\n                }\r\n            }\r\n            // Tell browser to run its own error handler as well   \r\n            return false;\r\n        };\r\n    })();\r\n\r\n    window.addEventListener('error', onError, false);\r\n    window.addEventListener('unhandledrejection', onError, false);\r\n});"],"file":"../tcmap.min.js"}