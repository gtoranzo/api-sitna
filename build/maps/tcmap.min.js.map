{"version":3,"sources":["tcmap.js"],"names":["loadjs","l","c","f","u","o","e","n","t","length","splice","s","call","success","error","h","r","i","document","async","numRetries","before","a","replace","test","createElement","rel","href","src","onload","onerror","onbeforeload","type","sheet","cssText","code","defaultPrevented","head","appendChild","trim","push","ready","done","reset","isDefined","TC","version","apiLocation","script","currentScript","scripts","getElementsByTagName","getAttribute","substr","lastIndexOf","Consts","OLNS_LEGACY","OLNS","PROJ4JSOBJ_LEGACY","PROJ4JSOBJ","GEOGRAPHIC","UTM","OLD_BROWSER_ALERT","CLUSTER_ANIMATION_DURATION","ZOOM_ANIMATION_DURATION","URL_MAX_LENGTH","METER_PRECISION","DEGREE_PRECISION","EXTENT_TOLERANCE","url","SPLIT_REGEX","MODERNIZR","JQUERY_LEGACY","JQUERY","OL_LEGACY","OL","OL_CONNECTOR_LEGACY","OL_CONNECTOR","TEMPLATING","TEMPLATING_I18N","TEMPLATING_OVERRIDES","PROJ4JS_LEGACY","PROJ4JS","EPSG","LOCALFORAGE","D3C3","CESIUM","JSNLOG","ERROR_LOGGER","PDFMAKE","JSONPACK","UA_PARSER","HASH","URL_POLYFILL","PROMISE_POLYFILL","classes","MAP","POINT","MARKER","VISIBLE","HIDDEN","COLLAPSED","CHECKED","DISABLED","ACTIVE","DEFAULT","LASTCHILD","TRANSPARENT","DROP","LOADING","IPAD_IOS7_FIX","INFO","WARNING","ERROR","THREED","msgType","msgErrorMode","TOAST","CONSOLE","EMAIL","event","MAPLOAD","MAPREADY","BEFORELAYERADD","LAYERADD","LAYERREMOVE","LAYERORDER","BEFORELAYERUPDATE","LAYERUPDATE","LAYERERROR","BEFOREBASELAYERCHANGE","BASELAYERCHANGE","BEFOREUPDATE","UPDATE","BEFOREZOOM","ZOOM","BEFOREUPDATEPARAMS","UPDATEPARAMS","VECTORUPDATE","FEATUREADD","BEFOREFEATURESADD","FEATURESADD","FEATUREREMOVE","FEATURESCLEAR","FEATURESIMPORT","FEATURESIMPORTERROR","BEFORETILELOAD","TILELOAD","TILELOADERROR","CONTROLADD","CONTROLACTIVATE","CONTROLDEACTIVATE","BEFORECONTROLRENDER","CONTROLRENDER","BEFORELAYOUTLOAD","LAYOUTLOAD","LAYERVISIBILITY","LAYEROPACITY","FEATURECLICK","NOFEATURECLICK","FEATUREOVER","FEATUREOUT","BEFOREFEATUREINFO","FEATUREINFO","NOFEATUREINFO","FEATUREINFOERROR","CLICK","MOUSEUP","MOUSEMOVE","MOUSELEAVE","STARTLOADING","STOPLOADING","EXTERNALSERVICEADDED","ZOOMTO","PROJECTIONCHANGE","VIEWCHANGE","TERRAINPROVIDERADD","TERRAINPROVIDERREMOVE","OVERVIEWBASELAYERCHANGE","POPUP","layer","IDENA_ORTHOPHOTO","IDENA_BASEMAP","IDENA_CADASTER","IDENA_CARTO","IDENA_ORTHOPHOTO2018","IDENA_ORTHOPHOTO2017","IDENA_ORTHOPHOTO2014","IDENA_ORTHOPHOTO2012","IDENA_DYNBASEMAP","IDENA_DYNORTHOPHOTO","IDENA_DYNORTHOPHOTO2018","IDENA_DYNORTHOPHOTO2017","IDENA_DYNORTHOPHOTO2014","IDENA_DYNORTHOPHOTO2012","IDENA_DYNCARTO","IDENA_BW_RELIEF","IDENA_BASEMAP_ORTHOPHOTO","IGN_ES_CARTO","IGN_ES_BASEMAP","IGN_ES_BASEMAP_GREY","IGN_ES_RELIEF","IGN_ES_ORTHOPHOTO","IGN_ES_DYNCARTO","IGN_ES_DYNBASEMAP","IGN_ES_DYNBASEMAP_GREY","IGN_ES_DYNRELIEF","IGN_ES_DYNORTHOPHOTO","IGN_FR_CARTO","IGN_FR_BASEMAP","IGN_FR_RELIEF","IGN_FR_ORTHOPHOTO","IGN_FR_DYNCARTO","IGN_FR_DYNBASEMAP","IGN_FR_DYNRELIEF","IGN_FR_DYNORTHOPHOTO","OSM","CARTO_VOYAGER","CARTO_LIGHT","CARTO_DARK","MAPBOX_STREETS","MAPBOX_SATELLITE","BLANK","text","API_ERROR","APP_ERROR","layerType","WMS","WMTS","WFS","VECTOR","KML","GPX","GML","GEOJSON","GROUP","geom","MULTIPOINT","POLYLINE","POLYGON","MULTIPOLYLINE","MULTIPOLYGON","CIRCLE","RECTANGLE","searchType","CADASTRAL","COORDINATES","MUNICIPALITY","COUNCIL","LOCALITY","STREET","NUMBER","URBAN","COMMONWEALTH","ROAD","ROADPK","PLACENAME","PLACENAMEMUNICIPALITY","mapSearchType","GENERIC","comparison","EQUAL_TO","NOT_EQUAL_TO","LESS_THAN","GREATER_THAN","LESS_THAN_EQUAL_TO","GREATER_THAN_EQUAL_TO","LIKE","logicalOperator","AND","OR","WMTSEncoding","KVP","RESTFUL","mimeType","PNG","JPEG","JSON","XML","format","GML2","GML3","TOPOJSON","WKT","WFSErrors","GetFeatureNotAvailable","LayersNotAvailable","NoLayers","NoValidLayers","QueryNotAvailable","CapabilitiesParseError","NumMaxFeatures","GetCapabilities","Indeterminate","NoFeatures","visibility","NOT_VISIBLE","NOT_VISIBLE_AT_RESOLUTION","HAS_VISIBLE","view","PRINTING","units","DEGREES","METERS","Defaults","clusterRadii","imageRatio","proxy","crs","utmCrs","geoCrs","initialExtent","maxExtent","baselayerExtent","resolutions","pointBoundsRadius","extentMargin","mouseWheelZoom","attribution","oldBrowserAlert","notifyApplicationErrors","loggingErrorsEnabled","maxErrorCount","layoutURLParamName","titleURLParamName","locale","screenSize","pixelTolerance","maxResolutionError","toastDuration","avgTileSize","availableBaseLayers","id","title","matrixSet","layerNames","encoding","isDefault","hideTree","thumbnail","fallbackLayer","overviewMapLayer","ignoreProxification","baseLayers","defaultBaseLayer","workLayers","controls","loadingIndicator","navBar","scaleBar","scale","scaleSelector","overviewMap","basemapSelector","TOC","coordinates","legend","popup","search","allowedSearchTypes","municipality","urban","street","number","cadastral","measure","streetView","featureInfo","featureTools","layout","styles","point","fillColor","fillOpacity","strokeColor","strokeWidth","radius","labelOutlineWidth","labelOutlineColor","labelOffset","fontColor","fontSize","marker","anchor","width","height","line","polygon","cluster","feature","count","features","result","Math","round","sqrt","label","selection","Array","prototype","map","fun","this","TypeError","Object","len","res","thisArg","arguments","proxify","$","Cfg","prevent","proxyExceptions","indexOf","Util","isSameOrigin","window","location","protocol","encodeURIComponent","isDebug","_showLoadFailedError","mapObj","data","getLocaleString","options","syncLoadJS","_sendRequest","callbackErrorFn","req","XMLHttpRequest","open","onreadystatechange","readyState","status","responseText","send","reqResult","is404","d","ah","documentElement","insertBefore","body","getHead","Modernizr","touch","touchevents","isLegacy","canvas","jQuery","NodeList","forEach","Promise","finally","callback","ctor","constructor","then","val","resolve","value","err","reject","_oldWhen","when","newArgs","arg","newArg","Deferred","catch","apply","ajax","method","paramArray","key","toString","join","request","contentType","setRequestHeader","msg","statusText","responseData","responseType","parse","DOMParser","parseFromString","Error","addEventListener","build","mapLibrary","OL2","Control","OpenLayers","ol","loadJSInOrder","condition","loadJS","addCrossOriginAttr","path","scriptEl","crossOrigin","inOrder","notCrossOrigin","urls","isArray","elm","name","getName","split","reverse","slice","toLowerCase","toReduce","filter","index","reduce","prev","curr","detectIE","pathsNotFound","loadCSS","projectionDataCache","getProjectionData","parseInt","Number","NaN","projData","tool","Proxification","fetchJSON","loadProjDef","getDef","proj4js","Proj4js","defs","proj4","Proj","transform","loadProj4Def","def","loadDef","epsgCode","urnCode","gmlCode","axisUnawareDef","extend","axis","idx","isFunction","number_result","results","loadDefResponse","templating","olConnector","capabilities","WFScapabilities","cache","alert","prompt","newValue","confirm","accept","cancel","console","Map","wrap","self","parent","getMap","_promise","Layer","EventTarget","getLayer","setLayer","olLayer","Raster","Vector","ctl","control","Click","ScaleBar","NavBar","NavBarHome","Coordinates","Search","Measure","OverviewMap","FeatureInfo","Popup","GeometryFeatureInfo","Geolocation","Draw","Modify","CacheBuilder","Edit","ResultsPanel","Feature","Geometry","inherit","urlparser","uids","getUID","prefix","pluses","raw","decoded","decodeURIComponent","cookie","defaults","expires","days","Date","setDate","getDate","String","toUTCString","domain","secure","parts","decode","cookies","shift","browser","getBrowser","acceptedBrowserVersions","isSupported","match","item","expired","isNaN","i18n","loadResources","navigator","userAgent","JL","defaultAjaxUrl","onError","errorCount","get","querySelector","errorMsg","errorObj","apiError","lineNumber","column","reason","message","stack","filename","lineno","colno","fatalException","appUrl","prevState","getPreviousMapState","contactEmail"],"mappings":"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","sourcesContent":["/**\r\n * LoadJS descargado de https://github.com/muicss/loadjs\r\n * @version 3.5.2\r\n */\r\nloadjs = function () { var l = function () { }, c = {}, f = {}, u = {}; function o(e, n) { if (e) { var t = u[e]; if (f[e] = n, t) for (; t.length;)t[0](e, n), t.splice(0, 1) } } function s(e, n) { e.call && (e = { success: e }), n.length ? (e.error || l)(n) : (e.success || l)(e) } function h(t, r, i, c) { var o, s, e = document, n = i.async, f = (i.numRetries || 0) + 1, u = i.before || l, a = t.replace(/^(css|img)!/, \"\"); c = c || 0, /(^css!|\\.css$)/.test(t) ? (o = !0, (s = e.createElement(\"link\")).rel = \"stylesheet\", s.href = a) : /(^img!|\\.(png|gif|jpg|svg)$)/.test(t) ? (s = e.createElement(\"img\")).src = a : ((s = e.createElement(\"script\")).src = t, s.async = void 0 === n || n), !(s.onload = s.onerror = s.onbeforeload = function (e) { var n = e.type[0]; if (o && \"hideFocus\" in s) try { s.sheet.cssText.length || (n = \"e\") } catch (e) { 18 != e.code && (n = \"e\") } if (\"e\" == n && (c += 1) < f) return h(t, r, i, c); r(t, n, e.defaultPrevented) }) !== u(t, s) && e.head.appendChild(s) } function t(e, n, t) { var r, i; if (n && n.trim && (r = n), i = (r ? t : n) || {}, r) { if (r in c) throw \"LoadJS\"; c[r] = !0 } !function (e, r, n) { var t, i, c = (e = e.push ? e : [e]).length, o = c, s = []; for (t = function (e, n, t) { if (\"e\" == n && s.push(e), \"b\" == n) { if (!t) return; s.push(e) } --c || r(s) }, i = 0; i < o; i++)h(e[i], t, n) }(e, function (e) { s(i, e), o(r, e) }, i) } return t.ready = function (e, n) { return function (e, t) { e = e.push ? e : [e]; var n, r, i, c = [], o = e.length, s = o; for (n = function (e, n) { n.length && c.push(e), --s || t(c) }; o--;)r = e[o], (i = f[r]) ? n(r, i) : (u[r] = u[r] || []).push(n) }(e, function (e) { s(n, e) }), t }, t.done = function (e) { o(e, []) }, t.reset = function () { c = {}, f = {}, u = {} }, t.isDefined = function (e) { return e in c }, t }();\r\n\r\nvar TC = TC || {};\r\n/*\r\n * Initialization\r\n */\r\nTC.version = '1.6.0';\r\n(function () {\r\n    if (!TC.apiLocation) {\r\n        var src;\r\n        var script;\r\n        if (document.currentScript) {\r\n            script = document.currentScript;\r\n        }\r\n        else {\r\n            var scripts = document.getElementsByTagName('script');\r\n            script = scripts[scripts.length - 1];\r\n        }\r\n        var src = script.getAttribute('src');\r\n        TC.apiLocation = src.substr(0, src.lastIndexOf('/') + 1);\r\n    }\r\n})();\r\n\r\nif (!TC.Consts) {\r\n    TC.Consts = {};\r\n    TC.Consts.OLNS_LEGACY = 'OpenLayers';\r\n    TC.Consts.OLNS = 'ol';\r\n    TC.Consts.PROJ4JSOBJ_LEGACY = 'Proj4js';\r\n    TC.Consts.PROJ4JSOBJ = 'proj4';\r\n    TC.Consts.GEOGRAPHIC = 'geographic';\r\n    TC.Consts.UTM = 'UTM';\r\n    TC.Consts.OLD_BROWSER_ALERT = 'TC.oldBrowserAlert';\r\n    TC.Consts.CLUSTER_ANIMATION_DURATION = 200;\r\n    TC.Consts.ZOOM_ANIMATION_DURATION = 300;\r\n    TC.Consts.URL_MAX_LENGTH = 2048;\r\n    TC.Consts.METER_PRECISION = 0;\r\n    TC.Consts.DEGREE_PRECISION = 5;\r\n    TC.Consts.EXTENT_TOLERANCE = 0.9998;/*URI: debido al redondeo del extente en el hash se obtiene un nivel de resolución mayor al debido. Con este valor definimos una tolerancia para que use una resolución si es muy muy muy próxima*/\r\n    TC.Consts.url = {\r\n        SPLIT_REGEX: /([^:]*:)?\\/\\/([^:]*:?[^@]*@)?([^:\\/\\?]*):?([^\\/\\?]*)/,\r\n        MODERNIZR: 'lib/modernizr.js',\r\n        JQUERY_LEGACY: TC.apiLocation + 'lib/jquery/jquery.1.10.2.js',\r\n        JQUERY: '//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.js',\r\n        OL_LEGACY: 'lib/OpenLayers/OpenLayers.sitna.js',\r\n        OL: 'lib/ol/build/ol-custom.js',\r\n        OL_CONNECTOR_LEGACY: 'TC/ol/ol2.js',\r\n        OL_CONNECTOR: 'TC/ol/ol.js',\r\n        TEMPLATING: 'lib/dust/dust-full-helpers.min.js',\r\n        TEMPLATING_I18N: 'lib/dust/dustjs-i18n.min.js',\r\n        TEMPLATING_OVERRIDES: 'lib/dust/dust.overrides.js',\r\n        PROJ4JS_LEGACY: 'lib/proj4js/legacy/proj4js-compressed.js',\r\n        PROJ4JS: 'lib/proj4js/proj4-src.js',\r\n        EPSG: 'https://epsg.io/',\r\n        LOCALFORAGE: TC.apiLocation + 'lib/localForage/localforage.min.js',\r\n        D3C3: TC.apiLocation + 'lib/d3c3/d3c3.min.js',\r\n        CESIUM: TC.apiLocation + 'lib/cesium/release/Cesium.js',\r\n        JSNLOG: 'lib/jsnlog/jsnlog.min.js',\r\n        ERROR_LOGGER: TC.apiLocation + 'errors/logger.ashx',\r\n        PDFMAKE: TC.apiLocation + 'lib/pdfmake/pdfmake-fonts.min.js',\r\n        JSONPACK: 'lib/jsonpack/jsonpack.min.js',\r\n        UA_PARSER: 'lib/ua-parser/ua-parser.min.js',\r\n        HASH: 'lib/jshash/md5-min.js',\r\n        URL_POLYFILL: 'lib/polyfill/url.js',\r\n        PROMISE_POLYFILL: 'lib/polyfill/promise/polyfill.min.js'\r\n    };\r\n    TC.Consts.classes = {\r\n        MAP: 'tc-map',\r\n        POINT: 'tc-point',\r\n        MARKER: 'tc-marker',\r\n        VISIBLE: 'tc-visible',\r\n        HIDDEN: 'tc-hidden',\r\n        COLLAPSED: 'tc-collapsed',\r\n        CHECKED: 'tc-checked',\r\n        DISABLED: 'tc-disabled',\r\n        ACTIVE: 'tc-active',\r\n        DEFAULT: 'tc-default',\r\n        LASTCHILD: 'tc-lastchild',\r\n        TRANSPARENT: 'tc-transparent',\r\n        DROP: 'tc-drop',\r\n        LOADING: 'tc-loading',\r\n        IPAD_IOS7_FIX: 'tc-ipad-ios7-fix',\r\n        INFO: 'tc-msg-info',\r\n        WARNING: 'tc-msg-warning',\r\n        ERROR: 'tc-msg-error',\r\n        THREED: 'tc-threed'\r\n    };\r\n    TC.Consts.msgType = {\r\n        INFO: 'info',\r\n        WARNING: 'warning',\r\n        ERROR: 'error'\r\n    };\r\n    TC.Consts.msgErrorMode = {\r\n        TOAST: 'toast',\r\n        CONSOLE: 'console',\r\n        EMAIL: 'email'\r\n    };\r\n    TC.Consts.event = {\r\n        /**\r\n         * Se lanza cuando el mapa ha cargado todas sus capas iniciales y todos sus controles\r\n         * @event mapload\r\n         */\r\n        MAPLOAD: 'mapload.tc',\r\n        MAPREADY: 'mapready.tc',\r\n        BEFORELAYERADD: 'beforelayeradd.tc',\r\n        LAYERADD: 'layeradd.tc',\r\n        LAYERREMOVE: 'layerremove.tc',\r\n        LAYERORDER: 'layerorder.tc',\r\n        BEFORELAYERUPDATE: 'beforelayerupdate.tc',\r\n        LAYERUPDATE: 'layerupdate.tc',\r\n        LAYERERROR: 'layererror.tc',\r\n        BEFOREBASELAYERCHANGE: 'beforebaselayerchange.tc',\r\n        BASELAYERCHANGE: 'baselayerchange.tc',\r\n        BEFOREUPDATE: 'beforeupdate.tc',\r\n        UPDATE: 'update.tc',\r\n        BEFOREZOOM: 'beforezoom.tc',\r\n        ZOOM: 'zoom.tc',\r\n        BEFOREUPDATEPARAMS: 'beforeupdateparams.tc',\r\n        UPDATEPARAMS: 'updateparams.tc',\r\n        VECTORUPDATE: 'vectorupdate.tc',\r\n        FEATUREADD: 'featureadd.tc',\r\n        BEFOREFEATURESADD: 'beforefeaturesadd.tc',\r\n        FEATURESADD: 'featuresadd.tc',\r\n        FEATUREREMOVE: 'featureremove.tc',\r\n        FEATURESCLEAR: 'featuresclear.tc',\r\n        FEATURESIMPORT: 'featuresimport.tc',\r\n        FEATURESIMPORTERROR: 'featuresimporterror.tc',\r\n        BEFORETILELOAD: 'beforetileload.tc',\r\n        TILELOAD: 'tileload.tc',\r\n        TILELOADERROR: 'tileloaderror.tc',\r\n        CONTROLADD: 'controladd.tc',\r\n        CONTROLACTIVATE: 'controlactivate.tc',\r\n        CONTROLDEACTIVATE: 'controldeactivate.tc',\r\n        BEFORECONTROLRENDER: 'beforecontrolrender.tc',\r\n        CONTROLRENDER: 'controlrender.tc',\r\n        BEFORELAYOUTLOAD: 'beforelayoutload.tc',\r\n        LAYOUTLOAD: 'layoutload.tc',\r\n        LAYERVISIBILITY: 'layervisibility.tc',\r\n        LAYEROPACITY: 'layeropacity.tc',\r\n        FEATURECLICK: 'featureclick.tc',\r\n        NOFEATURECLICK: 'nofeatureclick.tc',\r\n        FEATUREOVER: 'featureover.tc',\r\n        FEATUREOUT: 'featureout.tc',\r\n        BEFOREFEATUREINFO: 'beforefeatureinfo.tc',\r\n        FEATUREINFO: 'featureinfo.tc',\r\n        NOFEATUREINFO: 'nofeatureinfo.tc',\r\n        FEATUREINFOERROR: 'featureinfoerror.tc',\r\n        CLICK: 'click',\r\n        MOUSEUP: 'mouseup',\r\n        MOUSEMOVE: 'mousemove',\r\n        MOUSELEAVE: 'mouseleave',\r\n        STARTLOADING: 'startloading.tc',\r\n        STOPLOADING: 'stoploading.tc',\r\n        EXTERNALSERVICEADDED: 'externalserviceadded.tc',\r\n        ZOOMTO: 'zoomto.tc',\r\n        PROJECTIONCHANGE: 'projectionchange.tc',\r\n        VIEWCHANGE: 'viewchange.tc',\r\n        TERRAINPROVIDERADD: 'terrainprovideradd.tc',\r\n        TERRAINPROVIDERREMOVE: 'terrainproviderremove.tc',\r\n        OVERVIEWBASELAYERCHANGE: 'overviewbaselayerchange.tc',\r\n        POPUP: 'popup.tc'\r\n    };\r\n    TC.Consts.layer = {\r\n        IDENA_ORTHOPHOTO: 'ortofoto',\r\n        IDENA_BASEMAP: 'mapabase',\r\n        IDENA_CADASTER: 'catastro',\r\n        IDENA_CARTO: 'cartografia',\r\n        IDENA_ORTHOPHOTO2018: 'ortofoto2018',\r\n        IDENA_ORTHOPHOTO2017: 'ortofoto2017',\r\n        IDENA_ORTHOPHOTO2014: 'ortofoto2014',\r\n        IDENA_ORTHOPHOTO2012: 'ortofoto2012',\r\n        IDENA_DYNBASEMAP: 'mapabase_dinamico',\r\n        IDENA_DYNORTHOPHOTO: 'ortofoto_dinamico',\r\n        IDENA_DYNORTHOPHOTO2018: 'ortofoto2018_dinamico',\r\n        IDENA_DYNORTHOPHOTO2017: 'ortofoto2017_dinamico',\r\n        IDENA_DYNORTHOPHOTO2014: 'ortofoto2014_dinamico',\r\n        IDENA_DYNORTHOPHOTO2012: 'ortofoto2012_dinamico',\r\n        IDENA_DYNCARTO: 'cartografia_dinamico',\r\n        IDENA_BW_RELIEF: 'relieve_bn',\r\n        IDENA_BASEMAP_ORTHOPHOTO: 'base_orto',\r\n\r\n        IGN_ES_CARTO: \"ign-raster\",\r\n        IGN_ES_BASEMAP: \"ign-base\",\r\n        IGN_ES_BASEMAP_GREY: \"ign-base-gris\",\r\n        IGN_ES_RELIEF: \"ign-mtn\",\r\n        IGN_ES_ORTHOPHOTO: \"ign-pnoa\",\r\n\r\n        IGN_ES_DYNCARTO: \"ign-raster-dyn\",\r\n        IGN_ES_DYNBASEMAP: \"ign-base-dyn\",\r\n        IGN_ES_DYNBASEMAP_GREY: \"ign-base-gris-dyn\",\r\n        IGN_ES_DYNRELIEF: \"ign-mtn-dyn\",\r\n        IGN_ES_DYNORTHOPHOTO: \"ign-pnoa-dyn\",\r\n\r\n        IGN_FR_CARTO: \"ign-fr-cartes\",\r\n        IGN_FR_BASEMAP: \"ign-fr-base\",\r\n        IGN_FR_RELIEF: \"ign-fr-estompage\",\r\n        IGN_FR_ORTHOPHOTO: \"ign-fr-orto\",\r\n\r\n        IGN_FR_DYNCARTO: \"ign-fr-cartes-dyn\",\r\n        IGN_FR_DYNBASEMAP: \"ign-fr-base-dyn\",\r\n        IGN_FR_DYNRELIEF: \"ign-fr-estompage-dyn\",\r\n        IGN_FR_DYNORTHOPHOTO: \"ign-fr-orto-dyn\",\r\n\r\n        OSM: 'osm',\r\n        CARTO_VOYAGER: 'carto_voyager',\r\n        CARTO_LIGHT: 'carto_light',\r\n        CARTO_DARK: 'carto_dark',\r\n        MAPBOX_STREETS: 'mapbox_streets',\r\n        MAPBOX_SATELLITE: 'mapbox_satellite',\r\n\r\n        BLANK: 'ninguno'\r\n    };\r\n    TC.Consts.text = {\r\n        API_ERROR: 'Error API SITNA',\r\n        APP_ERROR: 'Error de aplicación'\r\n    };\r\n    /**\r\n     * Colección de identificadores de tipo de capa.\r\n     * No se deberían modificar las propiedades de esta clase.\r\n     * @class TC.consts.LayerType\r\n     * @static\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WMS.\r\n     * @property WMS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WMTS.\r\n     * @property WMTS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo WFS.\r\n     * @property WFS\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo KML.\r\n     * @property KML\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo GPX.\r\n     * @property GPX\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de tipo vectorial. Este tipo de capa es la que se utiliza para dibujar marcadores.\r\n     * @property VECTOR\r\n     * @type string\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de capa de grupo.\r\n     * @property GROUP\r\n     * @type string\r\n     * @final\r\n     */\r\n    TC.Consts.layerType = {\r\n        WMS: 'WMS',\r\n        WMTS: 'WMTS',\r\n        WFS: 'WFS',\r\n        VECTOR: 'vector',\r\n        KML: 'KML',\r\n        GPX: 'GPX',\r\n        GML: 'GML',\r\n        GEOJSON: 'GeoJSON',\r\n        GROUP: 'group'\r\n    };\r\n    TC.Consts.geom = {\r\n        POINT: 'point',\r\n        MULTIPOINT: 'multipoint',\r\n        POLYLINE: 'polyline',\r\n        POLYGON: 'polygon',\r\n        MULTIPOLYLINE: 'multipolyline',\r\n        MULTIPOLYGON: 'multipolygon',\r\n        CIRCLE: 'circle',\r\n        RECTANGLE: 'rectangle'\r\n    };\r\n    TC.Consts.searchType = {\r\n        CADASTRAL: 'cadastral',\r\n        COORDINATES: 'coordinates',\r\n        MUNICIPALITY: 'municipality',\r\n        COUNCIL: 'council',\r\n        LOCALITY: 'locality',\r\n        STREET: 'street',\r\n        NUMBER: 'number',\r\n        URBAN: 'urban',\r\n        COMMONWEALTH: 'commonwealth',\r\n        ROAD: 'road',\r\n        ROADPK: 'roadpk',\r\n        PLACENAME: 'placename',\r\n        PLACENAMEMUNICIPALITY: 'placenamemunicipality'\r\n    };\r\n    TC.Consts.mapSearchType = {\r\n        MUNICIPALITY: TC.Consts.searchType.MUNICIPALITY,\r\n        COUNCIL: TC.Consts.searchType.COUNCIL,\r\n        URBAN: TC.Consts.searchType.URBAN,\r\n        COMMONWEALTH: TC.Consts.searchType.COMMONWEALTH,\r\n        GENERIC: 'generic'\r\n    };\r\n    TC.Consts.comparison = {\r\n        EQUAL_TO: '==',\r\n        NOT_EQUAL_TO: '!=',\r\n        LESS_THAN: '<',\r\n        GREATER_THAN: '>',\r\n        LESS_THAN_EQUAL_TO: '=<',\r\n        GREATER_THAN_EQUAL_TO: '>=',\r\n        LIKE: 'is'\r\n    };\r\n    TC.Consts.logicalOperator = {\r\n        AND: 'and',\r\n        OR: 'or'\r\n    };\r\n    TC.Consts.WMTSEncoding = {\r\n        KVP: 'KVP',\r\n        RESTFUL: 'RESTful'\r\n    };\r\n    TC.Consts.mimeType = {\r\n        PNG: 'image/png',\r\n        JPEG: 'image/jpeg',\r\n        JSON: 'application/json',\r\n        GEOJSON: 'application/vnd.geo+json',\r\n        KML: 'application/vnd.google-earth.kml+xml',\r\n        GML: 'application/gml+xml',\r\n        GPX: 'application/gpx+xml',\r\n        XML: 'application/xml'\r\n    };\r\n    TC.Consts.format = {\r\n        JSON: 'JSON',\r\n        KML: 'KML',\r\n        GML: 'GML',\r\n        GML2: 'GML2',\r\n        GML3: 'GML2',\r\n        GEOJSON: 'GeoJSON',\r\n        TOPOJSON: 'TopoJSON',\r\n        GPX: 'GPX',\r\n        WKT: 'WKT'\r\n    };\r\n    //enumerado de errores y warninqs derivados de descargas, getfeatures\r\n    TC.Consts.WFSErrors = {\r\n        GetFeatureNotAvailable: \"GetFeatureNotAvailable\",\r\n        LayersNotAvailable: \"LayersNotAvailable\",\r\n        NoLayers: \"NoLayers\",\r\n        NoValidLayers: \"noValidLayers\",\r\n        QueryNotAvailable: \"QueryNotAvailable\",\r\n        CapabilitiesParseError: \"CapabilitiesParseError\",\r\n        NumMaxFeatures: \"NumMaxFeatures\",\r\n        GetCapabilities: \"GetCapabilities\",\r\n        Indeterminate: \"Indeterminate\",\r\n        NoFeatures: \"NoFeatures\"\r\n    }\r\n    /**\r\n     * Colección de identificadores de estados de visibilidad.\r\n     * No se deberían modificar las propiedades de esta clase.\r\n     * @class TC.consts.Visibility\r\n     * @static\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible.\r\n     * @property NOT_VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible a la resolución actual.\r\n     * @property NOT_VISIBLE_AT_RESOLUTION\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo no visible pero que tiene nodos hijos visibles.\r\n     * @property HAS_VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    /**\r\n     * Identificador de nodo visible.\r\n     * @property VISIBLE\r\n     * @type number\r\n     * @final\r\n     */\r\n    TC.Consts.visibility = {\r\n        NOT_VISIBLE: 0,\r\n        NOT_VISIBLE_AT_RESOLUTION: 1,\r\n        HAS_VISIBLE: 2,\r\n        VISIBLE: 4\r\n    };\r\n\r\n    TC.Consts.view = {\r\n        DEFAULT: 0,\r\n        THREED: 1,\r\n        PRINTING: 2\r\n    };\r\n\r\n    TC.Consts.units = {\r\n        DEGREES: \"degrees\",\r\n        METERS: \"m\"\r\n    };\r\n\r\n    TC.Consts.MARKER = 'marker';\r\n\r\n    TC.Defaults = (function () {\r\n\r\n        var clusterRadii = {};\r\n        var getClusterRadius = function (feature) {\r\n            var count = feature.features.length;\r\n            var result = clusterRadii[count];\r\n            if (!result) {\r\n                result = 2 + Math.round(Math.sqrt(count) * 5);\r\n                clusterRadii[count] = result;\r\n            }\r\n            return result;\r\n        };\r\n\r\n        return {\r\n            imageRatio: 1.05,\r\n            proxy: '',\r\n\r\n            crs: 'EPSG:25830',\r\n            utmCrs: 'EPSG:25830',\r\n            geoCrs: 'EPSG:4326',\r\n            initialExtent: [541084.221, 4640788.225, 685574.4632, 4796618.764],\r\n            maxExtent: false,\r\n            baselayerExtent: [480408, 4599748, 742552, 4861892],\r\n            resolutions: [1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, .5, .25],\r\n            pointBoundsRadius: 30,\r\n            extentMargin: 0.2,\r\n            mouseWheelZoom: true,\r\n            attribution: '<a href=\"http://sitna.navarra.es/\" target=\"_blank\">SITNA</a>',\r\n            oldBrowserAlert: true,\r\n            notifyApplicationErrors: false,\r\n            loggingErrorsEnabled: true,\r\n            maxErrorCount: 10,\r\n            layoutURLParamName: 'layout', // Parámetro donde leer en la URL de la aplicación para cargar un layout.\r\n            titleURLParamName: 'title', // Parámetro donde leer en la URL de la aplicación para cargar un título de mapa, p. e. al imprimir.\r\n\r\n            locale: 'es-ES',\r\n\r\n            view: TC.Consts.view.DEFAULT,\r\n\r\n            screenSize: 20,\r\n            pixelTolerance: 10, // Used in GFI requests\r\n            maxResolutionError: 0.01, // Max error ratio to consider two resolutions equivalent\r\n\r\n            toastDuration: 5000,\r\n\r\n            avgTileSize: 31000,\r\n\r\n            availableBaseLayers: [\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BASEMAP,\r\n                    title: 'Mapa base',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830extended',\r\n                    layerNames: 'mapabase',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: true,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap.png',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNBASEMAP,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO,\r\n                    title: 'Ortofoto máxima actualidad',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto_maxima_actualidad',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2018,\r\n                    title: 'Ortofoto 2018',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2018',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2018.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2017,\r\n                    title: 'Ortofoto 2017',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2017',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2017.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2014,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830reduced',\r\n                    layerNames: 'ortofoto2014',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2014.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_ORTHOPHOTO2012,\r\n                    title: 'Ortofoto 2012',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'ortofoto2012',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2012.jpg',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_CARTO,\r\n                    title: 'Cartografía topográfica',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: '//idena.navarra.es/ogc/wmts/',\r\n                    matrixSet: 'epsg25830',\r\n                    layerNames: 'mapaTopografico',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-bta.png',\r\n                    fallbackLayer: TC.Consts.layer.IDENA_DYNCARTO,\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_CADASTER,\r\n                    title: 'Catastro',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'catastro,regionesFronterizas',\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-cadaster.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BW_RELIEF,\r\n                    title: 'Relieve',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'IDENA:mapa_relieve_bn',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-relief_bw.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_BASEMAP_ORTHOPHOTO,\r\n                    title: 'Mapa base/ortofoto',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'mapaBase_orto',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-base_ortho.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNBASEMAP,\r\n                    title: 'Mapa base',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'mapaBase,regionesFronterizas',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_maxima_actualidad',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2018,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2018',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2018.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2017,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2017',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2017.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2014,\r\n                    title: 'Ortofoto 2014',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2014',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2014.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNORTHOPHOTO2012,\r\n                    title: 'Ortofoto 2012',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'ortofoto_5000_2012',\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-ortho2012.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IDENA_DYNCARTO,\r\n                    title: 'Cartografía topográfica',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//idena.navarra.es/ogc/wms',\r\n                    layerNames: 'MTNa5_BTA',\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-bta.png',\r\n                    overviewMapLayer: TC.Consts.layer.IDENA_DYNBASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_CARTO,\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    title: \"Cartografía raster \\r\\n (IGN ES)\",\r\n                    url: \"//www.ign.es/wmts/mapa-raster\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"MTN\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNCARTO,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_BASEMAP,\r\n                    title: \"Callejero \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/ign-base\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"IGNBaseTodo\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-basemap_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNBASEMAP,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_BASEMAP_GREY,\r\n                    title: \"Callejero gris \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/ign-base\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"IGNBase-gris\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-basemap_grey_ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_RELIEF,\r\n                    title: \"Relieve \\r\\n (IGN ES)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/mdt\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"Relieve\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-relief_ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNRELIEF,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_ORTHOPHOTO,\r\n                    title: \"Ortofoto PNOA\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//www.ign.es/wmts/pnoa-ma\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"OI.OrthoimageCoverage\",\r\n                    matrixSet: \"EPSG:25830\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-orthophoto_pnoa.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNBASEMAP,\r\n                    title: 'Mapa base \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/ign-base',\r\n                    layerNames: 'IGNBaseTodo',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNBASEMAP_GREY,\r\n                    title: 'Callejero gris \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/ign-base',\r\n                    layerNames: 'IGNBaseTodo-gris',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-basemap_grey_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/pnoa-ma',\r\n                    layerNames: 'OI.OrthoimageCoverage',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-orthophoto_pnoa.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNCARTO,\r\n                    title: 'Cartografía topográfica \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/mapa-raster',\r\n                    layerNames: 'mtn_rasterizado',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto_ign.png',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_ES_DYNRELIEF,\r\n                    title: 'Relieve \\r\\n (IGN ES)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: '//www.ign.es/wms-inspire/mdt',\r\n                    layerNames: 'relieve',\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-relief_ign.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.IGN_ES_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_CARTO,\r\n                    title: \"Cartografía raster \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNCARTO,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_BASEMAP,\r\n                    title: \"Mapa base \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGN\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-base-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNBASEMAP,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_RELIEF,\r\n                    title: \"Relieve \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/png\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-estom-fr-ign.png\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNRELIEF,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_ORTHOPHOTO,\r\n                    title: \"Ortofoto \\r\\n (IGN FR)\",\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/wmts\",\r\n                    encoding: TC.Consts.WMTSEncoding.KVP,\r\n                    layerNames: \"ORTHOIMAGERY.ORTHOPHOTOS\",\r\n                    matrixSet: \"PM\",\r\n                    format: \"image/jpeg\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-ortho-fr-ign.jpg\",\r\n                    fallbackLayer: TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNCARTO,\r\n                    title: 'Cartografía raster \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-carto-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP,\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNBASEMAP,\r\n                    title: 'Mapa base \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGN\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-base-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNRELIEF,\r\n                    title: 'Relieve \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"ELEVATION.ELEVATIONGRIDCOVERAGE\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-estom-fr-ign.png\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.IGN_FR_DYNORTHOPHOTO,\r\n                    title: 'Ortofoto \\r\\n (IGN FR)',\r\n                    type: TC.Consts.layerType.WMS,\r\n                    url: \"//wxs.ign.fr/njfzwf3vgc55gekk8ra4zezx/geoportail/r/wms\",\r\n                    layerNames: \"HR.ORTHOIMAGERY.ORTHOPHOTOS\",\r\n                    thumbnail: TC.apiLocation + \"tc/css/img/thumb-ortho-fr-ign.jpg\",\r\n                    ignoreProxification: true,\r\n                    overviewMapLayer: TC.Consts.layer.IGN_FR_BASEMAP\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.OSM,\r\n                    title: 'OSM',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/osm/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'osm',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-osm.png',\r\n                    overviewMapLayer: TC.Consts.layer.OSM\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_VOYAGER,\r\n                    title: 'CARTO Voyager',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'voyager',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-voyager.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_LIGHT,\r\n                    title: 'CARTO light',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'light_all',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-light.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.CARTO_DARK,\r\n                    title: 'CARTO dark',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/carto/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'dark_all',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-carto-dark.png',\r\n                    overviewMapLayer: TC.Consts.layer.CARTO_VOYAGER\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.MAPBOX_STREETS,\r\n                    title: 'Mapbox Streets',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/mapbox/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'streets',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/png',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-mapbox-streets.png',\r\n                    overviewMapLayer: TC.Consts.layer.MAPBOX_STREETS\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.MAPBOX_SATELLITE,\r\n                    title: 'Mapbox Satellite',\r\n                    type: TC.Consts.layerType.WMTS,\r\n                    url: TC.apiLocation + 'wmts/mapbox/',\r\n                    matrixSet: 'WorldWebMercatorQuad',\r\n                    layerNames: 'satellite',\r\n                    encoding: TC.Consts.WMTSEncoding.RESTFUL,\r\n                    format: 'image/jpeg',\r\n                    isDefault: false,\r\n                    hideTree: true,\r\n                    thumbnail: TC.apiLocation + 'TC/css/img/thumb-mapbox-satellite.jpg',\r\n                    overviewMapLayer: TC.Consts.layer.MAPBOX_STREETS\r\n                },\r\n                {\r\n                    id: TC.Consts.layer.BLANK,\r\n                    title: 'Mapa en blanco',\r\n                    type: TC.Consts.layerType.VECTOR\r\n                }\r\n            ],\r\n\r\n            baseLayers: [\r\n                TC.Consts.layer.IDENA_BASEMAP,\r\n                TC.Consts.layer.IDENA_ORTHOPHOTO,\r\n                TC.Consts.layer.IDENA_CADASTER,\r\n                TC.Consts.layer.IDENA_CARTO\r\n            ],\r\n\r\n            defaultBaseLayer: TC.Consts.layer.IDENA_BASEMAP,\r\n\r\n            workLayers: [],\r\n\r\n            controls: {\r\n                loadingIndicator: true,\r\n                navBar: false,\r\n                scaleBar: false,\r\n                scale: false,\r\n                scaleSelector: false,\r\n                overviewMap: false,\r\n                basemapSelector: false,\r\n                attribution: true,\r\n                TOC: false,\r\n                coordinates: true,\r\n                legend: false,\r\n                popup: false,\r\n                search: {\r\n                    url: '//idena.navarra.es/ogc/wfs',\r\n                    allowedSearchTypes: {\r\n                        coordinates: {},\r\n                        municipality: {},\r\n                        urban: {},\r\n                        street: {},\r\n                        number: {},\r\n                        cadastral: {}\r\n                    }\r\n                },\r\n                measure: false,                \r\n                streetView: true,\r\n                featureInfo: true,\r\n                featureTools: true\r\n            },\r\n\r\n            layout: null,\r\n\r\n            styles: {\r\n                point: {\r\n                    fillColor: '#000000',\r\n                    fillOpacity: 0.1,\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    radius: 6,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    labelOffset: [0, -16],\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                marker: {\r\n                    classes: [\r\n                        TC.Consts.classes.MARKER + 1,\r\n                        TC.Consts.classes.MARKER + 2,\r\n                        TC.Consts.classes.MARKER + 3,\r\n                        TC.Consts.classes.MARKER + 4,\r\n                        TC.Consts.classes.MARKER + 5\r\n                    ],\r\n                    anchor: [.5, 1],\r\n                    width: 32,\r\n                    height: 32,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    labelOffset: [0, -32],\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                line: {\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                polygon: {\r\n                    strokeColor: '#ff0000',\r\n                    strokeWidth: 2,\r\n                    fillColor: '#000000',\r\n                    fillOpacity: 0.3,\r\n                    labelOutlineWidth: 2,\r\n                    labelOutlineColor: '#ffffff',\r\n                    fontColor: '#000000',\r\n                    fontSize: 10\r\n                },\r\n                cluster: {\r\n                    point: {\r\n                        fillColor: '#333366',\r\n                        fillOpacity: 0.6,\r\n                        radius: getClusterRadius,\r\n                        label: '${features.length}',\r\n                        fontColor: \"#fff\",\r\n                        fontSize: 9\r\n                    }\r\n                },\r\n                selection: {\r\n                    point: {\r\n                        fillColor: '#0000ff',\r\n                        fillOpacity: 0.5,\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        radius: 6,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        labelOffset: [0, -16],\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    },\r\n                    line: {\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    },\r\n                    polygon: {\r\n                        strokeColor: '#0000ff',\r\n                        strokeWidth: 2,\r\n                        fillColor: '#000000',\r\n                        fillOpacity: .3,\r\n                        labelOutlineWidth: 2,\r\n                        labelOutlineColor: '#ffffff',\r\n                        fontColor: '#000000',\r\n                        fontSize: 10\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    })();\r\n\r\n    (function () {\r\n        if (!Array.prototype.map) {\r\n            Array.prototype.map = function (fun /*, thisArg */) {\r\n                \"use strict\";\r\n\r\n                if (this === void 0 || this === null)\r\n                    throw new TypeError();\r\n\r\n                var t = Object(this);\r\n                var len = t.length >>> 0;\r\n                if (typeof fun !== \"function\")\r\n                    throw new TypeError();\r\n\r\n                var res = new Array(len);\r\n                var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n                for (var i = 0; i < len; i++) {\r\n                    // NOTE: Absolute correctness would demand Object.defineProperty\r\n                    //       be used.  But this method is fairly new, and failure is\r\n                    //       possible only if Object.prototype or Array.prototype\r\n                    //       has a property |i| (very unlikely), so use a less-correct\r\n                    //       but more portable alternative.\r\n                    if (i in t)\r\n                        res[i] = fun.call(thisArg, t[i], i, t);\r\n                }\r\n\r\n                return res;\r\n            };\r\n        }\r\n\r\n        /* \r\n         * proxify: returns cross-origin safe URL\r\n         */\r\n        TC.proxify = function (url) {\r\n            url = $.trim(url);\r\n            var result = url;\r\n            if (TC.Cfg.proxy) {\r\n                var prevent = false;\r\n                if (TC.Cfg.proxyExceptions) {\r\n                    for (var i = 0; i < TC.Cfg.proxyExceptions.length; i++) {\r\n                        if (url.indexOf(TC.Cfg.proxyExceptions[i]) > -1) {\r\n                            prevent = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!prevent && !TC.Util.isSameOrigin(url)) {\r\n                    if (typeof TC.Cfg.proxy == \"function\") {\r\n                        result = TC.Cfg.proxy(url);\r\n                    } else {\r\n                        result = TC.Cfg.proxy;\r\n                        if (url.substr(0, 4) != \"http\") result += window.location.protocol;\r\n                        result += encodeURIComponent(url);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n\r\n        var getHead = function () {\r\n            var result;\r\n            var d = document;\r\n            var ah = d.getElementsByTagName(\"head\");\r\n            if (ah.length === 0) {\r\n                result = d.createElement(\"head\");\r\n                d.documentElement.insertBefore(result, document.body);\r\n            }\r\n            else {\r\n                result = ah[0];\r\n            }\r\n            return result;\r\n        };\r\n\r\n        if (typeof TC.isDebug != \"boolean\") {\r\n            TC.isDebug = true;\r\n        };\r\n\r\n        var _showLoadFailedError = function (url) {\r\n            var mapObj = $('.' + TC.Consts.classes.MAP).data('map');\r\n            TC.error(\r\n                TC.Util.getLocaleString(mapObj.options.locale, \"urlFailedToLoad\",\r\n                    { url: url }),\r\n                [TC.Consts.msgErrorMode.TOAST, TC.Consts.msgErrorMode.EMAIL],\r\n                \"Error al cargar \" + url);\r\n        };\r\n\r\n        TC.syncLoadJS = function (url) {\r\n            var _sendRequest = function (url, callbackErrorFn) {\r\n                var req = new XMLHttpRequest();\r\n                req.open(\"GET\", url, false); // 'false': synchronous.\r\n                var result;\r\n\r\n                req.onreadystatechange = function (e) {\r\n                    if (req.readyState === 4) {\r\n                        if (req.status === 404) {\r\n                            result = false;\r\n                            callbackErrorFn(true);\r\n                        } else if (req.status !== 200) {\r\n                            callbackErrorFn();\r\n                            result = false;\r\n                        } else {\r\n                            result = req.responseText;\r\n                        }\r\n                    }\r\n                };\r\n\r\n\r\n                try {\r\n                    req.send(null);\r\n                } catch (error) {\r\n                    result = false;\r\n                    callbackErrorFn();\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            if (!/(\\.js|\\/)$/i.test(url)) { // Si pedimos un archivo sin extensión se la ponemos según el entorno\r\n                url = url + (TC.isDebug ? '.js' : '.min.js');\r\n            }\r\n\r\n            var reqResult = _sendRequest(url, function (is404) {\r\n                if (is404) {\r\n                    _showLoadFailedError(url);\r\n                    return false;\r\n                } else {\r\n                    return _sendRequest(url, function () {\r\n                        _showLoadFailedError(url);\r\n                    });\r\n                }\r\n            });\r\n\r\n            if (reqResult) {\r\n                var script = document.createElement(\"script\");\r\n                script.type = \"text/javascript\";\r\n                script.text = reqResult;\r\n                getHead().appendChild(script);\r\n            }\r\n        };\r\n\r\n        if (!window.Modernizr) {\r\n            TC.syncLoadJS(TC.apiLocation + TC.Consts.url.MODERNIZR);\r\n        }\r\n        Modernizr.touch = Modernizr.touchevents; // compatibilidad hacia atrás\r\n\r\n        TC.isLegacy = TC.isLegacy || !Modernizr.canvas;\r\n\r\n        if (!window.jQuery) {\r\n            if (Modernizr.canvas && !TC.isLegacy) { // > ie8\r\n                TC.syncLoadJS(TC.Consts.url.JQUERY);\r\n            }\r\n            else {\r\n                TC.syncLoadJS(TC.Consts.url.JQUERY_LEGACY);\r\n            }\r\n        }\r\n\r\n        if (!('Promise' in window)) {\r\n            TC.syncLoadJS(TC.apiLocation + TC.Consts.url.PROMISE_POLYFILL);\r\n        }\r\n        // Polyfill para NodeList.forEach\r\n        if (window.NodeList && !NodeList.prototype.forEach) {\r\n            NodeList.prototype.forEach = Array.prototype.forEach;\r\n        }\r\n        if (!('finally' in Promise.prototype)) {\r\n            // Muchos polyfills de Promise no implementan finally, lo hacemos aquí en ese caso\r\n            Promise.prototype.finally = function (callback) {\r\n                const ctor = this.constructor;\r\n                return this.then(\r\n                    function (val) {\r\n                        return ctor.resolve(callback()).then(function () {\r\n                            return value;\r\n                        });\r\n                    },\r\n                    function (err) {\r\n                        return ctor.resolve(callback()).then(function () {\r\n                            return ctor.reject(err);\r\n                        });\r\n                    }\r\n                );\r\n            };\r\n        }\r\n\r\n        // Parche para soportar $.when\r\n        if ('$' in window) {\r\n            $._oldWhen = $.when;\r\n            $.when = function () {\r\n                const newArgs = new Array(arguments.length);\r\n                for (var i = 0; i < arguments.length; i++) {\r\n                    const arg = newArgs[i] = arguments[i];\r\n                    if (arg instanceof Promise) {\r\n                        const newArg = $.Deferred();\r\n                        arg\r\n                            .then(function (val) {\r\n                                newArg.resolve(val)\r\n                            })\r\n                            .catch(function (err) {\r\n                                newArg.reject(err);\r\n                            });\r\n                        newArgs[i] = newArg;\r\n                    }\r\n                }\r\n                return $._oldWhen.apply(this, newArgs);\r\n            };\r\n        }\r\n\r\n        // Transformación de petición AJAX de jQuery a promesa nativa\r\n        TC.ajax = function (options) {\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                const method = options.method || 'GET';\r\n                var data;\r\n                if (options.data) {\r\n                    if (typeof options.data === 'string') {\r\n                        data = options.data;\r\n                    }\r\n                    else if (typeof options.data === 'object') {\r\n                        const paramArray = [];\r\n                        for (var key in options.data) {\r\n                            paramArray[paramArray.length] = key + '=' + options.data[key].toString();\r\n                        }\r\n                        data = paramArray.join('&');\r\n                    }\r\n                }\r\n                var url = options.url;\r\n                if (method === 'GET') {\r\n                    url = url + '?' + data;\r\n                }\r\n                const request = new XMLHttpRequest();\r\n                request.open(method, options.url);\r\n\r\n                if (options.contentType || typeof options.contentType === 'boolean') {\r\n                    if (options.contentType) {\r\n                        request.setRequestHeader('Content-Type', options.contentType + '; charset=UTF-8');\r\n                    }\r\n                    \r\n                }\r\n                else {\r\n                    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n                }\r\n\r\n                request.onreadystatechange = function (e) {\r\n                    if (request.readyState === 4) { // DONE\r\n                        if (request.status !== 200) {\r\n                            reject({\r\n                                status: request.status,\r\n                                msg: request.statusText,\r\n                                url: options.url\r\n                            });\r\n                        } else {\r\n                            var responseData;\r\n                            try {\r\n                                switch (options.responseType) {\r\n                                    case TC.Consts.mimeType.JSON:\r\n                                        responseData = JSON.parse(request.responseText);\r\n                                        break;\r\n                                    case TC.Consts.mimeType.XML:\r\n                                        responseData = new DOMParser().parseFromString(request.responseText, 'application/xml');\r\n                                        break;\r\n                                    default:\r\n                                        responseData = request.responseText;\r\n                                        break;\r\n                                }\r\n                                resolve(responseData);\r\n                            }\r\n                            catch (error) {\r\n                                reject(error);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n\r\n                try {\r\n                    request.send(method === 'POST' ? data : null);\r\n                } catch (error) {\r\n                    reject(Error(error));\r\n                }\r\n            });\r\n        };\r\n\r\n        // Completamos los datos de versión\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            var build;\r\n            var mapLibrary = 'Unknown library';\r\n            var OL2 = 'OpenLayers 2';\r\n            var OL = 'OpenLayers 4';\r\n            if (TC.Control) {\r\n                build = 'Compiled';\r\n                if (TC.isLegacy) {\r\n                    if (window.OpenLayers) {\r\n                        mapLibrary = OL2;\r\n                    }\r\n                }\r\n                else {\r\n                    if (window.ol) {\r\n                        mapLibrary = OL;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                build = 'On demand';\r\n                mapLibrary = TC.isLegacy ? OL2 : OL;\r\n            }\r\n            TC.version = TC.version + ' (' + build + '; ' + mapLibrary + '; @ ' + TC.apiLocation + ')';\r\n        });\r\n\r\n        TC.loadJSInOrder = function (condition, url, callback) {\r\n            TC.loadJS(condition, url, callback, true);\r\n        };\r\n\r\n        const addCrossOriginAttr = function (path, scriptEl) {\r\n            if (!TC.Util.isSameOrigin(path)) {\r\n                scriptEl.crossOrigin = \"anonymous\";\r\n            }\r\n        };\r\n\r\n        TC.loadJS = function (condition, url, callback, inOrder, notCrossOrigin) {\r\n            if (arguments.length < 4) {\r\n                inOrder = false;\r\n            }\r\n\r\n            var urls = $.isArray(url) ? url : [url];\r\n            urls = urls.map(function (elm) {\r\n                if (!/\\.js$/i.test(elm) && elm.indexOf(TC.apiLocation) === 0) { // Si pedimos un archivo sin extensión y es nuestro se la ponemos según el entorno\r\n                    return elm + (TC.isDebug ? '.js' : '.min.js');\r\n                }\r\n                return elm;\r\n            });\r\n\r\n            //si tiene canvas, es que es un navegador nuevo\r\n            if (Modernizr.canvas) {\r\n                if (condition) {\r\n                    urls = urls instanceof Array ? urls : [urls];                    \r\n\r\n                    var name = \"\";\r\n                    const getName = function (path) {\r\n                        return path.split('/').reverse().slice(0, 2).reverse().join('_').toLowerCase();\r\n                    };\r\n                    if (urls.length > 1) {\r\n                        var toReduce = urls.slice(0).filter(function (path, index) {\r\n                            if (loadjs.isDefined(getName(path))) {\r\n                                urls.splice(index, 1);\r\n                                loadjs.ready(getName(path), callback);\r\n                                return false;\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        });\r\n                        if (toReduce.length === 1) {\r\n                            name = getName(toReduce[0]);\r\n                        } else if (toReduce.length > 0) {\r\n                            name = toReduce.reduce(function (prev, curr) {\r\n                                return getName(prev) + \"_\" + getName(curr);\r\n                            });\r\n                        }\r\n                    } else {\r\n                        name = getName(urls[0]);\r\n                    }\r\n\r\n                    if (name.length > 0) {\r\n                        if (!loadjs.isDefined(name)) {\r\n                            var options = {\r\n                                async: !inOrder,\r\n                                numRetries: 1\r\n                            };\r\n\r\n                            if (!notCrossOrigin && !TC.Util.detectIE()) {\r\n                                options.before = addCrossOriginAttr;\r\n                            }\r\n\r\n                            loadjs(urls, name, options);\r\n                            loadjs.ready(name, {\r\n                                success: function () {\r\n                                    callback();\r\n                                },\r\n                                error: function (pathsNotFound) {\r\n                                    _showLoadFailedError(pathsNotFound);\r\n                                }\r\n                            });\r\n                        } else {\r\n                            loadjs.ready(name, callback);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    callback();\r\n                }\r\n            }\r\n            else {\r\n                if (condition) {\r\n                    for (var i = 0; i < urls.length; i++) {\r\n                        TC.syncLoadJS(urls[i]);\r\n                    }\r\n                }\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        };        \r\n\r\n        TC.loadCSS = function (url) {\r\n            const getName = function (path) {\r\n                return path.split('/').reverse().slice(0, 2).reverse().join('_').toLowerCase();\r\n            };\r\n\r\n            const name = getName(url);\r\n            if (!loadjs.isDefined(name)) {\r\n                loadjs(url, name, {\r\n                    error: function (pathsNotFound) {\r\n                        _showLoadFailedError(pathsNotFound);\r\n                    },\r\n                    numRetries: 1\r\n                });\r\n            } else {\r\n                loadjs.ready(name);\r\n            }\r\n        };\r\n\r\n        var projectionDataCache = {};\r\n\r\n        TC.getProjectionData = function (options) {\r\n            return new Promise(function (resolve, reject) {\r\n                options = options || {};\r\n                var code = options.crs.substr(options.crs.indexOf(':') + 1);\r\n                if (parseInt(code) === Number.NaN) {\r\n                    // El CRS no está en modo urn o EPSG\r\n                    code = options.crs.substr(options.crs.lastIndexOf('/') + 1);\r\n                }\r\n                var projData = projectionDataCache[code];\r\n                if (projData) {\r\n                    resolve(projData);\r\n                }\r\n                else {\r\n                    var url = TC.Consts.url.EPSG + '?format=json&q=' + code;\r\n                    const toolProxification = new TC.tool.Proxification(TC.proxify);\r\n                    toolProxification.fetchJSON(url, options).then(function (data) {\r\n                        projectionDataCache[code] = data;\r\n                        resolve(data);\r\n                    }).catch(function (error) {\r\n                        reject(Error(error));\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        TC.loadProjDef = function (options) {\r\n            options = options || {};\r\n            const crs = options.crs;\r\n            const epsgPrefix = 'EPSG:';\r\n            const urnPrefix = 'urn:ogc:def:crs:EPSG::';\r\n            const gmlPrefix = 'http://www.opengis.net/gml/srs/epsg.xml#';\r\n\r\n            var getDef;\r\n            if (TC.isLegacy) {\r\n                if (!window[TC.Consts.PROJ4JSOBJ_LEGACY]) {\r\n                    TC.syncLoadJS(TC.url.proj4js);\r\n                }\r\n                getDef = function (name) {\r\n                    return Proj4js.defs[name];\r\n                };\r\n            }\r\n            else {\r\n                if (!window[TC.Consts.PROJ4JSOBJ]) {\r\n                    TC.syncLoadJS(TC.url.proj4js);\r\n                }\r\n                getDef = function (name) {\r\n                    return proj4.defs(name);\r\n                };\r\n            }\r\n            if (!window.Proj4js) {\r\n                window.Proj4js = {\r\n                    Proj: function (code) { return proj4(Proj4js.defs[code]); },\r\n                    defs: proj4.defs,\r\n                    transform: proj4\r\n                };\r\n            }\r\n            const loadProj4Def = function (code, def) {\r\n                Proj4js.defs[code] = def;\r\n                if (!TC.isLegacy) {\r\n                    proj4.defs(code, def);\r\n                }\r\n            };\r\n            const loadDef = function (code, def, name) {\r\n                const epsgCode = epsgPrefix + code;\r\n                const urnCode = urnPrefix + code;\r\n                const gmlCode = gmlPrefix + code;\r\n                var axisUnawareDef;\r\n                if (typeof def === 'object') {\r\n                    axisUnawareDef = $.extend({}, def);\r\n                    def = $.extend({}, def);\r\n                    if (axisUnawareDef.axis) {\r\n                        delete axisUnawareDef.axis;\r\n                    }\r\n                }\r\n                else if (typeof def === 'string') {\r\n                    axisUnawareDef = def.replace('+axis=neu', '');\r\n                }\r\n                loadProj4Def(epsgCode, def);\r\n                loadProj4Def(urnCode, def);\r\n                // Por convención, los CRS definidos por URI siempre tienen orden de coordenadas X-Y.\r\n                loadProj4Def(gmlCode, axisUnawareDef);\r\n                if (crs.indexOf('http') === 0) {\r\n                    // El CRS es tipo URI, usado seguramente en un GML.\r\n                    loadProj4Def(crs, axisUnawareDef);\r\n                    getDef(crs).name = name;\r\n                }\r\n                getDef(epsgCode).name = name;\r\n                getDef(gmlCode).name = name;\r\n            };\r\n            const loadDefResponse = function (data) {\r\n                var result = data.status === 'ok' && data.number_result === 1;\r\n                if (result) {\r\n                    var def = data.results[0];\r\n                    loadDef(def.code, def.proj4, def.name);\r\n                }\r\n                return result;\r\n            };\r\n\r\n            var idx = crs.lastIndexOf('#');\r\n            if (idx < 0) {\r\n                idx = crs.lastIndexOf('/');\r\n            }\r\n            if (idx < 0) {\r\n                idx = crs.lastIndexOf(':');\r\n            }\r\n            var code = crs.substr(idx + 1);\r\n            var def = getDef(crs);\r\n            if (def) {\r\n                loadDef(code, def, options.name);\r\n                if ($.isFunction(options.callback)) {\r\n                    options.callback();\r\n                }\r\n            }\r\n            else {\r\n                if (options.def) {\r\n                    loadDef(code, options.def, options.name);\r\n                    if ($.isFunction(options.callback)) {\r\n                        options.callback();\r\n                    }\r\n                }\r\n                else {\r\n                    TC.getProjectionData(options).then(function (data) {\r\n                        if (loadDefResponse(data) && $.isFunction(options.callback)) {\r\n                            options.callback();\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        TC.url = {\r\n            templating: [\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING,\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING_I18N,\r\n                TC.apiLocation + TC.Consts.url.TEMPLATING_OVERRIDES\r\n            ]\r\n        };\r\n\r\n        if (TC.isLegacy) {\r\n            TC.url.ol = TC.apiLocation + TC.Consts.url.OL_LEGACY;\r\n            TC.url.olConnector = TC.apiLocation + TC.Consts.url.OL_CONNECTOR_LEGACY;\r\n            TC.url.proj4js = TC.apiLocation + TC.Consts.url.PROJ4JS_LEGACY;\r\n        }\r\n        else {\r\n            TC.url.ol = TC.apiLocation + TC.Consts.url.OL;\r\n            TC.url.olConnector = TC.apiLocation + TC.Consts.url.OL_CONNECTOR;\r\n            TC.url.proj4js = TC.apiLocation + TC.Consts.url.PROJ4JS;\r\n        }\r\n\r\n        // Precargamos el CRS por defecto\r\n        TC.loadProjDef({ crs: 'EPSG:25830', name: 'ETRS89 / UTM zone 30N', def: '+proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs' });\r\n        // Precargamos los CRS de IDENA que tienen orden de ejes neu\r\n        TC.loadProjDef({ crs: 'EPSG:4258', name: 'ETRS89', def: '+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3040', name: 'ETRS89 / UTM zone 28N (N-E)', def: '+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3041', name: 'ETRS89 / UTM zone 29N (N-E)', def: '+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3042', name: 'ETRS89 / UTM zone 30N (N-E)', def: '+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:3043', name: 'ETRS89 / UTM zone 31N (N-E)', def: '+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +axis=neu' });\r\n        TC.loadProjDef({ crs: 'EPSG:4230', name: 'ED50', def: '+proj=longlat +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +no_defs +axis=neu' });\r\n\r\n        TC.Cfg = $.extend(true, {}, TC.Defaults, TC.Cfg);\r\n\r\n        TC.capabilities = {};\r\n\r\n        TC.WFScapabilities = {};\r\n\r\n        TC.cache = {};\r\n\r\n        TC.alert = function (text) {\r\n            alert(text);\r\n        };\r\n\r\n        TC.prompt = function (text, value, callback) {\r\n            var newValue = prompt(text, value);\r\n            if ($.isFunction(callback)) {\r\n                callback(newValue);\r\n            }\r\n        };\r\n\r\n        TC.confirm = function (text, accept, cancel) {\r\n            if (confirm(text)) {\r\n                if ($.isFunction(accept)) {\r\n                    accept();\r\n                }\r\n            }\r\n            else {\r\n                if ($.isFunction(cancel)) {\r\n                    cancel();\r\n                }\r\n            }\r\n        };\r\n\r\n        TC.error = function (text) {\r\n            if (window.console) {\r\n                console.error(text);\r\n            }\r\n\r\n        };\r\n\r\n        if (!TC.Map) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/Map');\r\n        }\r\n        if (!TC.Util) {\r\n            TC.syncLoadJS(TC.apiLocation + 'TC/Util');\r\n        }\r\n\r\n        // OpenLayers connectors\r\n        TC.wrap = {\r\n            Map: function (map) {\r\n                var self = this;\r\n                self.parent = map;\r\n                self.map = null;\r\n                /*\r\n                 *  wrap.getMap: Gets OpenLayers map or a promise for the OpenLayers map\r\n                 */\r\n                self.getMap = function () {\r\n                    return self._promise;\r\n                };\r\n            },\r\n            Layer: function (layer) {\r\n                var self = this;\r\n                self.parent = layer;\r\n                self.layer = null;\r\n                TC.EventTarget.call(self);\r\n                /*\r\n                 *  getLayer: Gets OpenLayers layer or a promise for the OpenLayers layer\r\n                 */\r\n                self.getLayer = function () {\r\n                    if (self.layer) {\r\n                        return Promise.resolve(self.layer);\r\n                    }\r\n                    return self._promise;\r\n                };\r\n                /*\r\n                 *  setLayer: Resolves the deferred layer object\r\n                 * Parameter: the OpenLayers layer\r\n                 */\r\n                self.setLayer = function (olLayer) {\r\n                    self.layer = olLayer;\r\n                };\r\n            },\r\n            layer: {\r\n                Raster: function () { TC.wrap.Layer.apply(this, arguments); },\r\n                Vector: function () { TC.wrap.Layer.apply(this, arguments); }\r\n            },\r\n            Control: function (ctl) {\r\n                var self = this;\r\n                self.parent = ctl;\r\n            },\r\n            control: {\r\n                Click: function () { TC.wrap.Control.apply(this, arguments); },\r\n                ScaleBar: function () { TC.wrap.Control.apply(this, arguments); },\r\n                NavBar: function () { TC.wrap.Control.apply(this, arguments); },\r\n                NavBarHome: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Coordinates: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Search: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Measure: function () { TC.wrap.Control.apply(this, arguments); },\r\n                OverviewMap: function () { TC.wrap.Control.apply(this, arguments); },\r\n                FeatureInfo: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Popup: function () { TC.wrap.Control.apply(this, arguments); },\r\n                GeometryFeatureInfo: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Geolocation: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Draw: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Modify: function () { TC.wrap.Control.apply(this, arguments); },\r\n                CacheBuilder: function () { TC.wrap.Control.apply(this, arguments); },\r\n                Edit: function () { TC.wrap.Control.apply(this, arguments); },\r\n                ResultsPanel: function () { TC.wrap.Control.apply(this, arguments); }\r\n            },\r\n            Feature: function () { },\r\n            Geometry: function () { }\r\n        };\r\n        TC.inherit(TC.wrap.Layer, TC.EventTarget);\r\n        TC.inherit(TC.wrap.layer.Raster, TC.wrap.Layer);\r\n        TC.inherit(TC.wrap.layer.Vector, TC.wrap.Layer);\r\n        TC.inherit(TC.wrap.control.Click, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.ScaleBar, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.NavBar, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.NavBarHome, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Coordinates, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Measure, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.OverviewMap, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Popup, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.FeatureInfo, TC.wrap.control.Click);\r\n        TC.inherit(TC.wrap.control.GeometryFeatureInfo, TC.wrap.control.Click);\r\n        TC.inherit(TC.wrap.control.Geolocation, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Draw, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.CacheBuilder, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.Edit, TC.wrap.Control);\r\n        TC.inherit(TC.wrap.control.ResultsPanel, TC.wrap.Control);\r\n\r\n        TC.loadCSS(TC.apiLocation + 'TC/css/tcmap.css');\r\n\r\n\r\n        TC.loadJS(!Modernizr.urlparser, TC.apiLocation + TC.Consts.url.URL_POLYFILL, function () { });\r\n\r\n        var uids = {};\r\n        TC.getUID = function (prefix) {\r\n            prefix = prefix || '';\r\n            var value = uids[prefix];\r\n            if (!value) {\r\n                value = uids[prefix] = 1;\r\n            }\r\n            var result = prefix + value;\r\n            uids[prefix] = value + 1;\r\n            return result;\r\n        };\r\n\r\n    })();\r\n\r\n    (function ($, document) {\r\n\r\n        var pluses = /\\+/g;\r\n        function raw(s) {\r\n            return s;\r\n        }\r\n        function decoded(s) {\r\n            return decodeURIComponent(s.replace(pluses, ' '));\r\n        }\r\n\r\n        $.cookie = function (key, value, options) {\r\n\r\n            // key and at least value given, set cookie...\r\n            if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null)) {\r\n                options = $.extend({}, $.cookie.defaults, options);\r\n\r\n                if (value === null) {\r\n                    options.expires = -1;\r\n                }\r\n\r\n                if (typeof options.expires === 'number') {\r\n                    var days = options.expires, t = options.expires = new Date();\r\n                    t.setDate(t.getDate() + days);\r\n                }\r\n\r\n                value = String(value);\r\n\r\n                return (document.cookie = [\r\n                    encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\r\n                    options.expires ? ';expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n                    options.path ? ';path=' + options.path : '',\r\n                    options.domain ? ';domain=' + options.domain : '',\r\n                    options.secure ? ';secure' : ''\r\n                ].join(''));\r\n            }\r\n\r\n            // key and possibly options given, get cookie...\r\n            options = value || $.cookie.defaults || {};\r\n            var decode = options.raw ? raw : decoded;\r\n            var cookies = document.cookie.split('; ');\r\n            for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {\r\n                if (decode(parts.shift()) === key) {\r\n                    return decode(parts.join('='));\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n\r\n        $.cookie.defaults = {};\r\n\r\n    })(jQuery, document);\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\r\n    TC.browser = TC.Util.getBrowser();\r\n\r\n    TC.loadJS(!TC.Cfg.acceptedBrowserVersions, TC.apiLocation + 'TC/config/browser-versions.js', function (result) {\r\n        var isSupported = true;\r\n        var versions = TC.Cfg.acceptedBrowserVersions;\r\n\r\n        var match = versions.filter(function (item) {\r\n            return item.name.toLowerCase() === TC.browser.name.toLowerCase();\r\n        });\r\n\r\n        // GLS: 14/02/2019 Añadimos gestión para que no muestre tostada ni envíe correos en caso de que el navegador sea uno expirado\r\n        if (match.length > 0 && match[0].expired) {            \r\n            TC.Cfg.loggingErrorsEnabled = false;\r\n        } else {\r\n            if (match.length > 0 && !isNaN(match[0].version)) {\r\n                if (TC.browser.version < match[0].version) {\r\n                    isSupported = false;\r\n                }\r\n            }\r\n\r\n            if (TC.Cfg.oldBrowserAlert && !isSupported) {\r\n                TC.Cfg.loggingErrorsEnabled = false;\r\n                var mapObj = $('.' + TC.Consts.classes.MAP).data('map');\r\n\r\n                TC.i18n.loadResources(!TC.i18n[mapObj.options.locale], TC.apiLocation + 'TC/resources/', mapObj.options.locale).then(function () {\r\n                    TC.error(TC.Util.getLocaleString(mapObj.options.locale, 'outdatedBrowser'), TC.Consts.msgErrorMode.TOAST);\r\n                });\r\n            }\r\n        }        \r\n    });\r\n\r\n    if (/ip(ad|hone|od)/i.test(navigator.userAgent)) {\r\n        // En iOS, el primer click es un mouseover, por eso usamos touchstart como sustituto.\r\n        TC.Consts.event.CLICK = \"touchstart\";\r\n    }\r\n\r\n    // Gestión de errores\r\n    if (!window.JL) {\r\n        TC.syncLoadJS(TC.apiLocation + TC.Consts.url.JSNLOG);\r\n    }\r\n    JL.defaultAjaxUrl = TC.Consts.url.ERROR_LOGGER;\r\n\r\n    const onError = (function () {\r\n        var errorCount = 0;\r\n\r\n        var mapObj;\r\n\r\n        return function (e) {\r\n            mapObj = mapObj || TC.Map.get(document.querySelector('.' + TC.Consts.classes.MAP));\r\n\r\n            var errorMsg, url = \"\", lineNumber = -1, column = -1, errorObj, apiError;\r\n\r\n            if (e.type === \"unhandledrejection\") {\r\n                errorMsg = e.reason.message;\r\n                if (e.reason.stack) {\r\n                    apiError = e.reason.stack.indexOf(TC.apiLocation) > 0;\r\n                } else {\r\n                    apiError = true;\r\n                }\r\n                errorObj = e.reason;\r\n            } else {\r\n                errorMsg = e.message;\r\n                url = e.filename;\r\n                lineNumber = e.lineno;\r\n                column = e.colno;\r\n                errorObj = e.error;\r\n                apiError = url.indexOf(TC.apiLocation) > 0;\r\n            }\r\n\r\n            // Si notifyApplicationErrors === false solo capturamos los errores de la API\r\n            if ((TC.Cfg.notifyApplicationErrors || apiError) && errorCount < TC.Cfg.maxErrorCount && TC.Cfg.loggingErrorsEnabled) {\r\n                // Send object with all data to server side log, using severity fatal, \r\n                // from logger \"onerrorLogger\"\r\n                var msg = apiError ? TC.Consts.text.API_ERROR : TC.Consts.text.APP_ERROR;\r\n                JL(\"onerrorLogger\").fatalException({\r\n                    \"msg\": msg,\r\n                    \"errorMsg\": errorMsg,\r\n                    \"url\": url,\r\n                    \"lineNumber\": lineNumber,\r\n                    \"column\": column,\r\n                    \"appUrl\": location.href,\r\n                    \"prevState\": mapObj.getPreviousMapState(),\r\n                    \"userAgent\": navigator.userAgent\r\n                }, errorObj);\r\n                errorCount++;\r\n\r\n                if (!TC.isDebug) {\r\n                    var DEFAULT_CONTACT_EMAIL = \"webmaster@itracasa.es\";\r\n                    TC.i18n.loadResources(!TC.i18n[mapObj.options.locale], TC.apiLocation + 'TC/resources/', mapObj.options.locale)\r\n                        .then(function () {\r\n                            TC.error(TC.Util.getLocaleString(mapObj.options.locale, \"genericError\") + (mapObj.options.contactEmail || DEFAULT_CONTACT_EMAIL), { type: TC.Consts.msgType.ERROR });\r\n                        });\r\n                }\r\n            }\r\n            // Tell browser to run its own error handler as well   \r\n            return false;\r\n        };\r\n    })();\r\n\r\n    window.addEventListener('error', onError, false);\r\n    window.addEventListener('unhandledrejection', onError, false);\r\n});"],"file":"../tcmap.min.js"}